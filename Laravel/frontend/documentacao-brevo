DOCUMENTACAO:

***

title: Overview
subtitle: Build powerful integrations with the Brevo API
slug: docs/getting-started
data-page-slug: docs/getting-started
------------------------------------

The Brevo API provides programmatic access to all platform features through a unified REST interface.

Use the API to send transactional and marketing messages across email, SMS, and WhatsApp. Manage contacts, build audiences, and run targeted campaigns. Track sales pipelines and sync eCommerce data to measure campaign performance. Integrate live chat, receive real-time webhooks, and configure all account settings programmatically.

## Explore by use case

Common integration scenarios and implementation guides.

<UseCaseCarousel />

## API solutions

Explore popular API solutions available in the Brevo platform.

<CardGroup cols={2}>
  <Card title="Messaging API" href="/docs/send-a-transactional-email">
    Send transactional emails, SMS, and WhatsApp messages. Batch send, schedule deliveries, and track message activity.
  </Card>

  <Card title="Account management" href="/docs/sender-creation-and-management">
    Configure senders, domains, and account settings. Manage users, permissions, and API keys programmatically.
  </Card>

  <Card title="eCommerce" href="/docs/add-the-ecommerce-app">
    Sync products, categories, and orders. Track customer behavior and attribute revenue to campaigns.
  </Card>

  <Card title="Conversations" href="/docs/getting-started-with-conversations-api">
    Integrate live chat widgets and manage conversations programmatically. Customize the chat experience.
  </Card>

  <Card title="Custom objects" href="/docs/custom-objects-management">
    Create and manage custom data structures. Store and retrieve records for your specific use cases.
  </Card>

  <Card title="Custom events" href="/docs/track-custom-events-js">
    Track custom user events and behaviors. Monitor website activity and measure engagement with JavaScript or REST APIs.
  </Card>
</CardGroup>

## Where to start

<CardGroup cols={3}>
  <Card title="Quickstart" icon="fa-duotone fa-book-sparkles" href="/docs/quickstart">
    Get started with your first API call. Learn key concepts and explore the API with Postman.
  </Card>

  <Card title="Authentication" icon="fa-duotone fa-lock-keyhole-open" href="/docs/authentication-schemes">
    Set up API key or OAuth 2.0 authentication to access the Brevo API.
  </Card>

  <Card title="Changelog" icon="fa-duotone fa-list" href="/changelog">
    Review recent API updates, new features, and breaking changes.
  </Card>

  <Card title="Rate limits" icon="fa-duotone fa-gauge-max" href="/docs/api-limits">
    Understand API rate limits, quotas, and how to handle rate limit responses.
  </Card>

  <Card title="Key concepts" icon="fa-duotone fa-lightbulb" href="/docs/how-it-works">
    Learn how the Brevo API works. Understand base URLs, authentication, and request methods.
  </Card>

  <Card title="SDKs" icon="fa-duotone fa-square-code" href="/docs/api-clients">
    Use official SDKs for your programming language. Available for Python, Node.js, PHP, Ruby, and more.
  </Card>
</CardGroup>


***

title: Quickstart
subtitle: Make your first API call using the interactive playground
slug: docs/quickstart
---------------------

## Before you start

Generate an API key from your [Brevo account settings](https://app.brevo.com/settings/keys/api). You'll need it to authenticate your requests. See the [API key authentication guide](/docs/api-key-authentication) for step-by-step instructions.

<Info>
  If you plan to use the playground mode, whitelist your IP address first. See [IP security](/docs/ip-security) for instructions.
</Info>

## Run your first call

The documentation includes an interactive playground that lets you test API endpoints directly from your browser. You can modify request parameters, add headers, and see real responses without writing any code.

Try the endpoint in the panel to the right. It retrieves your account information and validates your API key. Enter your API key in the `api-key` header, then click **Send request** to execute the call.

<Aside>
  <EndpointRequestSnippet endpoint="GET /account" />

  <RunnableEndpoint endpoint="GET /account" />
</Aside>

A successful response returns your account details, including your account name, email, and plan information. This confirms your API key is valid and you're ready to make additional API calls.

## What's next

Now that you've made your first request, explore our guides to start building your integration:

* **[Learn key Brevo API concepts](/docs/how-it-works)**: Understand core concepts like authentication, pagination, and rate limits.
* **[Send transactional emails](/docs/send-a-transactional-email)**: Send your first email and learn about template management.
* **[Setup webhooks](/docs/how-to-use-webhooks)**: Receive real-time updates for email events.
* **[Send SMS & WhatsApp](/docs/whatsapp-messages)**: Reach customers on their preferred mobile channels.

## Tools and Resources

<CardGroup cols={1}>
  <Card title="Postman Workspace" icon="fa-duotone fa-planet-ringed" iconPosition="left" href="/docs/postman">
    Explore, test, and contribute to our API collections. Fork our workspace to streamline your development workflow with pre-configured endpoints.
  </Card>

  <Card title="API Rate limits" icon="fa-duotone fa-gauge-max" iconPosition="left" href="/docs/api-limits">
    Understand rate limiting policies and quotas. Learn how to optimize your API calls and prevent request throttling.
  </Card>

  <Card title="MCP Server" icon="fa-duotone fa-microchip-ai" iconPosition="left" href="/docs/mcp-protocol">
    Integrate Brevo with AI assistants using the Model Context Protocol. Enable AI models to interact with your Brevo account through standardized endpoints.
  </Card>
</CardGroup>


***

title: Key concepts
subtitle: Learn how the Brevo API works
slug: docs/how-it-works
-----------------------

## Overview

The Brevo API uses REST principles over HTTPS. All requests require authentication via an API key, and responses are returned as JSON. This guide covers the essential concepts you need to understand before making your first API call.

## Base URL and versioning

All API requests use the base URL with version v3:

```http
https://api.brevo.com/v3/
```

## Authentication

Include your API key in the `api-key` header for every request. Generate an API key from your [Brevo account settings](https://app.brevo.com/settings/keys/api).

See the [authentication guide](/docs/api-key-authentication) for detailed setup instructions.

## Making requests

### Required headers

Every request must include:

* `content-type: application/json` - Specifies JSON payload format
* `api-key: YOUR_API_KEY` - Your authentication token

### Request methods

The API supports standard HTTP methods:

* `GET` - Retrieve resources
* `POST` - Create resources
* `PUT` - Update resources
* `DELETE` - Remove resources

### Example request

Create a contact using the API:

<Tabs>
  <Tab title="cURL">
    ```bash
    curl -X POST 'https://api.brevo.com/v3/contacts' \
         -H 'content-type: application/json' \
         -H 'api-key: YOUR_API_KEY' \
         -d '{"email":"contact@example.com"}'
    ```
  </Tab>

  <Tab title="Python">
    ```python
    import sib_api_v3_sdk
    from sib_api_v3_sdk.rest import ApiException

    configuration = sib_api_v3_sdk.Configuration()
    configuration.api_key['api-key'] = 'YOUR_API_KEY'

    api_instance = sib_api_v3_sdk.ContactsApi(
        sib_api_v3_sdk.ApiClient(configuration)
    )
    create_contact = sib_api_v3_sdk.CreateContact(
        email="contact@example.com"
    )

    try:
        api_response = api_instance.create_contact(create_contact)
        print(api_response)
    except ApiException as e:
        print(f"Exception: {e}")
    ```
  </Tab>

  <Tab title="Node.js">
    ```javascript
    const SibApiV3Sdk = require('sib-api-v3-sdk');

    const defaultClient = SibApiV3Sdk.ApiClient.instance;
    const apiKey = defaultClient.authentications['api-key'];
    apiKey.apiKey = 'YOUR_API_KEY';

    const apiInstance = new SibApiV3Sdk.ContactsApi();
    const createContact = { email: "contact@example.com" };

    apiInstance.createContact(createContact)
      .then(data => console.log('Success:', data))
      .catch(error => console.error('Error:', error));
    ```
  </Tab>

  <Tab title="PHP">
    ```php
    require_once(__DIR__ . '/vendor/autoload.php');

    $config = SendinBlue\Client\Configuration::getDefaultConfiguration();
    $config->setApiKey('api-key', 'YOUR_API_KEY');

    $apiInstance = new SendinBlue\Client\Api\ContactsApi(
        new GuzzleHttp\Client(),
        $config
    );

    $createContact = new \SendinBlue\Client\Model\CreateContact();
    $createContact['email'] = 'contact@example.com';

    try {
        $result = $apiInstance->createContact($createContact);
        print_r($result);
    } catch (Exception $e) {
        echo 'Exception: ' . $e->getMessage();
    }
    ```
  </Tab>
</Tabs>

<Info>
  We provide official SDKs for Python, Node.js, PHP, Ruby, Java, TypeScript, Go, and C#. See [supported programming languages](/docs/api-clients) for installation instructions.
</Info>

## Responses

### Response format

Responses are returned as JSON objects. Some operations return empty responses with HTTP status codes (e.g., `204 No Content` for successful deletions).

### Success response

Successful requests return data specific to the endpoint:

```json
{
  "id": 123,
  "email": "contact@example.com",
  "attributes": {
    "FIRSTNAME": "John",
    "LASTNAME": "Doe"
  }
}
```

### Error response

Errors include a `code` and `message`:

```json
{
  "code": "invalid_parameter",
  "message": "Invalid email address"
}
```

## HTTP status codes

| Code | Status             | Description                                              |
| :--- | :----------------- | :------------------------------------------------------- |
| 200  | OK                 | Request succeeded                                        |
| 201  | Created            | Resource created successfully                            |
| 202  | Accepted           | Request accepted for processing                          |
| 204  | No Content         | Resource updated or deleted successfully                 |
| 400  | Bad Request        | Invalid request. Check error details in response body    |
| 401  | Unauthorized       | Invalid or missing API key                               |
| 402  | Payment Required   | Account requires activation or additional credits        |
| 403  | Forbidden          | Insufficient permissions for this resource               |
| 404  | Not Found          | Endpoint or resource does not exist                      |
| 405  | Method Not Allowed | HTTP method not supported for this endpoint              |
| 406  | Not Acceptable     | Content-Type must be `application/json`                  |
| 429  | Too Many Requests  | Rate limit exceeded. See [rate limits](/docs/api-limits) |

## Error codes

Error responses include specific codes in the JSON body:

| Code                       | Description                                       |
| :------------------------- | :------------------------------------------------ |
| `invalid_parameter`        | Parameter value is invalid. Check format and type |
| `missing_parameter`        | Required parameter is missing                     |
| `out_of_range`             | Parameter value outside allowed range             |
| `unauthorized`             | Authentication failed or insufficient permissions |
| `document_not_found`       | Resource specified in path does not exist         |
| `method_not_allowed`       | HTTP method not allowed for this endpoint         |
| `not_enough_credits`       | Insufficient credits to complete the request      |
| `duplicate_parameter`      | Parameter value already exists                    |
| `duplicate_request`        | Identical request submitted too frequently        |
| `account_under_validation` | Account is pending validation                     |
| `permission_denied`        | Account lacks permission for this operation       |

## Pagination

Endpoints that return lists support pagination using query parameters:

| Parameter | Type    | Description                                                       |
| :-------- | :------ | :---------------------------------------------------------------- |
| `limit`   | integer | Number of results per page. Default and maximum vary by endpoint  |
| `offset`  | integer | Starting index (0-based). For page 2 with limit 50, use offset=50 |

```bash
curl -X GET "https://api.brevo.com/v3/contacts?limit=50&offset=0" \
     -H "api-key: YOUR_API_KEY" \
     -H "content-type: application/json"
```

## Rate limiting

Rate limits prevent API abuse and ensure service stability. Limits vary by endpoint and account tier.

<Info>
  See [rate limits documentation](/docs/api-limits) for specific limits per endpoint and information about enterprise tiers.
</Info>

When rate limits are exceeded, you receive a `429 Too Many Requests` response with headers indicating:

* `x-sib-ratelimit-limit` - Maximum requests allowed
* `x-sib-ratelimit-remaining` - Requests remaining in current window
* `x-sib-ratelimit-reset` - Time until limit resets

## IP addresses

Some integrations require whitelisting Brevo IP addresses for security or firewall configuration.

<Info>
  View the complete list of Brevo IP ranges in our [help center](https://help.brevo.com/hc/en-us/articles/208848409).
</Info>

<Warning>
  Many Brevo services use Cloudflare's proxy. Whitelist [Cloudflare IP ranges](https://www.cloudflare.com/en-gb/ips/) in addition to Brevo IPs.
</Warning>


***

title: Postman workspace
subtitle: Test and explore the Brevo API using our Postman collection
slug: docs/postman
------------------

## Overview

Use our Postman workspace to test API endpoints, explore collections, and integrate with your development workflow. The workspace includes pre-configured environments and all available endpoints.

<Button class="postman-button" icon="fa-sharp fa-solid fa-play" href="https://app.getpostman.com/run-collection/10612044-0ce69d14-155a-453e-b4b9-c62fe5276e04?action=collection%2Ffork&collection-url=entityId%3D10612044-0ce69d14-155a-453e-b4b9-c62fe5276e04%26entityType%3Dcollection%26workspaceId%3D376e9a53-de82-4569-9847-e2228c21d9be#?env%5BSendinblue%20API%20v3%5D=W3sia2V5IjoiYmFzZVVybCIsInZhbHVlIjoiaHR0cHM6Ly9hcGkuc2VuZGluYmx1ZS5jb20vdjNcbiIsImVuYWJsZWQiOnRydWUsInR5cGUiOiJkZWZhdWx0Iiwic2Vzc2lvblZhbHVlIjoiaHR0cHM6Ly9hcGkuc2VuZGluYmx1ZS5jb20vdjNcbiIsInNlc3Npb25JbmRleCI6MH0seyJrZXkiOiJhcGkta2V5IiwidmFsdWUiOiIiLCJlbmFibGVkIjp0cnVlLCJ0eXBlIjoic2VjcmV0Iiwic2Vzc2lvblZhbHVlIjoiIiwic2Vzc2lvbkluZGV4IjoxfSx7ImtleSI6Im1hLWtleSIsInZhbHVlIjoiIiwiZW5hYmxlZCI6dHJ1ZSwidHlwZSI6InNlY3JldCIsInNlc3Npb25WYWx1ZSI6IiIsInNlc3Npb25JbmRleCI6Mn1d">
  Run in Postman
</Button>

## Get started

### Fork the workspace

Click the button above to open the Postman workspace. Fork it to your team space to make it visible to you and your organization members.

<Frame background="subtle">
  ![Exploring the collections](file:77a7a12e-0938-4ccf-81e6-0d24ff78e590)
</Frame>

Browse available endpoints in the left panel and view documentation in the middle panel.

### Configure your environment

The workspace includes a default environment with pre-configured variables. Set the `{{api-key}}` variable before making requests.

<Steps>
  ### Get your API key

  Retrieve your API key from your [Brevo account settings](https://app.brevo.com/settings/keys/api). See the [API key authentication guide](/docs/api-key-authentication) for instructions.

  ### Set the environment variable

  Add your API key to the `{{api-key}}` variable in your Postman environment.

  <Frame background="subtle">
    ![Setting up your environment](file:d71a1467-2a78-4135-b6c1-81d088046419)
  </Frame>
</Steps>

<Info>
  Import the default environment directly by [using this link](https://www.postman.com/sib-apiv3/workspace/sendinblue/environment/10612044-8527d035-9554-42c0-9397-deaa65c07d91).
</Info>

## Test your first request

After configuring your environment, all endpoints inherit the `{{api-key}}` variable. Test your setup by fetching your account details:

<Steps>
  ### Select the endpoint

  Choose **GET /account** from the endpoint list.

  ### Send the request

  Click **Send** to execute the request.

  ### Review the response

  The response displays your account information as JSON, confirming your API key is valid.

  <Frame background="subtle">
    ![Fetching data](file:effc491f-3331-4727-bdbf-ea3957e17295)
  </Frame>
</Steps>

## Best practices

* **Keep collections updated**: Sync your forked collection regularly to receive the latest endpoint updates
* **Contribute improvements**: Submit pull requests for collection enhancements. We review and merge contributions
* **Use environment variables**: Store sensitive values like API keys in environment variables, not in requests


***

title: Authentication schemes
subtitle: Choose between API key and OAuth 2.0 authentication for the Brevo API
slug: docs/authentication-schemes
---------------------------------

<CardGroup>
  <Card title="API Key" icon="fa-duotone fa-key" href="/docs/api-key-authentication">
    Use a secret token for direct API access.<br /><br />
    **When to use?**<br />
    Use for direct integrations and server-to-server communication where you control both endpoints.
  </Card>

  <Card title="OAuth 2.0" icon="fa-duotone fa-user-lock" href="/docs/integrating-oauth-20-to-your-solution">
    Use in private integrations that require delegated access.<br /><br />
    **When to use?**<br />
    Use for private integrations within an organization that require user-specific permissions.
  </Card>
</CardGroup>

## API key authentication

Use API key authentication for direct API access. Include your API key in the `api-key` header for each request.

**Best for:**

* Direct API integrations
* Server-to-server communication
* Testing and development

See [API Key authentication](/docs/api-key-authentication) for setup instructions.

## OAuth 2.0 authentication

Use OAuth 2.0 for private integrations within an organization that require user consent and delegated access. OAuth combines authentication and authorization in a single flow.

**Best for:**

* Private integrations within an organization
* Internal applications requiring user-specific permissions
* Non-public distributable applications

<Warning>
  OAuth is currently only available for private integrations inside an organization. OAuth integrations are not intended for public distribution or listing in marketplaces.
</Warning>

OAuth provides a token-based authentication system. The authentication server issues a token with a defined validity period that grants access to specific features based on user permissions.

See [OAuth authentication](/docs/integrating-oauth-20-to-your-solution) for implementation detailss.


***

title: API key authentication
subtitle: Generate and use an API key to authenticate your Brevo API requests
slug: docs/api-key-authentication
---------------------------------

API keys authenticate your requests to the Brevo API. Generate an API key from your account settings and include it in the `api-key` header for each request.

## Requirements

You need a Brevo account. [Sign up](https://onboarding.brevo.com/account/register) if you don't have one yet.

## Generate an API key

<Steps>
  ### Access account settings

  Log in to your Brevo account and access the [STMP & API settings page.](https://app.brevo.com/settings/keys/api)

  ### Generate new API key

  Under the **API keys** tab, click **Generate a new API key**.

  <Frame background="subtle">
    ![SMTP & API settings](file:5fff5dfd-4af6-4e80-89b5-fe143549155e)
  </Frame>

  ### Name your API key

  Enter a descriptive name for your API key (e.g., "Production API", "Development API").

  <Frame background="subtle">
    ![Name API key](file:f1a6a315-36cd-460b-89f9-0e417fe32103)
  </Frame>

  ### Generate the key

  Click **Generate**. The API key is displayed once.

  <Frame background="subtle">
    ![API key generated](file:e4edca78-4fac-4ded-bbe2-423d19d23840)
  </Frame>

  ### Copy and save your API key

  Copy the API key immediately and store it securely. You won't be able to view it again after closing the dialog.

  <Warning>
    Store your API key securely. If you lose it, you'll need to generate a new one. Treat API keys like passwords—never commit them to version control or share them publicly.
  </Warning>

  ### Whitelist your IP address (optional)

  To use your API key in the developer portal playground, whitelist your current IP address. See [IP security](/docs/ip-security) for instructions.

  <Button intent="primary" href="https://app.brevo.com/security/authorised_ips">
    Whitelist your IP address
  </Button>
</Steps>

## Use your API key

Include your API key in the `api-key` header for all API requests. This endpoint validates your API key and returns your account details

Your API key identifies your account and authorizes API access. Include it in every request to authenticate your calls.

<EndpointRequestSnippet endpoint="GET /account" />

<RunnableEndpoint endpoint="GET /account" />

<Button outlined href="/reference/get-account?explorer=true">
   Try your API key
</Button>


***

title: OAuth 2.0
subtitle: Integrate OAuth 2.0 authentication for private organizational integrations
slug: docs/integrating-oauth-20-to-your-solution
------------------------------------------------

OAuth 2.0 provides token-based authentication for private integrations that require user consent and delegated access. Use OAuth for internal applications within an organization that need user-specific permissions.

<Warning>
  OAuth is currently only available for private integrations inside an organization. That is: non-public distributable apps. OAuth integrations are not yet intended for public distribution or listing in marketplaces.
</Warning>

<Note>
  For implementation details, see the [step-by-step guide](/docs/integration-part) on bringing OAuth into your application.
</Note>

## Prerequisites

Understand OAuth 2.0 basics, including:

* Authorization server
* Client application
* Resource owner
* Access token

## Register your application

Register your application to receive OAuth credentials. Submit your project details using the application form. After approval, you'll receive credentials and additional information needed to implement OAuth 2.0.

<br />

<br />

<Button intent="primary" href="https://556fefad.sibforms.com/serve/MUIFACi_KJjE8tCFqKp_5eXYRhFQsB2ERnIokk0VpDFcvtjAmJL7q8JmCCWIQ0qqH_zXf-EXH19sJDt-s_r25T1rytlfOD51ZgkBy4iM-w3gtNW9FGRRrpgx0W__KbdYEOMwVKdZLnuUiQCLlwwG_abPWseQoossf5WbzXGVUUjAtPzN6CyP96_XGA136gVdaLEUjTOs5zsfQYp3">
   Submit your app 
</Button>

## OAuth 2.0 flow

Brevo uses the [OAuth 2.0 authorization code grant flow](https://datatracker.ietf.org/doc/html/rfc6749#section-4.1) to create access tokens on behalf of users. The flow authorizes applications to access and manipulate user data, such as sending emails or updating contacts.

<Frame background="subtle">
  ![OAuth grant flow for Brevo apps](file:c71147a8-de39-4d65-9e84-16415c21e1e0)
</Frame>

### Flow steps

1. User accesses your private integration application
2. Your app loads the Brevo authentication popup window
3. User authenticates with Brevo credentials (email/password, Google, or Apple)
4. Your app requests an access token from the Brevo Auth Server
5. The Brevo Auth Server validates the request and returns OAuth tokens:
   * **Access token**: Bearer token included in the `Authorization` header for subsequent API requests
   * **Refresh token**: Used to obtain a new access token when the current one expires
6. Your app stores the credentials and proceeds to make API calls
7. For each API request, the Brevo Auth Server validates the bearer token and returns the requested data


***

title: OAuth 2.0 integration guide
subtitle: Implement OAuth 2.0 authentication in your Node.js application
slug: docs/integration-part
---------------------------

This guide demonstrates how to implement OAuth 2.0 authentication in a Node.js application. Before starting, familiarize yourself with the [OAuth 2.0 flow](/docs/integrating-oauth-20-to-your-solution) used at Brevo.

## OAuth credentials

After your application is approved, you'll receive the following credentials:

| Item            | Description                                                                                                          | Example                                                                                                          |
| --------------- | -------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| `client_id`     | Unique identifier for your OAuth application                                                                         | `my-new-app`                                                                                                     |
| `client_secret` | Secret token used to authenticate your application with the Brevo auth server                                        | `3czT4bbqfmwN452B2VrqzO2iwTlJ452c`                                                                               |
| `code`          | Authorization code returned by the Brevo auth server after user authentication. JWT-based token with a 10-minute TTL | `ab5a58c3-8ade-49ff-8f3c-e068548a478c.47a7dcff-3b84-43f4-8b32-99a9417896ba.5896f387-e86d-455d-a918-2fb8e8907936` |

<Warning>
  Never hardcode credentials in client-facing code. Store them securely on the server side to prevent unauthorized access.
</Warning>

## Create a redirect callback service

Create an Express service that handles callbacks from the Brevo auth server. This service must match the callback URL you specified in your application form.

```javascript
const express = require('express');
const app = express();
const port = 3000;

app.get('/redirect', (req, res) => {
  // Log the authorization code from the Brevo auth server
  console.log(JSON.stringify(req.query.code));
  
  // Return all parameters from the callback
  res.json(JSON.stringify(req.query));
});

app.listen(port, () => {
  console.log(`Server is running at http://localhost:${port}`);
});
```

## Define your login URL

Construct the authorization URL that redirects users to Brevo's authentication page. Replace the following parameters:

* `client_id`: Your OAuth application identifier
* `redirect_uri`: Your callback URL that handles the redirect from the Brevo auth server

```text wordWrap
https://auth.brevo.com/realms/apiv3/protocol/openid-connect/auth?response_type=code&client_id={{YOUR_CLIENT_ID}}&redirect_uri={{YOUR_CALLBACK_URL}}&scope=openid
```

The URL is automatically encoded to protect your variables. After encoding, it may look like this:

```text wordWrap
https://auth.brevo.com/realms/apiv3/login-actions/authenticate?execution=8801c140-bd81-4f06-3251-8a5c0f54e7f9&client_id={{YOUR_CLIENT_ID}}&tab_id=e0h0VvmWuJM
```

<Frame background="subtle">
  ![](https://files.readme.io/ef102da-image.png)
</Frame>

## Handle user authentication and callback

After a user successfully authenticates with Brevo, the auth server redirects to your `redirect_uri` with the authorization code and additional parameters.

<Frame background="subtle">
  ![Image](file:fa748116-aa3d-43ed-b078-a657c11d5a60)
</Frame>

In your Express app running at `http://localhost:3000`, check the console for the `code` value.

<Note>
  The authorization `code` has a default TTL of 10 minutes. Exchange it for an access token before it expires.
</Note>

<Frame background="subtle">
  ![](https://files.readme.io/5f763e4-image.png)
</Frame>

## Exchange code for access token

After receiving the authorization `code`, exchange it for an access token by calling the token endpoint. Use your `client_id`, `client_secret`, and the `code` from the callback.

```bash
curl --location 'https://api.brevo.com/v3/token' \
  --header 'Content-Type: application/x-www-form-urlencoded' \
  --data-urlencode 'grant_type=authorization_code' \
  --data-urlencode 'client_id={{YOUR_CLIENT_ID}}' \
  --data-urlencode 'client_secret={{YOUR_CLIENT_SECRET}}' \
  --data-urlencode 'code={{YOUR_CODE}}' \
  --data-urlencode 'redirect_uri=http://localhost:3000/redirect'
```

The response contains your OAuth tokens:

```json
{
  "access_token": "eyJhbGciOiJSU426234IsInR5cCIgOiAiSldUIiwia2lkIiA6ICJfb0pRamM0Q1EzaVByUUxTcWk2TEZmNGp6c0ZFdzlkWmhXaVVHMkExYkJnIn0.eyJleHAiOjE3MTk2MDk4MDAsImlhdCI6MTcxOTU2NjYwMCwiYXV0aF90aW1lIjoxNzE5NTY1NTE1LCJqdGkiOiJkY2M3OGRjYy1kYzViLTRlMmMtOWI1MS05NGZiOGZjMjM2YzAiLCJpc3MiOiJodHRwczovL2F1dGguYnJldm8uY29tL3JlYWxtcy9hcGl2MyIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI1ZmM5Y2Y5MS01ODI5LTQyNDctODQwOS1lNjhhYjFmNTQ1MTYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJlbnZveS1hdXRoIiwic2Vzc2lvbl9zdGF0ZSI6IjQ3YTdkY2ZmLTNiODQtNDNmNC04YjMyLTk5YTk0ZDc4OTZiYSIsImFjciI6IjAiLCJhbGxvd2VkLW9yaWdpbnMiOlsiKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1hcGl2MyIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBtZXRhSW5mbyBwcm9maWxlIiwic2lkIjoiNDdhN2RjZmYtM2I4NC00M2Y0LThiMzItOTlhOTRkNzg5NmJhIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiTWF1cmljaW8gTW91cnJhaWxsZSIsInByZWZlcnJlZF91c2VybmFtZSI6Im1hdXJpY2lvQGJyZXZvLmNvbSIsImdpdmVuX25hbWUiOiJNYXVyaWNpbyIsImxvY2FsZSI6ImVuIiwiZmFtaWx5X25hbWUiOiJNb3VycmFpbGxlIiwiZW1haWwiOiJtYXVyaWNpb0BicmV2by5jb20ifQ.pROVoMSOGgbK88lbsHHUP2RtGRFOfmPIWCxI9UhErAm5Juu-PSGNI9sF4c52oPQjF2lx7Y3Nq8gc6jXE94T7WIS3hwRG0-saIJjqqTvYJnZ58PQXvkpRByezE6UPYpLUBdevpxyWSZV05OHGuMH6BYGmSYFoM92N8EtbPPaCzriPIoERhAKenDuO_E-7ZpxJGBwWDGOHkfj9O-fFwp-_ITuuID9bkp4kA7c5ctJ__k_Ll4MxxuoF3LZUyVGVPaXmZFOqTASQVzoV6nBm4vZNSA4qyqNno6DXAe1NpIHtcmPjPkk4LQgr38L7glXJtd47bZkdBqj0JGCUYuz2u01jLA",
  "expires_in": 43200,
  "refresh_expires_in": 31534915,
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJiY2E0ODRjYS01ZTFmLTRiZDctYjM4NC1hNjA1YjhlZjAzZWYifQ.eyJleHAiOjE3NTExMDE1MTUsImlhdCI6MTcxOTU2NjYwMCwianRpIjoiZmM3Njg2NzMtODU3OC00MmE1LWJhZjMtY2UwZWJjNzVmOTcyIiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJyZXZvLmNvbS9yZWFsbXMvYXBpdjMiLCJhdWQiOiJodHRwczovL2F1dGguYnJldm8uY29tL3JlYWxtcy9hcGl2MyIsInN1YiI6IjVmYzljZjkxLTU4MjktNDI0Ny04NDA5LWU2OGFiMWY1NDUxNiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJlbnZveS1hdXRoIiwic2Vzc2lvbl9zdGF0ZSI6IjQ3YTdkY2ZmLTNiODQtNDNmNC04YjMyLTk5YTk0ZDc4OTZiYSIsInNjb3BlIjoib3BlbmlkIGVtYWlsIG1ldGFJbmZvIHByb2ZpbGUiLCJzaWQiOiI0N2E3ZGNmZi0zYjg0LTQzZjQtOGIzMi05OWE5NGQ3ODk2YmEifQ.mQLS52E_bYiYLBkYtQWPeGEUaCa8efJJD-wXUAya4rY",
  "token_type": "Bearer",
  "id_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJfb0pRamM0Q1EzaVByUUxTcWk2TEZmNGp6c0ZFdzlkWmhXaVVHMkExYkJnIn0.eyJleHAiOjE3MTk2MDk4MDAsImlhdCI6MTcxOTU2NjYwMCwiYXV0aF90aW1lIjoxNzE5NTY1NTE1LCJqdGkiOiIzZDA0ZTg4MS1iMmJkLTQxZWItOTc4Ni1lNWQ4OTAxZTdlNTUiLCJpc3MiOiJodHRwczovL2F1dGguYnJldm8uY29tL3JlYWxtcy9hcGl2MyIsImF1ZCI6ImVudm95LWF1dGgiLCJzdWIiOiI1ZmM5Y2Y5MS01ODI5LTQyNDctODQwOS1lNjhhYjFmNTQ1MTYiLCJ0eXAiOiJJRCIsImF6cCI6ImVudm95LWF1dGgiLCJzZXNzaW9uX3N0YXRlIjoiNDdhN2RjZmYtM2I4NC00M2Y0LThiMzItOTlhOTRkNzg5NmJhIiwiYXRfaGFzaCI6IndtVnl2UVdGN1Z5Q3pGZW9DZEU3SHciLCJhY3IiOiIwIiwic2lkIjoiNDdhN2RjZmYtM2I4NC00M2Y0LThiMzItOTlhOTRkNzg5NmJhIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoiTWF1cmljaW8gTW91cnJhaWxsZSIsInByZWZlcnJlZF91c2VybmFtZSI6Im1hdXJpY2lvQGJyZXZvLmNvbSIsImdpdmVuX25hbWUiOiJNYXVyaWNpbyIsImxvY2FsZSI6ImVuIiwiZmFtaWx5X25hbWUiOiJNb3VycmFpbGxlIiwiZW1haWwiOiJtYXVyaWNpb0BicmV2by5jb20ifQ.b44PTMX6BMgTOI5_JyMs-zI3dhnrbJLpHeadta-OdsBGSOA8h4PGRuHLTvqsBEgXcW2OeyDpnpDcYK8GrNxiKP2fEbHaB1bRTNw4s2J_Qsicf27rj3WXQwD0WF1VrKiAIH3It9uuUpRifSlAwkmf-qwoWmHGNnCEGK7leYqALAhVHrvowolP-KG58W4LhqLSrIDsMYR8I25Oy3B8im_IgQv2_xxmsz-ZauiDUzyrpUQWiVbqzK_aENCSQD940CJzS52-W-4ukwguhev7ZnUFPKxVgWjV-I__a10bqX48IXMYN-5MzKwo4rlrqDTCVc6jOjXAY84EOOPd6jCmH9hbRQ",
  "session_state": "47a7dcff-3b84-43f4-8b32-99a94d7896ba",
  "scope": "openid email metaInfo profile"
}
```

## Make API requests with access token

Use the `access_token` in the `Authorization` header for all API requests. Include it as a Bearer token:

```bash
curl --request GET \
  --url https://api.brevo.com/v3/account \
  --header 'accept: application/json' \
  --header 'Authorization: Bearer {{YOUR_ACCESS_TOKEN}}'
```

If the token is valid, the API returns your account details:

```json
{
  "plan": [
    {
      "type": "subscription",
      "credits": 39983,
      "creditsType": "sendLimit",
      "startDate": "2017-03-11",
      "endDate": "2017-04-11"
    }
  ],
  "relay": {
    "enabled": true,
    "data": {
      "userName": "john.smith@example.com",
      "relay": "smtp-relay.domain.com",
      "port": 587
    }
  },
  "marketingAutomation": {
    "key": "kzfr5xxxxxxttuyo1",
    "enabled": true
  },
  "email": "john.smith@example.com",
  "firstName": "John",
  "lastName": "Smith",
  "companyName": "MyShop",
  "address": {
    "city": "New-York",
    "street": "1677B 8th Avenue",
    "zipCode": "7665",
    "country": "USA"
  }
}
```

Use this access token format to authenticate requests to all Brevo API endpoints.


***

title: IP security & authorization
subtitle: Restrict API access to authorized IP addresses
slug: docs/ip-security
----------------------

IP security restricts API access to specific IP addresses. Only requests from whitelisted IPs are authorized, blocking unauthorized access to your account.

## How IP security works

When enabled, Brevo validates the source IP address of each API request. Requests from unauthorized IPs are blocked, preventing access even if the API key is valid.

## Configure authorized IPs

<Steps>
  ### Open security settings

  Click your name in the top-right corner, then select **Security** from the menu.

  ### Navigate to Authorized IPs

  Go to the **Authorized IPs** section in the Security menu.

  <Frame background="subtle">
    ![Security settings](file:ebf7d692-142a-4451-bc72-4a84ef8b043e)
  </Frame>

  ### Choose authorization method

  Select one of two authorization methods:

  **Automatic authorization**

  * Brevo automatically reviews IP addresses from API calls
  * IPs are authorized after security checks pass
  * No manual intervention required

  **Email notifications**

  * Brevo sends email notifications for unknown IP addresses
  * You manually authorize IPs from the notification email
  * Requires manual approval for each new IP

  ### Add IP addresses manually

  Manually add specific IP addresses or IP ranges in the **Authorized IPs** tab. Enter IP addresses one per line or use CIDR notation for ranges.

  <Frame background="subtle">
    ![Authorized IPs](file:10acea77-33ce-4edb-ad17-2db1583954df)
  </Frame>
</Steps>

## Block unknown IPs

Enable "Block unknown IP addresses" to automatically reject requests from IPs not in your authorized list. This provides maximum security by blocking all unauthorized access attempts.

<Warning>
  When "Block unknown IP addresses" is enabled, API requests from non-whitelisted IPs are immediately rejected. Ensure your server IPs are added to the authorized list before enabling this feature.
</Warning>

<Tip>
  Use IP security to restrict API access to known servers and environments. This adds an extra layer of protection beyond API key authentication.
</Tip>


***

title: Rate limits
subtitle: Understand API rate limits and how to handle rate limit responses
slug: docs/api-limits
---------------------

## Overview

The Brevo API enforces rate limits to ensure platform stability and fair resource allocation. Rate limits restrict the number of API requests you can make within a specific time period.

The API provides three rate limit tiers:

* [**General rate limits**](#general-rate-limits): Standard limits for most use cases. Available to all account types (Free, Starter, Standard, Professional, and Enterprise)
* [**Advanced rate limits**](#advanced-rate-limits): Higher limits for advanced use cases. Available to Professional and Enterprise accounts
* [**Extended rate limits**](#extended-rate-limits): Maximum limits for high-throughput integrations. Available to Enterprise accounts

When you exceed a rate limit, the API returns a `429 Too Many Requests` status code. Monitor rate limit headers in responses to track your usage and prevent errors.

<Note>
  **Rate limits are expressed in two units**

  * **RPS (Requests per second)**: Maximum number of requests allowed per second
  * **RPH (Requests per hour)**: Maximum number of requests allowed per hour

  Some endpoints have both RPS and RPH limits. When both are specified, you must respect both limits simultaneously.
</Note>

## General rate limits

<PlanAvailability
  supportedPlans={{
    free: true,
    starter: true,
    standard: true,
    professional: true,
    enterprise: true
  }}
/>

<br />

| Endpoint                                                            | Rate limit    | Requests per second |
| ------------------------------------------------------------------- | ------------- | ------------------- |
| `POST /v3/smtp/email`<br />`GET /v3/smtp/blockedContacts`           | 3,600,000 RPH | 1,000 RPS           |
| `GET /v3/smtp/emails`                                               | 7,200 RPH     | 2 RPS               |
| `POST /v3/transactionalSMS/sms`                                     | 540,000 RPH   | 150 RPS             |
| `POST /v3/events`                                                   | 36,000 RPH    | 10 RPS              |
| `POST /v3/orders/status`                                            | 18,000 RPH    | 5 RPS               |
| `POST /v3/products`                                                 | 7,200 RPH     | 2 RPS               |
| All endpoints under `/v3/smtp/{…}`\*                                | 300 RPH       | -                   |
| All endpoints under `/v3/contacts/{…}`                              | 36,000 RPH    | 10 RPS              |
| `GET /v3/loyalty/config`<br />All endpoints under `/v3/loyalty/{…}` | 600 RPH       | -                   |
| All other endpoints                                                 | 100 RPH       | -                   |

<Tip>
  *Excludes 

  `POST /v3/smtp/email`

   and 

  `GET /v3/smtp/blockedContacts`

  , which have dedicated limits.
</Tip>

## Advanced rate limits

<PlanAvailability
  supportedPlans={{
    free: false,
    starter: false,
    standard: false,
    professional: true,
    enterprise: true
  }}
/>

<br />

| Endpoint                                                            | Rate limit    | Requests per second |
| ------------------------------------------------------------------- | ------------- | ------------------- |
| `POST /v3/smtp/email`<br />`GET /v3/smtp/blockedContacts`           | 7,200,000 RPH | 2,000 RPS           |
| `GET /v3/smtp/emails`                                               | 10,800 RPH    | 3 RPS               |
| `POST /v3/transactionalSMS/sms`                                     | 720,000 RPH   | 200 RPS             |
| `POST /v3/events`                                                   | 72,000 RPH    | 20 RPS              |
| `POST /v3/orders/status`                                            | 36,000 RPH    | 10 RPS              |
| `POST /v3/products`                                                 | 14,400 RPH    | 4 RPS               |
| All endpoints under `/v3/smtp/{…}`\*                                | 600 RPH       | -                   |
| All endpoints under `/v3/contacts/{…}`                              | 72,000 RPH    | 20 RPS              |
| `GET /v3/loyalty/config`<br />All endpoints under `/v3/loyalty/{…}` | 1,200 RPH     | -                   |
| All other endpoints                                                 | 200 RPH       | -                   |

<Tip>
  *Excludes 

  `POST /v3/smtp/email`

   and 

  `GET /v3/smtp/blockedContacts`

  , which have dedicated limits.
</Tip>

## Extended rate limits

<PlanAvailability
  supportedPlans={{
    free: false,
    starter: false,
    standard: false,
    professional: false,
    enterprise: true
  }}
/>

| Route                                                               | Policy     |
| ------------------------------------------------------------------- | ---------- |
| `POST /v3/smtp/email`<br />`GET /v3/smtp/blockedContacts`           | 6,000 RPS  |
| `GET /v3/smtp/emails`                                               | 18,000 RPH |
| `POST /v3/transactionalSMS/sms`                                     | 250 RPS    |
| `POST /v3/orders/status`                                            | 15 RPS     |
| `POST /v3/products`                                                 | 21,600 RPH |
| All endpoints under `/v3/smtp/{…}`\*                                | 1,800 RPH  |
| All endpoints under `/v3/contacts/{…}`                              | 60 RPS     |
| `GET /v3/loyalty/config`<br />All endpoints under `/v3/loyalty/{…}` | 3,600 RPH  |
| `POST /v3/events`                                                   | 60 RPS     |
| All other endpoints                                                 | 600 RPH    |

<Tip>
  *Excludes 

  `POST /v3/smtp/email`

   and 

  `GET /v3/smtp/blockedContacts`

  , which have dedicated limits.
</Tip>

## Handling rate limit errors

When you exceed a rate limit, the API returns a `429 Too Many Requests` status code. Follow these practices to avoid rate limit errors:

### Distribute requests evenly

Calculate your rate limit allowance and distribute requests evenly across the time window. For example, with a limit of 1,000 RPS, you can send up to 60,000 requests per minute if distributed evenly.

### Upgrade to Enterprise

If your application requires higher throughput, upgrade to an Enterprise plan for increased rate limits.

### Use webhooks for statistics

Instead of polling endpoints for statistics, implement [webhooks](/docs/how-to-use-webhooks) to receive event-driven updates. This reduces API calls and improves efficiency.

## Related resources

### Rate limit headers

The API includes rate limit headers in all responses to help you monitor usage and implement retry logic. Learn how to read and use these headers in the [rate limit headers guide](/docs/limit-headers).

### Platform quotas

Rate limits control request frequency, while platform quotas limit the maximum number of objects you can create (campaigns, contacts, lists, etc.). See the [platform quotas guide](/docs/platform-quotas) for information on maximum limits for object creation in Brevo.


***

title: Rate limit headers
subtitle: >-
Understand and use rate limit response headers to manage API request
throttling
slug: docs/limit-headers
------------------------

## Overview

When you exceed a rate limit, the Brevo API returns a `429 Too Many Requests` status code along with response headers that provide information about the current rate limit status. These headers help you monitor your API usage and implement proper retry logic.

Use rate limit headers to:

* Track remaining request capacity
* Determine when rate limits reset
* Implement exponential backoff strategies
* Prevent unnecessary API calls

## Rate limit headers

All rate-limited endpoints include the following headers in their responses:

| Header                      | Description                                                                                        |
| --------------------------- | -------------------------------------------------------------------------------------------------- |
| `x-sib-ratelimit-limit`     | Maximum number of requests allowed in the current time window before receiving a `429` status code |
| `x-sib-ratelimit-remaining` | Number of requests remaining in the current time window                                            |
| `x-sib-ratelimit-reset`     | Time remaining until the rate limit resets, expressed in the granularity unit (typically seconds)  |

<Frame background="subtle">
  ![Rate limit headers example](file:5ccc2847-dda8-4618-bf51-b12b719d647c)
</Frame>

## Reading rate limit headers

### Limit header

The `x-sib-ratelimit-limit` header indicates the maximum number of requests you can make in the current time window. This value depends on your account plan and the specific endpoint.

Example:

```
x-sib-ratelimit-limit: 1000
```

This means you can make up to 1,000 requests in the current time window.

### Remaining header

The `x-sib-ratelimit-remaining` header shows how many requests you have left before hitting the rate limit. Monitor this value to avoid `429` errors.

Example:

```
x-sib-ratelimit-remaining: 750
```

This indicates 750 requests remain in the current time window.

### Reset header

The `x-sib-ratelimit-reset` header specifies when the rate limit counter resets. The value is expressed in the same granularity unit as the rate limit (typically seconds).

Example:

```
x-sib-ratelimit-reset: 45
```

This means the rate limit resets in 45 seconds.

## Implementing retry logic

Use rate limit headers to implement intelligent retry mechanisms:

### Check remaining capacity

Before making requests, check the `x-sib-ratelimit-remaining` header to ensure you have capacity:

<Tabs>
  <Tab title="Node.js">
    ```javascript
    const response = await fetch('https://api.brevo.com/v3/account', {
      headers: { 'api-key': 'YOUR_API_KEY' }
    });
    const remaining = parseInt(response.headers.get('x-sib-ratelimit-remaining') || '0', 10);

    if (remaining < 10) {
      // Wait before making more requests
      await new Promise(resolve => setTimeout(resolve, 60000));
    }
    ```
  </Tab>

  <Tab title="PHP">
    ```php
    $remaining = 0;
    $ch = curl_init('https://api.brevo.com/v3/account');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['api-key: YOUR_API_KEY']);
    curl_setopt($ch, CURLOPT_HEADERFUNCTION, function($curl, $header) use (&$remaining) {
        if (preg_match('/^x-sib-ratelimit-remaining:\s*(.+)$/i', $header, $matches)) {
            $remaining = (int) $matches[1];
        }
        return strlen($header);
    });

    curl_exec($ch);
    curl_close($ch);

    if ($remaining < 10) {
        // Wait before making more requests
        sleep(60);
    }
    ```
  </Tab>

  <Tab title="Python">
    ```python
    import requests
    import time

    response = requests.get('https://api.brevo.com/v3/account', headers={'api-key': 'YOUR_API_KEY'})
    remaining = int(response.headers.get('x-sib-ratelimit-remaining', 0))

    if remaining < 10:
        # Wait before making more requests
        time.sleep(60)
    ```
  </Tab>
</Tabs>

### Handle 429 responses

When you receive a `429` response, read the reset header to determine how long to wait:

<Tabs>
  <Tab title="Node.js">
    ```javascript
    if (response.status === 429) {
      const resetTime = parseInt(response.headers.get('x-sib-ratelimit-reset') || '60', 10);
      await new Promise(resolve => setTimeout(resolve, resetTime * 1000));
      // Retry the request
    }
    ```
  </Tab>

  <Tab title="PHP">
    ```php
    if ($httpCode === 429) {
        $resetTime = 60;
        if (isset($responseHeaders['x-sib-ratelimit-reset'])) {
            $resetTime = (int) $responseHeaders['x-sib-ratelimit-reset'];
        }
        sleep($resetTime);
        // Retry the request
    }
    ```
  </Tab>

  <Tab title="Python">
    ```python
    if response.status_code == 429:
        reset_time = int(response.headers.get('x-sib-ratelimit-reset', 60))
        time.sleep(reset_time)
        # Retry the request
    ```
  </Tab>
</Tabs>

### Exponential backoff

Combine rate limit headers with exponential backoff for robust error handling:

<Tabs>
  <Tab title="Node.js">
    ```javascript
    async function makeRequestWithBackoff(url, headers, maxRetries = 3) {
      for (let attempt = 0; attempt < maxRetries; attempt++) {
        const response = await fetch(url, { headers });
        
        if (response.status === 429) {
          const resetTime = parseInt(response.headers.get('x-sib-ratelimit-reset') || '60', 10);
          const waitTime = (resetTime + Math.pow(2, attempt) + Math.random()) * 1000;
          await new Promise(resolve => setTimeout(resolve, waitTime));
          continue;
        }
        
        return response;
      }
      
      throw new Error('Max retries exceeded');
    }
    ```
  </Tab>

  <Tab title="PHP">
    ```php
    function makeRequestWithBackoff($url, $headers, $maxRetries = 3) {
        for ($attempt = 0; $attempt < $maxRetries; $attempt++) {
            $responseHeaders = [];
            $ch = curl_init($url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
            curl_setopt($ch, CURLOPT_HEADERFUNCTION, function($curl, $header) use (&$responseHeaders) {
                $len = strlen($header);
                $header = explode(':', $header, 2);
                if (count($header) === 2) {
                    $responseHeaders[strtolower(trim($header[0]))] = trim($header[1]);
                }
                return $len;
            });
            
            $response = curl_exec($ch);
            $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
            curl_close($ch);
            
            if ($httpCode === 429) {
                $resetTime = isset($responseHeaders['x-sib-ratelimit-reset']) 
                    ? (int) $responseHeaders['x-sib-ratelimit-reset'] 
                    : 60;
                $waitTime = $resetTime + pow(2, $attempt) + mt_rand(0, 1000) / 1000;
                sleep((int) $waitTime);
                continue;
            }
            
            return $response;
        }
        
        throw new Exception('Max retries exceeded');
    }
    ```
  </Tab>

  <Tab title="Python">
    ```python
    import time
    import random

    def make_request_with_backoff(url, headers, max_retries=3):
        for attempt in range(max_retries):
            response = requests.get(url, headers=headers)
            
            if response.status_code == 429:
                reset_time = int(response.headers.get('x-sib-ratelimit-reset', 60))
                wait_time = reset_time + (2 ** attempt) + random.uniform(0, 1)
                time.sleep(wait_time)
                continue
            
            return response
        
        raise Exception("Max retries exceeded")
    ```
  </Tab>
</Tabs>

## Best practices

### Monitor headers proactively

Check `x-sib-ratelimit-remaining` before making bulk requests to avoid hitting limits:

<Tabs>
  <Tab title="Node.js">
    ```javascript
    const remaining = parseInt(response.headers.get('x-sib-ratelimit-remaining') || '0', 10);
    if (remaining < batchSize) {
      // Delay or split the batch
    }
    ```
  </Tab>

  <Tab title="PHP">
    ```php
    $remaining = isset($responseHeaders['x-sib-ratelimit-remaining']) 
        ? (int) $responseHeaders['x-sib-ratelimit-remaining'] 
        : 0;

    if ($remaining < $batchSize) {
        // Delay or split the batch
    }
    ```
  </Tab>

  <Tab title="Python">
    ```python
    remaining = int(response.headers.get('x-sib-ratelimit-remaining', 0))
    if remaining < batch_size:
        # Delay or split the batch
        pass
    ```
  </Tab>
</Tabs>

### Cache header values

Rate limit headers are consistent for the same endpoint and account. Cache these values to reduce unnecessary API calls when checking limits.

### Use webhooks for high-volume operations

For high-volume operations like fetching statistics, use [webhooks](/docs/how-to-use-webhooks) instead of polling endpoints. This reduces API calls and eliminates rate limit concerns.

<Info>
  Rate limit headers are included in all responses, not just `429` errors. Monitor them proactively to prevent rate limit issues.
</Info>


***

title: Platform quotas
subtitle: Quota limits for account objects and resources
slug: docs/platform-quotas
--------------------------

Quotas limit the number of objects you can create via the API, UI, or other integrations. Each quota applies to a specific resource type, such as campaigns or contacts.

When you reach a quota limit, delete unused objects to create new ones.

## Marketing platform quotas

### Total created email campaigns

Maximum number of email campaigns stored in your account, including drafts.

**Endpoint:** [Create an email campaign](/reference/create-email-campaign)

<EndpointRequestSnippet endpoint="POST /emailCampaigns" />

| General quota          | Enterprise quota       |
| :--------------------- | :--------------------- |
| 10,000 email campaigns | 50,000 email campaigns |

### Total created SMS campaigns

Maximum number of SMS campaigns stored in your account, including drafts.

**Endpoint:** [Create an SMS campaign](/reference/create-sms-campaign)

<EndpointRequestSnippet endpoint="POST /smsCampaigns" />

| General quota     | Enterprise quota  |
| :---------------- | :---------------- |
| 300 SMS campaigns | 600 SMS campaigns |

### Total scheduled email campaigns

Maximum number of scheduled email campaigns that can exist simultaneously in your account.

**Endpoint:** [Create an email campaign](/reference/create-email-campaign)

<EndpointRequestSnippet endpoint="POST /emailCampaigns" />

| General quota           | Enterprise quota        |
| :---------------------- | :---------------------- |
| 150 scheduled campaigns | 300 scheduled campaigns |

### Total amount of media uploaded to content library

Maximum storage capacity (in GB) for media files in the content library.

**Endpoint:** [Upload an image to your account's image gallery](/reference/upload-image-to-gallery)

<EndpointRequestSnippet endpoint="POST /emailCampaigns/images" />

| General quota       | Enterprise quota    |
| :------------------ | :------------------ |
| 2 GB of media files | 5 GB of media files |

### Total active automation workflows

Maximum number of active marketing automation workflows that can run simultaneously in your account.

**Guide:** [Custom Automation workflows](https://help.sendinblue.com/hc/en-us/articles/209505325)

<Note>
  This quota is restricted to one account per company on the Starter Plan. It can be customized on Enterprise plans.
</Note>

| General quota       | Enterprise quota     |
| :------------------ | :------------------- |
| 50 active workflows | 500 active workflows |

## Contact management quotas

### Total stored contacts

Maximum number of contacts stored in your account.

**Endpoint:** [Create a contact](/reference/create-contact)

<EndpointRequestSnippet endpoint="POST /contacts" />

| General quota      | Enterprise quota     |
| :----------------- | :------------------- |
| 5M stored contacts | 900M stored contacts |

### Total created contact attributes

Maximum number of custom attributes that can be created for contacts.

**Endpoint:** [Create a contact attribute](/reference/create-attribute)

<EndpointRequestSnippet endpoint="POST /contacts/attributes/:attributeCategory/:attributeName" />

| General quota          | Enterprise quota       |
| :--------------------- | :--------------------- |
| 200 contact attributes | 200 contact attributes |

### Total created contact lists

Maximum number of contact lists that can be created in your account.

**Endpoint:** [Create a list](/reference/create-list)

<EndpointRequestSnippet endpoint="POST /contacts/lists" />

| General quota     | Enterprise quota  |
| :---------------- | :---------------- |
| 300 created lists | 600 created lists |

### Total created contact folders

Maximum number of contact folders that can be created in your account.

**Endpoint:** [Create a folder](/reference/create-folder)

<EndpointRequestSnippet endpoint="POST /contacts/folders" />

| General quota       | Enterprise quota    |
| :------------------ | :------------------ |
| 300 created folders | 300 created folders |


***

title: SDKs and libraries
subtitle: Official SDKs and client libraries for the Brevo API
slug: docs/api-clients
----------------------

## OpenAPI specification

The Brevo API follows the [OpenAPI v2 Standard](https://www.openapis.org/). Use the specification file to generate API clients for common languages using [Swagger Code Generator](https://github.com/swagger-api/swagger-codegen) or other OpenAPI tools.

```http OpenAPI Specification
https://api.brevo.com/v3/swagger_definition_v3.yml
```

## Official SDKs

<CardGroup cols={2}>
  <Card title={<>Node.js <Badge intent="launch" minimal>New</Badge></>} icon="brands node-js" href="https://github.com/getbrevo/brevo-node/tree/v4">
    Official Node.js SDK for the Brevo API.
  </Card>

  <Card icon="brands php">
    Official PHP SDK for the Brevo API.
  </Card>

  <Card title={<>Python <Badge intent="launch" minimal>New</Badge></>} icon="brands python" href="https://github.com/getbrevo/brevo-python/tree/v4">
    Official Python SDK for the Brevo API.
  </Card>

  <Card title="Java" icon="brands java" href="https://github.com/getbrevo/brevo-java">
    Official Java SDK for the Brevo API.
  </Card>

  <Card title="C#" icon="fa-duotone fa-file-doc" href="https://github.com/getbrevo/brevo-csharp">
    Official C# SDK for the Brevo API.
  </Card>

  <Card title="Go" icon="fa-brands fa-golang" href="https://github.com/getbrevo/brevo-go">
    Official Go SDK for the Brevo API.
  </Card>

  <Card title="Ruby" icon="fa-duotone fa-gem" href="https://github.com/getbrevo/brevo-ruby">
    Official Ruby SDK for the Brevo API.
  </Card>
</CardGroup>

***

title: Node.js SDK
subtitle: Learn how to integrate the Brevo API into your Node.js applications
-----------------------------------------------------------------------------

## Overview

The Brevo Node.js SDK provides a TypeScript-first client library for interacting with the Brevo API. It offers type-safe methods, automatic retries, and comprehensive error handling.

## Version 4.0  [![npm downloads](https://img.shields.io/npm/dm/@getbrevo/brevo)](https://www.npmjs.com/package/@getbrevo/brevo)

Version 4.0 of the Node.js SDK has been released with significant improvements:

<Warning>
  The legacy v3.x SDK (`@getbrevo/brevo@^3.0.1`) will continue to receive critical security updates but no new features. We recommend migrating to v4.x for new projects and existing applications.
</Warning>

* Promise-based API with async/await support
* Enhanced TypeScript types and autocomplete
* Standardized error handling with specific error types
* Improved retry logic with exponential backoff
* Better timeout configuration
* Support for custom fetch implementations
* Binary response handling

## Installation

Install the SDK using npm:

```bash
npm install @getbrevo/brevo
```

## Quick start

Initialize the client and send your first email:

<CodeBlocks>
  ```typescript title="quick-start.ts"
  import { BrevoClient } from '@getbrevo/brevo';

  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
  });

  const result = await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  });

  console.log('Email sent:', result);
  ```
</CodeBlocks>

## Configuration

Configure the client with custom timeout and retry settings:

<CodeBlocks>
  ```typescript title="configuration.ts"
  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    timeoutInSeconds: 30,      // 30 seconds
    maxRetries: 3              // Default: 2
  });
  ```
</CodeBlocks>

## Error handling

The SDK throws specific error types based on HTTP status codes. Handle errors appropriately:

<CodeBlocks>
  ```typescript title="error-handling.ts"
  import { 
    BrevoError, 
    UnauthorizedError, 
    TooManyRequestsError 
  } from '@getbrevo/brevo';

  try {
    await brevo.transactionalEmails.sendTransacEmail({
      subject: "Hello",
      textContent: "Hello world!",
      sender: { name: "Sender", email: "sender@brevo.com" },
      to: [{ email: "recipient@example.com" }]
    });
  } catch (err) {
    if (err instanceof UnauthorizedError) {
      console.error('Invalid API key');
    } else if (err instanceof TooManyRequestsError) {
      const retryAfter = err.rawResponse.headers['retry-after'];
      console.error(`Rate limited. Retry after ${retryAfter} seconds`);
    } else if (err instanceof BrevoError) {
      console.error(`API Error ${err.statusCode}:`, err.message);
    }
  }
  ```
</CodeBlocks>

### Error types

The SDK provides the following error types:

* `400` - `BadRequestError`
* `401` - `UnauthorizedError`
* `403` - `ForbiddenError`
* `404` - `NotFoundError`
* `422` - `UnprocessableEntityError`
* `429` - `TooManyRequestsError`
* `500+` - `InternalServerError`

All `BrevoError` instances provide:

* `statusCode`: HTTP status code
* `message`: Error message
* `body`: Parsed error response body
* `rawResponse`: Raw response with headers

## Retries

Automatic retries with exponential backoff are enabled by default (2 retries). Configure retries at the client or request level:

<CodeBlocks>
  ```typescript title="retries.ts"
  // Client-level configuration
  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    maxRetries: 3
  });

  // Request-level configuration
  await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }, {
    maxRetries: 5
  });
  ```
</CodeBlocks>

### Retry behavior

* Retryable status codes: `408`, `429`, `500`, `502`, `503`, `504`
* Exponential backoff: \~1s, \~2s, \~4s (with jitter)
* Respects `Retry-After` header for rate limits
* Can be disabled per request with `maxRetries: 0`

## Timeouts

Default timeout is 60 seconds. Configure at client or request level:

<CodeBlocks>
  ```typescript title="timeouts.ts"
  // Client-level timeout
  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    timeoutInSeconds: 30
  });

  // Request-level timeout
  await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }, {
    timeoutInSeconds: 10
  });
  ```
</CodeBlocks>

### Recommended timeout values

* Standard API calls: `30-60s` (default)
* Quick operations: `10-15s`
* Bulk operations: `120-300s`
* Real-time: `5-10s`

## Request options

### Additional headers

Add custom headers to requests:

<CodeBlocks>
  ```typescript title="custom-headers.ts"
  await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }, {
    headers: {
      'X-Custom-Header': 'custom-value'
    }
  });
  ```
</CodeBlocks>

### Query parameters

Add query parameters to requests:

<CodeBlocks>
  ```typescript title="query-params.ts"
  await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }, {
    queryParams: {
      'customParam': 'value'
    }
  });
  ```
</CodeBlocks>

### Abort signal

Cancel requests using AbortController:

<CodeBlocks>
  ```typescript title="abort-signal.ts"
  const controller = new AbortController();

  await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }, {
    abortSignal: controller.signal
  });

  // Cancel the request
  controller.abort();
  ```
</CodeBlocks>

### Raw response

Access raw response headers and metadata:

<CodeBlocks>
  ```typescript title="raw-response.ts"
  const { data, rawResponse } = await brevo.transactionalEmails.sendTransacEmail({
    subject: "Hello",
    textContent: "Hello world!",
    sender: { name: "Sender", email: "sender@brevo.com" },
    to: [{ email: "recipient@example.com" }]
  }).withRawResponse();

  console.log(rawResponse.headers['X-My-Header']);
  ```
</CodeBlocks>

## Binary responses

Handle binary responses from endpoints like attachment downloads:

<CodeBlocks>
  ```typescript title="binary-responses.ts"
  const response = await brevo.inboundParsing.getInboundEmailAttachment(
    attachmentId,
    downloadToken
  );

  // Choose one:
  const stream = response.stream();
  // const arrayBuffer = await response.arrayBuffer();
  // const blob = await response.blob();
  // const bytes = await response.bytes();
  ```
</CodeBlocks>

### Saving binary responses

<AccordionGroup>
  <Accordion title="Node.js (ReadableStream)">
    Save binary responses to a file in Node.js:

    ```typescript
    import { createWriteStream } from 'fs';
    import { Readable } from 'stream';
    import { pipeline } from 'stream/promises';

    const stream = response.stream();
    const nodeStream = Readable.fromWeb(stream);
    await pipeline(nodeStream, createWriteStream('path/to/file'));
    ```
  </Accordion>

  <Accordion title="Bun">
    Save binary responses to a file in Bun:

    ```typescript
    await Bun.write('path/to/file', response.stream());
    ```
  </Accordion>

  <Accordion title="Browser">
    Download binary responses in the browser:

    ```typescript
    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'filename';
    a.click();
    URL.revokeObjectURL(url);
    ```
  </Accordion>
</AccordionGroup>

## TypeScript types

All request and response types are exported for use in your application:

<CodeBlocks>
  ```typescript title="typescript-types.ts"
  import { Brevo } from '@getbrevo/brevo';

  const request: Brevo.SendTransacEmailRequest = {
    subject: "First email",
    textContent: "Hello world!",
    sender: { name: "Bob Wilson", email: "bob.wilson@brevo.com" },
    to: [{ email: "sarah.davis@example.com", name: "Sarah Davis" }]
  };
  ```
</CodeBlocks>

## Logging

Configure logging to debug API calls:

<CodeBlocks>
  ```typescript title="logging.ts"
  import { BrevoClient, logging } from '@getbrevo/brevo';

  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    logging: {
      level: logging.LogLevel.Debug,
      logger: new logging.ConsoleLogger(),
      silent: false
    }
  });
  ```
</CodeBlocks>

### Custom logger

Implement a custom logger using your preferred logging library:

<CodeBlocks>
  ```typescript title="custom-logger.ts"
  import winston from 'winston';

  const winstonLogger = winston.createLogger({
    level: 'info',
    format: winston.format.json(),
    transports: [new winston.transports.Console()]
  });

  const logger: logging.ILogger = {
    debug: (msg, ...args) => winstonLogger.debug(msg, ...args),
    info: (msg, ...args) => winstonLogger.info(msg, ...args),
    warn: (msg, ...args) => winstonLogger.warn(msg, ...args),
    error: (msg, ...args) => winstonLogger.error(msg, ...args),
  };

  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    logging: {
      level: logging.LogLevel.Debug,
      logger: logger
    }
  });
  ```
</CodeBlocks>

## Custom fetch client

Override the default fetch implementation for advanced use cases:

<CodeBlocks>
  ```typescript title="custom-fetch.ts"
  const customFetcher = async (
    url: string, 
    options?: RequestInit
  ): Promise<Response> => {
    // Your custom implementation
    return fetch(url, options);
  };

  const brevo = new BrevoClient({
    apiKey: 'your-api-key',
    fetcher: customFetcher
  });
  ```
</CodeBlocks>

### Common use cases

<AccordionGroup>
  <Accordion title="Using node-fetch">
    Use node-fetch as the fetch implementation:

    ```typescript
    import fetch from 'node-fetch';

    const brevo = new BrevoClient({
      apiKey: 'your-api-key',
      fetcher: fetch as any
    });
    ```
  </Accordion>

  <Accordion title="Using undici">
    Use undici's fetch implementation:

    ```typescript
    import { fetch } from 'undici';

    const brevo = new BrevoClient({
      apiKey: 'your-api-key',
      fetcher: fetch as any
    });
    ```
  </Accordion>

  <Accordion title="With interceptors">
    Add request interceptors for custom headers or logging:

    ```typescript
    const createFetcherWithInterceptors = () => {
      return async (url: string, options?: RequestInit): Promise<Response> => {
        const modifiedOptions = {
          ...options,
          headers: {
            ...options?.headers,
            'X-Request-ID': generateRequestId()
          }
        };
        const response = await fetch(url, modifiedOptions);
        console.log('Response:', response.status);
        return response;
      };
    };

    const brevo = new BrevoClient({
      apiKey: 'your-api-key',
      fetcher: createFetcherWithInterceptors()
    });
    ```
  </Accordion>
</AccordionGroup>

## Runtime compatibility

The SDK is compatible with:

* Node.js 18+
* Vercel
* Cloudflare Workers
* Deno v1.25+
* Bun 1.0+
* React Native

## Migration from v3.x

Version 4.0.1 includes breaking changes. For the full migration guide, see the [GitHub migration reference](https://github.com/getbrevo/brevo-node/tree/v4?tab=readme-ov-file#migration-from-v3x).

### Key changes

* New client initialization
* Promise-based API
* Improved TypeScript support
* Standardized error handling

### Migration example

<CodeBlocks>
  ```typescript title="v3-example.ts"
  // v3.x
  import { TransactionalEmailsApi, SendSmtpEmail } from "@getbrevo/brevo";

  let emailAPI = new TransactionalEmailsApi();
  (emailAPI as any).authentications.apiKey.apiKey = "xkeysib-xxx";

  let message = new SendSmtpEmail();
  message.subject = "First email";
  message.textContent = "Hello world!";
  message.sender = { name: "Bob Wilson", email: "bob.wilson@brevo.com" };
  message.to = [{ email: "sarah.davis@example.com", name: "Sarah Davis" }];

  emailAPI.sendTransacEmail(message);
  ```

  ```typescript title="v4-example.ts"
  // v4.x
  import { BrevoClient } from '@getbrevo/brevo';

  const brevo = new BrevoClient({
    apiKey: 'xkeysib-xxx'
  });

  await brevo.transactionalEmails.sendTransacEmail({
    subject: "First email",
    textContent: "Hello world!",
    sender: { name: "Bob Wilson", email: "bob.wilson@brevo.com" },
    to: [{ email: "sarah.davis@example.com", name: "Sarah Davis" }]
  });
  ```
</CodeBlocks>

## Resources

* [GitHub Repository](https://github.com/getbrevo/brevo-node)
* [npm Package](https://www.npmjs.com/package/@getbrevo/brevo)
* [Support](mailto:support@brevo.com)


***

title: Brevo MCP Server <Badge intent="success" minimal>Early access</Badge>
subtitle: >-
The MCP Protocol enables Artificial Intelligence models to communicate and
work with external tools and systems to generate responses. It defines the
rules and formats for exchanging information, ensuring seamless interaction
between the AI and connected services.
slug: docs/mcp-protocol
-----------------------

<Note title="MCP Early Access Preview">
  MCP is currently available only for early access users.
</Note>

## Overview

The Brevo Model Context Protocol (MCP) server enables AI assistants and applications to integrate directly with Brevo services through a standardized protocol. This implementation provides access to all Brevo APIs through AI conversations and automated workflows.

## Architecture

### Protocol Specification

* **Protocol**: Model Context Protocol (MCP)
* **Transport**: HTTPS
* **Authentication**: MCP token provided in Brevo account settings
* **Response Format**: JSON
* **Base URL**: `https://mcp.brevo.com/v1/`

### Available Endpoints

| Service Area            | Endpoint                                       | Description                           |
| ----------------------- | ---------------------------------------------- | ------------------------------------- |
| Account Management      | `/brevo_accounts/mcp/{token}`                  | Account and sub-account operations    |
| Attributes              | `/brevo_attributes/mcp/{token}`                | Contact and CRM attribute management  |
| Campaign Analytics      | `/brevo_campaign_analytics/mcp/{token}`        | Performance metrics and reporting     |
| Companies               | `/brevo_companies/mcp/{token}`                 | CRM company management                |
| Contact Import/Export   | `/brevo_contact_import_export/mcp/{token}`     | Bulk contact operations               |
| Contacts                | `/brevo_contacts/mcp/{token}`                  | Contact database management           |
| Deals                   | `/brevo_deals/mcp/{token}`                     | Sales pipeline and deal tracking      |
| Domains                 | `/brevo_domains/mcp/{token}`                   | Domain configuration and verification |
| Email Campaigns         | `/brevo_email_campaign_management/mcp/{token}` | Email marketing campaigns             |
| External Feeds          | `/brevo_external_feeds/mcp/{token}`            | Dynamic content integration           |
| Folders                 | `/brevo_folders/mcp/{token}`                   | Contact organization structure        |
| Groups                  | `/brevo_groups/mcp/{token}`                    | Sub-account group management          |
| IP Management           | `/brevo_ips/mcp/{token}`                       | Dedicated IP configuration            |
| Lists                   | `/brevo_lists/mcp/{token}`                     | Contact list management               |
| Notes                   | `/brevo_notes/mcp/{token}`                     | CRM communication history             |
| Pipelines               | `/brevo_pipelines/mcp/{token}`                 | Deal pipeline configuration           |
| Processes               | `/brevo_processes/mcp/{token}`                 | Background operation monitoring       |
| Segments                | `/brevo_segments/mcp/{token}`                  | Dynamic contact segmentation          |
| Senders                 | `/brevo_senders/mcp/{token}`                   | Email sender management               |
| SMS Campaigns           | `/brevo_sms_campaigns/mcp/{token}`             | SMS marketing operations              |
| Tasks                   | `/brevo_tasks/mcp/{token}`                     | CRM task and activity management      |
| Templates               | `/brevo_templates/mcp/{token}`                 | Email template management             |
| Transactional Templates | `/brevo_transac_templates/mcp/{token}`         | Automated email templates             |
| Users                   | `/brevo_users/mcp/{token}`                     | User and permission management        |
| WhatsApp Campaigns      | `/brevo_whatsapp_campaigns/mcp/{token}`        | WhatsApp business messaging           |
| All Services            | `/brevo/mcp/{token}`                           | Complete Brevo API access             |

### Service Coverage

The Brevo MCP server provides complete coverage of Brevo's functionality:

[**🏢 Account & Organization Management**](/api-reference/accounts-and-settings/account/get-account)

* Corporate account and sub-account management
* User permissions and access control
* Group organization and structure
* Billing and subscription management

[**📞 Contact & CRM Operations**](/api-reference/sales-crm/companies/get-all-companies)

* Complete contact lifecycle management
* Company and deal tracking
* Task and activity management
* Communication history and notes
* Contact attributes and segmentation

[**📧 Email Marketing Suite**](/api-reference/marketing-campaigns/email-campaigns/get-email-campaigns)

* Campaign creation and management
* Template design and reuse
* A/B testing and optimization
* Performance analytics and reporting
* Transactional email automation

[**📱 Multi-Channel Communications**](/api-reference/marketing-campaigns/sms-campaigns/get-sms-campaigns)

* SMS campaign management
* WhatsApp business messaging
* Cross-channel analytics
* Unified campaign orchestration

**[🔧 Technical Infrastructure](/api-reference/accounts-and-settings/senders/get-senders)**

* Domain configuration and verification
* Dedicated IP management
* Sender reputation and deliverability
* Process monitoring and debugging

***

## slug: docs/authentication

## Authentication

### Token Access

Your MCP token is provided directly in your Brevo account settings alongside your API key. Simply:

1. Access your Brevo[ account settings](https://app.brevo.com/settings/keys/smtp)
2. Navigate to[ the API Keys section](https://app.brevo.com/settings/keys/api)
3. Click on **Generate a new API key**
4. Toggle "ON" ***Create MCP server API key***
5. Make sure to copy a **safely** store your credential. It has access to all read/write the operations under your account.

<br />

<div align="center">
  ![Image](file:0e94ef20-8d33-46fa-ba71-dee414455c02)
</div>

<br />

**Example token format:**

```text MCP Token
mcp_token_abc123000456ghi789jkl012mno345sss678stu000vwx234yz
```

### Token Structure

The MCP token is a secure, pre-generated credential that provides authenticated access to your Brevo account through the MCP protocol.

<Info title=" Security note">
  The token provides full access to your Brevo account. Store securely and **never expose in client-side code.**
</Info>

***

subtitle: Learn how to integrate Brevo MCP to popular MCP clients.
slug: docs/integration-guide
----------------------------

## Claude Configuration (via JSON)

Follow the steps below to configure the client for communication with Brevo MCP server:

1. Download [Claude Desktop](https://claude.ai/download) to your system
2. After opening Claude desktop, you can edit configuration under **Settings > Developer > Edit Config**.
3. Add to your Claude configuration file:

```json MCP Conf
{
  "mcpServers": {
    "brevo_contacts": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN"
      ]
    },
    "brevo_deals": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_deals/mcp/YOUR_MCP_TOKEN"
      ]
    },
    "brevo_campaigns": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_email_campaign_management/mcp/YOUR_MCP_TOKEN"
      ]
    }
  }
}

```

<div align="center">
  <Frame caption="Configuration Panel in Claude 0.10">
    <img src="file:8b86572b-6576-4006-a3ba-e1c5d77d8cf5" alt="Configuration Panel in Claude 0.10" />
  </Frame>
</div>

## Claude Configuration (using connectors)

1. Download [Claude Desktop](https://claude.ai/download) to your system.
2. After opening Claude desktop, you can edit configuration under **Settings > Connectors > Organization connectors**.
3. Click on **Add custom connector**
4. Add "Brevo connector" under name.
5. Add the remote MCP url : [https://mcp.brevo.com/v1/brevo\_contacts/mcp/YOUR\_MCP\_TOKEN](https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN)

![](https://files.readme.io/3180040e2909f0711cc88814ef44fa54689b9ba279748ca52815134e8ea23a4f-image.png)

<div align="center">
  <Frame caption="Custom connector configuration window">
    <img src="file:f1f51f40-006b-492c-95d9-8f77087b9ed8" alt="Custom connector configuration window" />
  </Frame>
</div>

## Cursor

Follow the steps below to configure Cursor for communication with Brevo MCP server:

1. Download and install [Cursor ](https://www.cursor.so/)
2. Go to: **Settings > Developer > Edit Config** (or wherever your configuration file for MCP clients is stored — typically this is under your workspace config or in a `.cursor_mcp_settings.json` file at the root of your project).
3. Add the following configuration (replacing `YOUR_MCP_TOKEN `with your actual token):

```json MCP Conf
{
  "mcpServers": {
    "brevo_contacts": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN"
      ]
    },
    "brevo_deals": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_deals/mcp/YOUR_MCP_TOKEN"
      ]
    },
    "brevo_campaigns": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_email_campaign_management/mcp/YOUR_MCP_TOKEN"
      ]
    }
  }
}
```

<div align="center">
  <Frame caption="MCP Tools Configuration Panel in Cursor">
    <img src="file:6b9fcae3-a77c-4634-9942-78b9661e6444" alt="MCP Tools Configuration Panel in Cursor" />
  </Frame>
</div>

## Cline/VSCode

Configuration for VSCode in `.cline_mcp_settings.json`:

```json JSON
{
  "mcpServers": {
    "brevo_complete": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo/mcp/YOUR_MCP_TOKEN"
      ]
    }
  }
}

```

## Custom Implementation

For custom MCP clients:

```javascript JavaScript
import { Client } from '@modelcontextprotocol/sdk/client/index.js';
import { SSEClientTransport } from '@modelcontextprotocol/sdk/client/sse.js';

const transport = new SSEClientTransport(
  new URL('https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN')
);

const client = new Client(
  {
    name: "brevo-client",
    version: "1.0.0"
  },
  {
    capabilities: {}
  }
);

await client.connect(transport);

```

## Service-Specific Tool Examples

Tools from different Brevo categories are mentioned as follows:

### Contact Management

| Tool               | Description                  | Use Case                        |
| ------------------ | ---------------------------- | ------------------------------- |
| `get_contacts`     | List contacts with filtering | Contact discovery and analysis  |
| `get_contact_info` | Detailed contact information | Customer service and support    |
| `create_contact`   | Add new contacts             | Lead capture and onboarding     |
| `update_contact`   | Modify contact data          | Data maintenance and enrichment |
| `delete_contact`   | Remove contacts              | Data cleanup and compliance     |

### Deal Management

| Tool          | Description               | Use Case                        |
| ------------- | ------------------------- | ------------------------------- |
| `get_deals`   | List deals with filtering | Sales pipeline analysis         |
| `get_deal`    | Detailed deal information | Deal review and updates         |
| `create_deal` | Add new opportunities     | Lead qualification and tracking |
| `update_deal` | Modify deal properties    | Pipeline progression            |
| `delete_deal` | Remove deals              | Data cleanup                    |

### Email Campaign Management

| Tool                       | Description                 | Use Case               |
| -------------------------- | --------------------------- | ---------------------- |
| `create_email_campaign`    | Create marketing campaigns  | Campaign launches      |
| `get_email_campaigns`      | List campaigns with stats   | Performance monitoring |
| `send_email_campaign_now`  | Send campaigns immediately  | Campaign execution     |
| `send_test_email_campaign` | Test before sending         | Quality assurance      |
| `get_campaign_details`     | Detailed campaign analytics | Performance analysis   |

### Analytics

| Tool                                | Description            | Use Case               |
| ----------------------------------- | ---------------------- | ---------------------- |
| `get_email_campaign_statistics`     | Detailed email metrics | Performance evaluation |
| `get_sms_campaign_statistics`       | SMS campaign analytics | Multi-channel analysis |
| `get_account_sending_statistics`    | Account-wide metrics   | Executive reporting    |
| `get_campaign_comparison_analytics` | A/B testing analysis   | Optimization insights  |

**Example Usage**

```python Python
# Through MCP-enabled AI assistant
prompt = """
Using the Brevo contacts tool, please:
1. Get all contacts from France
2. Show contacts created in the last week
3. Create a new contact for john@example.com with name "John Doe"
"""

```

***

## slug: docs/advanced-configuration

## Multi-Service Setup

For comprehensive Brevo integration, configure multiple specific services:

```json JSON
{
  "mcpServers": {
    "brevo_crm": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.brevo.com/v1/brevo_deals/mcp/YOUR_MCP_TOKEN"]
    },
    "brevo_contacts": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN"]
    },
    "brevo_campaigns": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.brevo.com/v1/brevo_email_campaign_management/mcp/YOUR_MCP_TOKEN"]
    },
    "brevo_analytics": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.brevo.com/v1/brevo_campaign_analytics/mcp/YOUR_MCP_TOKEN"]
    }
  }
}

```

### Service Selection Strategy

**Recommended**: Use specific service endpoints

* Better performance and focused tool sets
* Reduced complexity for AI assistants
* Clearer separation of concerns
* Easier debugging and monitoring

**Alternative**: Use complete service access

* Single configuration for all features
* May overwhelm AI assistants with tool options
* Higher complexity but complete functionality

### Environment Variables

```shell Shell
# For containerized deployments
BREVO_MCP_TOKEN=mcp_token_abc123000456ghi789jkl012mno345pqr6780xxxxxxxx
BREVO_MCP_BASE_URL=https://mcp.brevo.com/v1/
BREVO_MCP_CONTACTS_ENDPOINT=brevo_contacts/mcp/
BREVO_MCP_DEALS_ENDPOINT=brevo_deals/mcp/
BREVO_MCP_CAMPAIGNS_ENDPOINT=brevo_email_campaign_management/mcp/

```

<Info title="SSE Support">
  If your application requires an [SSE based endpoint](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events) you can simply append `/sse` to the base endpoint. We support this !

  `https://mcp.brevo.com/v1/brevo_deals/mcp/YOUR_MCP_TOKEN/sse`
</Info>

## Error Handling

### Common Error Responses

```json
{
  "error": {
    "code": "INVALID_TOKEN",
    "message": "Token authentication failed",
    "details": "MCP token is invalid or has expired"
  }
}

```

### Error Codes

| Code                       | Description                      | Resolution                                         |
| -------------------------- | -------------------------------- | -------------------------------------------------- |
| `INVALID_TOKEN`            | Token format or token invalid    | Copy the correct MCP token from your Brevo account |
| `RATE_LIMIT_EXCEEDED`      | API rate limit reached           | Implement backoff strategy                         |
| `INSUFFICIENT_PERMISSIONS` | Token lacks required permissions | Check account permissions in Brevo                 |
| `RESOURCE_NOT_FOUND`       | Requested resource doesn't exist | Verify resource ID                                 |
| `INVALID_PARAMETERS`       | Invalid tool parameters          | Check parameter format and requirements            |
| `SERVICE_UNAVAILABLE`      | Service temporarily unavailable  | Retry with exponential backoff                     |

### Error Handling Best Practices

```javascript JavaScript
try {
  const result = await client.callTool('get_contacts', {
    filters: 'equals(FIRSTNAME,"John")'
  });
} catch (error) {
  switch (error.code) {
    case 'RATE_LIMIT_EXCEEDED':
      await new Promise(resolve => setTimeout(resolve, 5000));
      break;
    case 'INVALID_PARAMETERS':
      console.error('Invalid parameters:', error.details);
      break;
    default:
      console.error('Unexpected error:', error);
  }
}

```

## Rate Limiting

### Limits

* **API Calls**: Follows standard Brevo API rate limits (varies by plan)
* **MCP Connections**: 10 concurrent connections per MCP token
* **Token Refresh**: Tokens are valid for 24 hours

### Best Practices

* Implement exponential backoff for rate limit errors
* Cache responses when appropriate
* Use specific service endpoints to reduce tool overhead
* Monitor API usage through Brevo dashboard

## Development Environment Setup

### Local Testing

<Steps>
  ### Install MCP SDK

  ```shell Shell
  npm install -g @modelcontextprotocol/sdk
  ```

  ### Test Connection

  ```shell Shell
  mcp-client-test https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN
  ```

  ### Validate Token

  ```curl cURL
  curl -X GET "https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN/tools" \
       -H "Authorization: Bearer YOUR_MCP_TOKEN"

  ```
</Steps>

### Debugging

Enable MCP debugging:

```json JSON
{
  "mcpServers": {
    "brevo_contacts": {
      "command": "npx",
      "args": [
        "-y",
        "mcp-remote",
        "https://mcp.brevo.com/v1/brevo_contacts/mcp/YOUR_MCP_TOKEN"
      ],
      "env": {
        "MCP_DEBUG": "1"
      }
    }
  }
}

```

## Security Considerations

### MCP Token Management

* Rotate MCP tokens regularly through your Brevo account
* Never commit tokens to version control

### Token Security

* Store tokens securely (environment variables, secret managers)
* Obtain fresh tokens from your Brevo account as needed


***

title: Connect to Cursor
subtitle: Learn how to connect the Brevo API documentation to Cursor via MCP server
-----------------------------------------------------------------------------------

## Overview

Connect the Brevo API documentation to Cursor using the MCP (Model Context Protocol) server. This integration enables Cursor to access Brevo's API documentation directly within your development environment.

## Prerequisites

* [Cursor IDE](https://cursor.com) installed on your machine
* Access to the [Brevo API documentation](https://developers.brevo.com)

## Connect the documentation

<Steps>
  ### Click the dropdown menu

  Navigate to any page in the Brevo API documentation. Click the dropdown component next to the page title.

  ### Select Connect to Cursor

  From the dropdown menu, select "Connect to Cursor". This opens the MCP Server installation panel in Cursor Settings.

  <Frame background="subtle">
    <img src="file:e96b0620-be61-4440-af4a-f8fa11f3da79" alt="Connect to Cursor option in dropdown menu" />
  </Frame>

  ### Install the MCP Server

  In Cursor Settings, review the pre-filled MCP Server configuration:

  * **Name**: `developers.brevo.com`
  * **Type**: `streamableHttp`
  * **URL**: `https://developers.brevo.com/_mcp/server`

  Click **Install** to add the MCP server to Cursor.

  <Frame background="subtle">
    <img src="file:27861250-7545-489a-9741-329eee810996" alt="MCP Server installation panel in Cursor Settings" />
  </Frame>

  ### Enable the MCP Server

  Ensure the `developers.brevo.com` toggle switch is set to **ON**. The server must be enabled to access Brevo documentation within Cursor.

  <Frame background="subtle">
    <img src="file:d598b0b7-1243-44c1-a8c1-f4340d70f903" alt="MCP Server settings showing developers.brevo.com toggle switch" />
  </Frame>

  <Note>
    If the toggle is disabled, click it to enable the MCP server connection.
  </Note>
</Steps>

## Verify the connection

After completing these steps, Cursor can access Brevo API documentation through the MCP server. You can now use Cursor's AI features with context from the Brevo API documentation.

## Troubleshooting

If the connection isn't working:

* Verify the MCP server toggle is enabled in Cursor Settings
* Check that Cursor has network access to `developers.brevo.com`
* Restart Cursor after installation if the connection doesn't appear immediately


***

title: Send a transactional email
subtitle: >-
Send transactional emails with static or dynamic content using the Messaging
API
slug: docs/send-a-transactional-email
-------------------------------------

Transactional emails are automated, non-promotional messages triggered by user actions such as account creation, order confirmations, and password resets.

<Note>
  If you're new to the API, see the [Quickstart guide](/docs/quickstart) before sending your first email.
</Note>

<CardGroup>
  <Card title="Static content" icon="fa-duotone fa-envelope-dot" href="#send-a-message-with-static-content">
    Send a basic message with a static body or predefined template.<br /><br />
  </Card>

  <Card title="Dynamic content" icon="fa-duotone fa-envelope-open-text" href="#send-a-message-with-dynamic-content">
    Send a message enriched with contact attributes or custom variables.<br /><br />
  </Card>
</CardGroup>

## Before you start

<Steps>
  <Step>
    ### Retrieve your credentials

    Get your API key or configure OAuth 2.0. See the [Authentication](/docs/authentication-schemes) guide for details.
  </Step>

  <Step>
    ### Register an email sender

    Configure your sending domain and sender before sending emails. See [how to set up your senders](https://help.brevo.com/hc/en-us/articles/208836149-Create-a-new-sender-From-name-and-From-email) for instructions.

    <Frame caption="Set up a sender" background="subtle">
      <iframe src="https://www.youtube-nocookie.com/embed/yHLxBaiTrwY?rel=0&modestbranding=1&controls=0&showinfo=0&autohide=1" title="Embedded video" frameborder="0" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen />
    </Frame>
  </Step>
</Steps>

## Send a message with static content

Send a simple email with static HTML or text content. Use this for straightforward transactional messages without <Tooltip tip="Dynamic variables can be contact attributes like name, lastname, address">dynamic variables</Tooltip> or advanced template logic.

**Example attributes:**

<AccordionGroup>
  <Accordion title="Subject line" defaultOpen={true}>
    <ParamField path="subject" type="string" required={true} deprecated={false} toc={false}>
      `Hello from Brevo!`
    </ParamField>
  </Accordion>

  <Accordion title="Sender details" defaultOpen={true}>
    <ParamField path="sender" type="object" required={true} deprecated={false} toc={false}>
      `{ "name" : "Alex from Brevo", "email" : "hello@brevo.com"}`
    </ParamField>
  </Accordion>

  <Accordion title="Recipient details" defaultOpen={true}>
    <ParamField path="to" type="object []" required={true} deprecated={false} toc={false}>
      `[{ "name" : "John Doe", "email" : "johndoe@example.com"}]`
    </ParamField>
  </Accordion>

  <Accordion title="Message body" defaultOpen={true}>
    <ParamField path="htmlContent" type="string" required={false} deprecated={false} toc={false}>
      "`<html><head></head><body><p>Hello,</p>this is my first transactional email sent from Brevo.</p></body></html>`"
    </ParamField>

    <ParamField path="textContent" type="string" required={false} deprecated={false} toc={false}>
      `Hello, this is my first transactional email sent from Brevo.`
    </ParamField>

    <ParamField path="templateId" type="string" required={false} deprecated={false} toc={false}>
      `345`
    </ParamField>
  </Accordion>
</AccordionGroup>

Use one of the following message body types:

* `htmlContent`: HTML content that defines the message structure and styling
* `textContent`: Plain text content for simple messages like password resets or order confirmations
* `templateId`: Reference a template created in the [Brevo Drag & Drop](https://my.brevo.com/camp/template/setup) editor by passing its template ID
  <Info> You can only pick one of the three different body types on each request.</Info>

### Request

<Tabs>
  <Tab title="HTML Body">
    ```curl
    curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
    "sender":{  
    "name":"Alex from Brevo",
    "email":"hello@brevo.com"
    },
    "to":[  
    {  
      "email":"johndoe@example.com",
      "name":"John Doe"
    }
    ],
    "subject":"Hello from Brevo!",
    "htmlContent":"<html><head></head><body><p>Hello,</p>This is my first transactional email sent from Brevo.</p></body></html>"
    }'
    ```
  </Tab>

  <Tab title="Text Body">
    ```curl
    curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
    "sender":{  
    "name":"Alex from Brevo",
    "email":"hello@brevo.com"
    },
    "to":[  
    {  
      "email":"johndoe@example.com",
      "name":"John Doe"
    }
    ],
    "subject":"Hello from Brevo!",
    "textContent":"Hello. This is my first transactional email sent from Brevo."
    }'
    ```
  </Tab>

  <Tab title="Template">
    ```curl
    curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
    "sender":{  
    "name":"Alex from Brevo",
    "email":"hello@brevo.com"
    },
    "to":[  
    {  
      "email":"johndoe@example.com",
      "name":"John Doe"
    }
    ],
    "subject":"Hello from Brevo!",
    "templateId":345
    }'
    ```
  </Tab>
</Tabs>

<RunnableEndpoint endpoint="POST /smtp/email" />

### Response

The response includes a `messageId` that you can use to [track deliverability events](https://app.brevo.com/transactional/email/logs) for this message.

<EndpointResponseSnippet endpoint="POST /smtp/email" />

## Send a message with dynamic content

Dynamic content lets you personalize message bodies with attributes that vary per request. You can embed variables in HTML content, plain text, or as templates.

This guide demonstrates dynamic content using an order confirmation email that includes:

* [Dynamic variables (tracking number, delivery date)](#dynamic-variables-embedded-in-the-request)
* Contact attributes (name, address)

### Dynamic variables embedded in the request

Pass <Tooltip tip="Dynamic variables can be contact attributes like name, lastname, address">dynamic variables</Tooltip> directly in your API request using the object `params` to personalize the message body. Variables are included in the request payload alongside the email content.

**Example attributes:**

<AccordionGroup>
  <Accordion title="Subject line" defaultOpen={true}>
    <ParamField path="subject" type="string" required={true} deprecated={false} toc={false}>
      `Hello from Brevo!`
    </ParamField>
  </Accordion>

  <Accordion title="Sender details" defaultOpen={true}>
    <ParamField path="sender" type="object" required={true} deprecated={false} toc={false}>
      `{ "name" : "Alex from Brevo", "email" : "hello@brevo.com"}`
    </ParamField>
  </Accordion>

  <Accordion title="Recipient details" defaultOpen={true}>
    <ParamField path="to" type="object []" required={true} deprecated={false} toc={false}>
      `[{ "name" : "John Doe", "email" : "johndoe@example.com"}]`
    </ParamField>
  </Accordion>

  <Accordion title="Dynamic variables" defaultOpen={true}>
    <ParamField path="params" type="object" required={false} deprecated={false} toc={false}>
      `{
              "trackingCode": "JD01460000300002350000",
              "estimatedArrival" : "Tomorrow"
           }`
    </ParamField>
  </Accordion>

  <Accordion title="Message body" defaultOpen={true}>
    <ParamField path="htmlContent" type="string" required={false} deprecated={false} toc={false}>
      `<html><head></head><body>Your delivery is expected {{params.estimatedArrival}}.Your tracking code: {{params.trackingCode}}</p></body></html>`
    </ParamField>

    <ParamField path="textContent" type="string" required={false} deprecated={false} toc={false}>
      `Your delivery is expected {{params.estimatedArrival}}.Your tracking code: {{params.trackingCode}}`
    </ParamField>
  </Accordion>
</AccordionGroup>

Use one of the following message body types:

* `htmlContent`: HTML content that defines the message structure and styling
* `textContent`: Plain text content for simple messages like password resets or order confirmations

<Info>
   You can only pick one of the two different body types on each request.
</Info>

### Request

<Tabs>
  <Tab title="HTML Body">
    ```curl
    curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
    "sender":{  
    "name":"Alex from Brevo",
    "email":"hello@brevo.com"
    },
    "to":[  
    {  
      "email":"johndoe@example.com",
      "name":"John Doe"
    }
    ],
    "subject":"Hello from Brevo!",
    "params": {
        "trackingCode": "JD01460000300002350000",
        "estimatedArrival" : "Tomorrow"
     },
    "htmlContent":"<html><head></head><body>Your delivery is expected {{params.estimatedArrival}}.Your tracking code: {{params.trackingCode}}</p></body></html>"
    }'
    ```
  </Tab>

  <Tab title="Text Body">
    ```curl
    curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
    "sender":{  
    "name":"Alex from Brevo",
    "email":"hello@brevo.com"
    },
    "to":[  
    {  
      "email":"johndoe@example.com",
      "name":"John Doe"
    }
    ],
    "subject":"Hello from Brevo!",
    "params": {
        "trackingCode": "JD01460000300002350000",
        "estimatedArrival" : "Tomorrow"
    },
    "textContent":"Your delivery is expected {{params.estimatedArrival}}.Your tracking code: {{params.trackingCode}}"
    }'
    ```
  </Tab>
</Tabs>

<RunnableEndpoint endpoint="POST /smtp/email" />

### Response

The response includes a `messageId` that you can use to [track deliverability events](https://app.brevo.com/transactional/email/logs) for this message.

<EndpointResponseSnippet endpoint="POST /smtp/email" />

## Create a template with dynamic content

Create the email template in the Brevo dashboard.

<Steps>
  ### Open template creation

  Open the template creation page in your Brevo dashboard.

  ### Configure settings

  Set up your template:

  * Template Name: "Order confirmation"
  * Subject Line: "Your new order has been received"
  * From Email: Select an existing sender
  * From Name: Enter your company name

  <Frame background="subtle">
    ![](https://files.readme.io/ba0362a-Screenshot_2023-07-07_at_13.19.59.png)
  </Frame>

  Click "Next Step".

  ### Import template

  In the Design tab, select "Import a template" and paste this URL:

  `https://my.brevo.com/iNF7GRiE34wzuyVRWobyyLLNbttWwwKn8CQLDhU7kui0HXu4tZG_ZzZ6Ng--`

  <Frame background="subtle">
    ![](https://files.readme.io/8e6f770-Screenshot_2023-07-07_at_13.33.08.png)
  </Frame>

  ### Save and activate

  Click "Import", then "Save & Quit". On the next page, click "Save and Activate".

  <Frame background="subtle">
    ![](https://files.readme.io/4cc05ac-Screenshot_2023-07-07_at_13.38.12.png)
  </Frame>

  ### Get template ID

  Return to the templates page and note the template ID (the number after "#" in the template name). You'll need this for API requests.

  <Frame background="subtle">
    ![](https://files.readme.io/4b603fe-Screenshot_2023-07-07_at_13.45.42.png)
  </Frame>
</Steps>

<Note>
  You can also create templates via the API using the [Create an SMTP template](/reference/create-smtp-template) endpoint. You can pass HTML content as a string (`htmlContent`) or via a URL (`htmlUrl`).
</Note>

## Add a delivery address attribute

Contacts include `EMAIL`, `FIRSTNAME`, `LASTNAME`, and `SMS` by default. Add a `DELIVERYADDRESS` attribute for use in the template.

<Steps>
  ### Create attribute

  Go to Contact > Settings > Contact Attributes & CRM and add a field named `DELIVERYADDRESS`.

  <Frame background="subtle">
    ![](https://files.readme.io/c22be3c-Screenshot_2023-07-07_at_13.48.25.png)
  </Frame>

  ### Add test contact

  Go to your [contacts page](https://my.sendinblue.com/users/list) and create a contact with:

  * **FIRSTNAME**: `John`
  * **LASTNAME**: `Doe`
  * **EMAIL**: Your email address
  * **DELIVERYADDRESS**: `75014 Paris, France`
  * **Contact list**: Select any list

  <Frame background="subtle">
    ![](https://files.readme.io/29dd4a2-Screenshot_2023-07-07_at_13.51.51.png)
  </Frame>

  Click "Save and Close".
</Steps>

<Note>
  Manage contacts via the API using [Create contact attribute](/api-reference/contact-management/attributes/create-attribute) and [Create a contact](/api-reference/contact-management/contacts/create-contact). For importing contacts, see [synchronize contact lists](/guides/marketing-platform/import-your-contacts-to-brevo).
</Note>

## Send the transactional email

Use the [Send a transactional email](/reference/send-transac-email) endpoint.

### Required parameters

* `sender`: Sender email and name (must be [registered and verified](https://account.sendinblue.com/senders))
  * `name` overrides your default sender name
* `to`: Recipient email and name
  * Email must be a Brevo contact assigned to a contact list
  * Contact must have `FIRSTNAME`, `LASTNAME`, `EMAIL`, and `DELIVERYADDRESS` attributes
  * `name` appears in email headers only
* `templateId`: Template ID from the [templates page](https://app-smtp.sendinblue.com/templates) or the [list templates endpoint](/reference/get-smtp-templates)
* `params`: Transactional parameters, e.g., `{"ORDER": 12345, "DATE": "12/06/2019"}`

### Test in API reference

Test the endpoint in the [API Reference](/reference/send-transac-email). Click "Try it" and enter your API key.

<Tip>
  The API reference interface doesn't support rich JSON body parameters like `params`. Use the code examples below for full functionality.
</Tip>

<Warning>
  The API reference makes real API calls. Check your [rate limits](/guides/api-rate-limits) and [credits](https://account.sendinblue.com/pricing) before testing.
</Warning>

### Code examples

<CodeBlocks>
  ```bash title="cURL - Using a template"
  curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
     "to":[  
        {  
           "email":"testmail@example.com",
           "name":"John Doe"
        }
     ],
     "templateId":8,
     "params":{  
        "name":"John",
        "surname":"Doe"
     },
     "headers":{  
        "X-Mailin-custom":"custom_header_1:custom_value_1|custom_header_2:custom_value_2|custom_header_3:custom_value_3",
        "charset":"iso-8859-1"
     }
  }'
  ```

  ```bash title="cURL - Using HTML content"
  curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key:YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{  
     "sender":{  
        "name":"Sender Alex",
        "email":"senderalex@example.com"
     },
     "to":[  
        {  
           "email":"testmail@example.com",
           "name":"John Doe"
        }
     ],
     "subject":"test mail",
     "htmlContent":"<html><head></head><body><h1>Hello this is a test email from sib</h1></body></html>",
     "headers":{  
        "X-Mailin-custom":"custom_header_1:custom_value_1|custom_header_2:custom_value_2|custom_header_3:custom_value_3",
        "charset":"iso-8859-1"
     }
  }'
  ```
</CodeBlocks>

<Tip>
  Include these headers in each request:

  * `api-key: xkeysib-xxxxxxxxxxxxxxxxx`
  * `content-type: application/json`
  * `accept: application/json`
</Tip>

Check your inbox for the email.

## Track email events with webhooks

Set up webhooks to track email status. Available events:

**Sent, Delivered, Opened, Clicked, Soft Bounce, Hard Bounce, Invalid Email, Deferred, Complaint, Unsubscribed, Blocked, Error**

<Steps>
  ### Create webhook

  Go to the [transactional webhooks page](https://app-smtp.sendinblue.com/webhook#modal-add-webhook) and:

  * Enter your server URL to receive webhook events
  * Select events to track

  <Frame background="subtle">
    ![transactional webhooks page](file:0bd4963c-4b6f-4426-9917-872aec02c5a6)
  </Frame>

  <Note>
    Manage webhooks via the API using [Create a webhook](/api-reference/accounts-and-settings/webhooks/create-webhook) and [Update a webhook](/api-reference/accounts-and-settings/webhooks/update-webhook).
  </Note>

  ### Send test email with tags

  After selecting the `delivered` event (or any other event), send a test email. Brevo POSTs event data to your URL when the event occurs.

  Add `tags` to identify events in your system:

  ```bash
  curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key: xkeysib-xxxxxxxxxxx' \
    --header 'content-type: application/json' \
    --data '{
    "sender":{"email":"sender@example.com"},
    "to":[{"email":"recipient@example.com"}],
    "replyTo":{"email":"sender@example.com"},
    "textContent":"This is a transactional email",
    "subject":"Subject Line",
    "tags":["myFirstTransactional"]
    }'
  ```

  ### Review webhook payload

  When your email is delivered, Brevo POSTs this payload to your webhook URL:

  ```json
  {
    "event": "delivered",
    "email": "example@example.com",
    "id": 26224,
    "date": "YYYY-MM-DD HH:mm:ss",
    "ts": 1598634509,
    "message-id": "<xxxxxxxxxxxx.xxxxxxxxx@domain.com>",
    "ts_event": 1598034509,
    "subject": "Subject Line",
    "tag": "[\"transactionalTag\"]",
    "sending_ip": "185.41.28.109",
    "ts_epoch": 1598634509223,
    "tags": [
      "myFirstTransactional"
    ]
  }
  ```

  The payload structure is consistent for all events of the same type.
</Steps>

See all event payload structures in the [webhook responses documentation](https://help.sendinblue.com/hc/en-us/articles/360007666479-Webhook-Responses-Email-Campaigns-Contacts).


***

title: Batch send transactional emails
subtitle: Send up to 1000 personalized email versions in a single API request
slug: docs/batch-send-transactional-emails
------------------------------------------

## Overview

Batch sending lets you send multiple personalized transactional emails in one API request. Instead of making 100 separate API calls, send up to 1000 message versions with different recipients, content, and variables in a single call.

<Note>
  If you're new to transactional emails, see the [Send a transactional email](/docs/send-a-transactional-email) guide first.
</Note>

## Before you start

<Steps>
  ### Get your API key

  Retrieve your API key from your [Brevo account settings](https://my.brevo.com/account/settings). See the [Authentication guide](/docs/authentication-schemes) for details.

  ### Configure your sender

  Set up your sending domain and sender before sending emails. See [how to set up your senders](https://help.brevo.com/hc/en-us/articles/208836149-Create-a-new-sender-From-name-and-From-email) for instructions.
</Steps>

## Sending limits

<Info title="Bulk sending limits">
  * Send up to 1000 email messages in one API call
  * Execute the endpoint up to 6000 times per hour (100 times per minute)

  This means you can send up to **6,000,000 email versions per hour**.
</Info>

## Choose your approach

Two approaches for batch sending:

| Approach           | Use when                                                          |
| ------------------ | ----------------------------------------------------------------- |
| **Custom HTML**    | You want to define HTML content directly in your API request      |
| **Brevo template** | You want to design emails in the Brevo editor and reuse templates |

## Send with custom HTML

Define HTML content directly in your API request. Each message version can override the base HTML and recipients.

<Steps>
  ### Define base HTML

  Create a base HTML template that serves as the default for all versions:

  ```html
  <!DOCTYPE html>
  <html>
  <body>
    <h1>Order Confirmation</h1>
    <p>Thank you for your order.</p>
  </body>
  </html>
  ```

  ### Build your request

  Create the API request with multiple message versions. Each version can override recipients, subject, and HTML content:

  ```curl
  curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key: YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{
      "sender": {
        "email": "sender@brevo.com",
        "name": "Brevo"
      },
      "subject": "Default subject line",
      "htmlContent": "<!DOCTYPE html><html><body><h1>Order Confirmation</h1><p>Thank you for your order.</p></body></html>",
      "messageVersions": [
        {
          "to": [
            {
              "email": "bob@example.com",
              "name": "Bob Anderson"
            },
            {
              "email": "anne@example.com",
              "name": "Anne Smith"
            }
          ],
          "htmlContent": "<!DOCTYPE html><html><body><h1>Order Confirmation</h1><p>Thank you, Bob and Anne! Your order has been processed.</p></body></html>",
          "subject": "Your order is confirmed"
        },
        {
          "to": [
            {
              "email": "jim@example.com",
              "name": "Jim Stevens"
            }
          ]
        }
      ]
    }'
  ```

  <Warning>
    Do not pass an outer `to` parameter. Define all recipients inside each message version. If you include an outer `to` parameter, the request will fail.
  </Warning>

  ### Use dynamic variables

  Use the `params` object to personalize content. Define placeholders in your HTML using `{{params.variableName}}`:

  ```json
  {
    "sender": {
      "email": "sender@brevo.com",
      "name": "Brevo"
    },
    "subject": "Order {{params.orderNumber}} confirmed",
    "htmlContent": "<!DOCTYPE html><html><body><h1>Order Confirmation</h1><p>Order {{params.orderNumber}} is confirmed. Estimated delivery: {{params.deliveryDate}}.</p></body></html>",
    "messageVersions": [
      {
        "to": [
          {
            "email": "bob@example.com",
            "name": "Bob Anderson"
          }
        ],
        "params": {
          "orderNumber": "ORD-12345",
          "deliveryDate": "December 15, 2024"
        },
        "subject": "Order ORD-12345 confirmed"
      },
      {
        "to": [
          {
            "email": "anne@example.com",
            "name": "Anne Smith"
          }
        ],
        "params": {
          "orderNumber": "ORD-67890",
          "deliveryDate": "December 16, 2024"
        },
        "subject": "Order ORD-67890 confirmed"
      }
    ]
  }
  ```

  ### Verify success

  A successful response returns a `messageIds` array with one ID per message version:

  ```json
  {
    "messageIds": [
      "xxxxxxxxxxxxx.xxxxxxxxxx.1@smtp-relay.mailin.fr",
      "xxxxxxxxxxxxx.xxxxxxxxxx.2@smtp-relay.mailin.fr"
    ]
  }
  ```

  Use these IDs to:

  * Check message status in [transactional logs](https://app.brevo.com/transactional/email/logs)
  * Track delivery events via [webhooks](/docs/send-a-transactional-email#tracking-your-transactional-activity-through-webhooks)
</Steps>

### Variables you can override

Each message version can override these variables:

* `cc` - Carbon copy recipients
* `bcc` - Blind carbon copy recipients
* `replyTo` - Reply-to address
* `subject` - Email subject line
* `params` - Dynamic variables for personalization
* `htmlContent` - HTML content of the email

## Send with a Brevo template

Create a template in the Brevo editor, then reference it by ID in your API request. This approach separates design from code and makes templates reusable.

<Steps>
  ### Create a transactional template

  Navigate to **Templates** under the **Transactional** tab and click **New Template**.

  <Frame background="subtle">
    ![New Template Button](file:037e91a4-fad4-420c-a70f-85950a7d74ce)
  </Frame>

  Define the template name and subject line. These serve as defaults that can be overridden in the API call.

  <Frame background="subtle">
    ![Template settings](https://files.readme.io/7180a21-Screenshot_2023-07-11_at_13.01.04.png)
  </Frame>

  Design your template and mark dynamic sections with placeholders. Use the format `{{params.variableName}}` for custom variables.

  <Frame background="subtle">
    ![Template design](https://files.readme.io/9f36744-Screenshot_2023-07-11_at_13.18.28.png)
  </Frame>

  <Frame background="subtle">
    ![Template placeholders](https://files.readme.io/6173e20-Screenshot_2023-07-11_at_13.31.13.png)
  </Frame>

  Click **Save and Activate** to save the template.

  <Frame background="subtle">
    ![Save and Activate](https://files.readme.io/7fd2b08-Screenshot_2023-07-11_at_13.38.50.png)
  </Frame>

  After saving, you'll be redirected to the templates list. Copy the template ID (e.g., **27**) - you'll need it for the API call.

  <Frame background="subtle">
    ![Template ID](https://files.readme.io/0000e36-Screenshot_2023-07-11_at_13.40.05.png)
  </Frame>

  <Info>
    Template placeholders using the `contact` object fetch values from your contact database. These cannot be overridden via the `params` object in the API call.
  </Info>

  ### Build your request

  Send the request with your template ID and override variables per message version:

  ```curl
  curl --request POST \
    --url https://api.brevo.com/v3/smtp/email \
    --header 'accept: application/json' \
    --header 'api-key: YOUR_API_KEY' \
    --header 'content-type: application/json' \
    --data '{
      "sender": {
        "email": "sender@brevo.com",
        "name": "Brevo"
      },
      "subject": "Default subject line",
      "templateId": 27,
      "params": {
        "greeting": "Hello",
        "headline": "Default headline"
      },
      "messageVersions": [
        {
          "to": [
            {
              "email": "bob@example.com",
              "name": "Bob Anderson"
            },
            {
              "email": "anne@example.com",
              "name": "Anne Smith"
            }
          ],
          "params": {
            "greeting": "Welcome onboard!",
            "headline": "Be Ready for Takeoff."
          },
          "subject": "We are happy to be working with you"
        },
        {
          "to": [
            {
              "email": "jim@example.com",
              "name": "Jim Stevens"
            },
            {
              "email": "mark@example.com",
              "name": "Mark Payton"
            },
            {
              "email": "andrea@example.com",
              "name": "Andrea Wallace"
            }
          ],
          "params": {
            "greeting": "Hello there",
            "headline": "Welcome to the team"
          }
        }
      ]
    }'
  ```

  <Warning>
    Do not pass an outer `to` parameter. Define all recipients inside each message version. If you include an outer `to` parameter, the request will fail.
  </Warning>

  ### Understand defaults and overrides

  Global values set outside `messageVersions` serve as defaults:

  * `subject` - Default subject line used if not overridden
  * `params` - Default variables used if not overridden

  Each message version can override these defaults. If a version doesn't specify a value, it uses the global default.

  ### Verify success

  A successful response returns a `messageIds` array with one ID per message version:

  ```json
  {
    "messageIds": [
      "xxxxxxxxxxxxx.xxxxxxxxxx.1@smtp-relay.mailin.fr",
      "xxxxxxxxxxxxx.xxxxxxxxxx.2@smtp-relay.mailin.fr"
    ]
  }
  ```

  Each message ID corresponds to one message version in your request. Use these IDs to:

  * Check message status in [transactional logs](https://app.brevo.com/transactional/email/logs)
  * Track delivery events via [webhooks](/docs/send-a-transactional-email#tracking-your-transactional-activity-through-webhooks)
</Steps>

### Variables you can override

Each message version can override these variables:

* `cc` - Carbon copy recipients
* `bcc` - Blind carbon copy recipients
* `replyTo` - Reply-to address
* `subject` - Email subject line
* `params` - Dynamic variables that render in the template placeholders
* `htmlContent` - HTML content (only if not using `templateId`)

<Info title="Template variables">
  The `params` object defines custom transactional attributes that render inside the template. Example placeholders:

  * `{{params.greeting}}` - Renders the greeting value
  * `{{params.headline}}` - Renders the headline value

  These must match the placeholders defined in your template.
</Info>

## Common patterns

### Send to multiple recipients with different content

Each message version can have different recipients and content:

```json
{
  "messageVersions": [
    {
      "to": [{"email": "customer1@example.com"}],
      "params": {"orderNumber": "ORD-001"}
    },
    {
      "to": [{"email": "customer2@example.com"}],
      "params": {"orderNumber": "ORD-002"}
    }
  ]
}
```

### Use defaults for some versions

Only override values when needed. Other versions use global defaults:

```json
{
  "subject": "Order confirmation",
  "params": {"greeting": "Thank you"},
  "messageVersions": [
    {
      "to": [{"email": "vip@example.com"}],
      "subject": "VIP Order confirmation",
      "params": {"greeting": "Thank you, valued customer"}
    },
    {
      "to": [{"email": "regular@example.com"}]
      // Uses default subject and params
    }
  ]
}
```

## Troubleshooting

### Error: Missing recipients

**Problem**: Request fails with recipient validation error.

**Solution**: Ensure all recipients are defined inside `messageVersions`. Remove any outer `to` parameter.

### Error: Template not found

**Problem**: Request fails with template ID error.

**Solution**: Verify the template ID exists and is activated in your Brevo account.

### Messages not received

**Solution**:

1. Check the `messageIds` in the response to confirm the request was accepted
2. Verify sender domain is authenticated
3. Check spam folders
4. Review [transactional logs](https://app.brevo.com/transactional/email/logs) for delivery status

## Next steps

* Learn about [idempotency in batch emails](/docs/batch-email-idempotency)
* Track your emails with [transactional webhooks](/docs/send-a-transactional-email#tracking-your-transactional-activity-through-webhooks)
* Review [API limits and quotas](/docs/platform-quotas)


***

title: Idempotency for batch emails
subtitle: >-
Prevent duplicate emails by using idempotency keys in batch transactional
email requests
slug: docs/heterogenous-versions-batch-emails
---------------------------------------------

When sending batch transactional emails, duplicate requests can cause the same emails to be sent multiple times. Use idempotency to ensure that identical requests are processed only once, preventing duplicate deliveries to recipients.

## How idempotency works

To enable idempotency, include an `idempotencyKey` header in your request. The API processes a request only once per unique key, ignoring subsequent requests with the same key within the time-to-live (TTL) period.

The `idempotencyKey` must be a UUID (Universally Unique Identifier). Generate a unique key for each distinct batch request. If you need to retry the exact same request, reuse the same key.

```json
"headers": {
    "idempotencyKey": "abcdef-123y-234f-567h-897y"
}
```

## Example request

Here's a complete request using the idempotency key:

```bash
curl --request POST \
     --url https://api.brevo.com/v3/smtp/email \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --data '{
     "sender": {
          "name": "Ann",
          "email": "example@brevo.com"
     },
     "to": [
          {
               "email": "example2@brevo.com",
               "name": "Jenny"
          }
     ],
     "headers": {
          "idempotencyKey": "b52dbf-81dd-4a08-b807-085c"
     },
     "subject": "This is a unique email",
     "templateId": 1
}'
```

## Time-to-live and error handling

The TTL for `idempotencyKey` is 30 minutes. After the TTL expires, you can reuse the same key for a new request.

<Warning>
  If you submit a request with an `idempotencyKey` that was used within the last 30 minutes, the API returns a `duplicate_parameter` error and does not process the request. This prevents duplicate emails from being sent.
</Warning>

## Using idempotency with message versions

Idempotency works with `messageVersions` for sending personalized batches. The same idempotency key applies to the entire batch, regardless of how many versions are included.

```json
{
    "sender": {
        "email": "sender@example.com",
        "name": "Brevo"
    },
    "subject": "This is my default subject line",
    "htmlContent": "<!DOCTYPE html><html><body><p>{{params.greeting}}</p></body></html>",
    "headers": {
        "idempotencyKey": "b530bf-810d-4a08-b807-075c"
    },
    "params": {
        "greeting": "This is my default greeting",
        "headline": "This is my default headline"
    },
    "messageVersions": [
        {
            "to": [
                {
                    "email": "bob@example.com",
                    "name": "Bob Anderson"
                },
                {
                    "email": "anne@example.com",
                    "name": "Anne Smith"
                }
            ],
            "params": {
                "greeting": "Welcome onboard!",
                "headline": "Be Ready for Takeoff."
            },
            "subject": "We are happy to be working with you"
        },
        {
            "to": [
                {
                    "email": "jim@example.com",
                    "name": "Jim Stevens"
                },
                {
                    "email": "mark@example.com",
                    "name": "Mark Payton"
                },
                {
                    "email": "andrea@example.com",
                    "name": "Andrea Wallace"
                }
            ],
            "params": {
                "greeting": "Hello there..."
            }
        }
    ]
}
```

<Note>
  When using `messageVersions` with an idempotency key, the API returns one message ID per version. In the example above, you'll receive two message IDs in the response—one for each message version.
</Note>



***

## slug: docs/schedule-batch-sendings

Scheduling transactional batches comes in handy when you need to send high volumes at the same time. If you hit the transactional endpoint in bursts at the same time you might have trouble handling all the asynchronous calls. Having the possibility to schedule ahead your send out makes it easier to process all the API calls in advance.

In this guide we will cover:

* [Defining scheduled batches](/docs/schedule-batch-sendings#defining-scheduled-batches)
* [Retrieving scheduled batches](/docs/schedule-batch-sendings#retrieve-scheduled-batches)
* [Canceling scheduled batches](/docs/schedule-batch-sendings#canceling-scheduled-batches)

## Defining scheduled batches

In order to define a scheduled batch or an individual scheduled message you need to make use of the `scheduledAt` parameter when calling the [Send a Transactional Message Endpoint.](/reference/send-transac-email) This parameter takes a standard ISO formatted datetime value to which you can specify a different timezone by adding hours like so :

*Note : You can schedule a message up to **72 hours** in the future (from the moment the API request is executed)*

```json
{
    "sender": {
        "email": "hello@brevo.com"
    },
    "subject": "This is my default subject line",
    "templateId": 43,
    "params": {
        "greeting": "This is the default greeting",
        "headline": "This is the default headline"
    },
    "scheduledAt":"2022-02-28T14:22:51.970+05:30",
    "messageVersions": [
        {
            "to": [
                {
                    "email": "recipient0@brevo.com"
                }
            ],
            "params": {
                "greeting": "Hello again!",
                "headline": "Take advantage of our summer deals, taylored just for you"
            },
            "subject": "Some deals worth to be looked at!"
        },
        {
            "to": [
                {
                    "email": "recipient1@brevo.com"
                }
            ],
            "params": {
                "greeting": "Hello Marie, we have prepared some exclusive summer deals for you.",
                "headline": "Some bathing suits you might like"
            },
            "subject": "Marie, new bathing suits are here."
        }
    ]
}
```

<Info title="Sending multiple correlated batches at a specific time.">
  If you would like to execute the transactional endpoint multiple times at a specific time in the future, you can easily track the state of your send outs by simply passing a `batchId` parameter, this will allow you to link all your messages to a unique identifier and simplify the overall tracking of your batch operations.

  We recommend making use of UUIDs for this purpose.

  **`batchId`: `275d3289-d5cb-4768-9460-a990054b6c81`**
</Info>

## Retrieve scheduled batches

Here is where we will make use of our earlier dicussed `batchId`. In the request parameters you simply need to pass your UUID value and you will get an API response containing all the information about the state of your scheduled job.

If you have scheduled a single transactional email , then you can simply pass the `messageId` you got in the API response from that action.

Endpoint: [Fetch scheduled emails by batchId or messageId](/reference/get-scheduled-email-by-id)

`GET https://api.brevo.com/v3/smtp/emailStatus/{identifier}`

<Info title="The `identifier` field should be either:">
  * The `messageId`,  if it's a single email.
  * The `batchId`,  if it's a batch sending.
</Info>

```json Response
{
  "count": 3,
  "batches": [
    {
      "scheduledAt": "2022-02-28T11:36:43.576000000Z",
      "createdAt": "2022-02-26T11:36:43.576000000Z",
      "status": "queued"
    },
    {
      "scheduledAt": "2022-02-25T11:36:43.576000000Z",
      "createdAt": "2022-02-24T11:36:43.576000000Z",
      "status": "processed"
    },
    {
      "scheduledAt": "2022-02-26T11:36:43.576000000Z",
      "createdAt": "2022-02-25T11:36:43.576000000Z",
      "status": "inProgress"
    }
  ]
}
```

## Canceling scheduled batches

In case you mistakenly scheduled one or a series of batch calls by mistake you can always delete them from the queue by passing the `batchId` this will abort the scheduled operation once you receive a successful response status.

Endpoint: [Delete scheduled emails by batchId or messageId](/reference/delete-scheduled-email-by-id)

`DELETE https://api.brevo.com/v3/smtp/email/{identifier}`

<Info title="The `identifier` field should be either:">
  * The `messageId`,  if it's a single email.
  * The `batchId`,  if it's a batch sending.
</Info>

You should receive a `204 status` code once the delete action has gone through.


***

## slug: docs/schedule-batch-sendings

Scheduling transactional batches comes in handy when you need to send high volumes at the same time. If you hit the transactional endpoint in bursts at the same time you might have trouble handling all the asynchronous calls. Having the possibility to schedule ahead your send out makes it easier to process all the API calls in advance.

In this guide we will cover:

* [Defining scheduled batches](/docs/schedule-batch-sendings#defining-scheduled-batches)
* [Retrieving scheduled batches](/docs/schedule-batch-sendings#retrieve-scheduled-batches)
* [Canceling scheduled batches](/docs/schedule-batch-sendings#canceling-scheduled-batches)

## Defining scheduled batches

In order to define a scheduled batch or an individual scheduled message you need to make use of the `scheduledAt` parameter when calling the [Send a Transactional Message Endpoint.](/reference/send-transac-email) This parameter takes a standard ISO formatted datetime value to which you can specify a different timezone by adding hours like so :

*Note : You can schedule a message up to **72 hours** in the future (from the moment the API request is executed)*

```json
{
    "sender": {
        "email": "hello@brevo.com"
    },
    "subject": "This is my default subject line",
    "templateId": 43,
    "params": {
        "greeting": "This is the default greeting",
        "headline": "This is the default headline"
    },
    "scheduledAt":"2022-02-28T14:22:51.970+05:30",
    "messageVersions": [
        {
            "to": [
                {
                    "email": "recipient0@brevo.com"
                }
            ],
            "params": {
                "greeting": "Hello again!",
                "headline": "Take advantage of our summer deals, taylored just for you"
            },
            "subject": "Some deals worth to be looked at!"
        },
        {
            "to": [
                {
                    "email": "recipient1@brevo.com"
                }
            ],
            "params": {
                "greeting": "Hello Marie, we have prepared some exclusive summer deals for you.",
                "headline": "Some bathing suits you might like"
            },
            "subject": "Marie, new bathing suits are here."
        }
    ]
}
```

<Info title="Sending multiple correlated batches at a specific time.">
  If you would like to execute the transactional endpoint multiple times at a specific time in the future, you can easily track the state of your send outs by simply passing a `batchId` parameter, this will allow you to link all your messages to a unique identifier and simplify the overall tracking of your batch operations.

  We recommend making use of UUIDs for this purpose.

  **`batchId`: `275d3289-d5cb-4768-9460-a990054b6c81`**
</Info>

## Retrieve scheduled batches

Here is where we will make use of our earlier dicussed `batchId`. In the request parameters you simply need to pass your UUID value and you will get an API response containing all the information about the state of your scheduled job.

If you have scheduled a single transactional email , then you can simply pass the `messageId` you got in the API response from that action.

Endpoint: [Fetch scheduled emails by batchId or messageId](/reference/get-scheduled-email-by-id)

`GET https://api.brevo.com/v3/smtp/emailStatus/{identifier}`

<Info title="The `identifier` field should be either:">
  * The `messageId`,  if it's a single email.
  * The `batchId`,  if it's a batch sending.
</Info>

```json Response
{
  "count": 3,
  "batches": [
    {
      "scheduledAt": "2022-02-28T11:36:43.576000000Z",
      "createdAt": "2022-02-26T11:36:43.576000000Z",
      "status": "queued"
    },
    {
      "scheduledAt": "2022-02-25T11:36:43.576000000Z",
      "createdAt": "2022-02-24T11:36:43.576000000Z",
      "status": "processed"
    },
    {
      "scheduledAt": "2022-02-26T11:36:43.576000000Z",
      "createdAt": "2022-02-25T11:36:43.576000000Z",
      "status": "inProgress"
    }
  ]
}
```

## Canceling scheduled batches

In case you mistakenly scheduled one or a series of batch calls by mistake you can always delete them from the queue by passing the `batchId` this will abort the scheduled operation once you receive a successful response status.

Endpoint: [Delete scheduled emails by batchId or messageId](/reference/delete-scheduled-email-by-id)

`DELETE https://api.brevo.com/v3/smtp/email/{identifier}`

<Info title="The `identifier` field should be either:">
  * The `messageId`,  if it's a single email.
  * The `batchId`,  if it's a batch sending.
</Info>

You should receive a `204 status` code once the delete action has gone through.


***

title: Using sandbox mode
subtitle: Test transactional emails without sending them using sandbox mode
slug: docs/using-sandbox-mode
-----------------------------

Use sandbox mode to test transactional email requests without sending actual emails. This lets you validate your API integration in a safe testing environment.

## How it works

Add the `X-Sib-Sandbox` header with the value `drop` to your request. In sandbox mode:

* No emails are sent to recipients
* No email logs are created in your Brevo account
* You receive a success response indicating the API endpoint is working correctly

## Example request

```bash
curl --request POST \
  --url https://api.brevo.com/v3/smtp/email \
  --header 'accept: application/json' \
  --header 'api-key: YOUR_API_KEY' \
  --header 'content-type: application/json' \
  --data '{
  "sender": {
    "name": "Sender Name",
    "email": "sender@example.com"
  },
  "headers": {
    "X-Sib-Sandbox": "drop"
  },
  "to": [
    {
      "email": "recipient@example.com",
      "name": "Recipient Name"
    }
  ],
  "htmlContent": "<!DOCTYPE html><html><body><h1>Confirm your email</h1><p>Please confirm your email address by clicking on the link below</p></body></html>",
  "textContent": "Please confirm your email address by clicking on the link https://text.domain.com",
  "subject": "Login Email confirmation"
}'
```

## Response

You receive a `201` success response with a `messageId`, but no email is sent:

```json
{
  "messageId": "<20x31xxx02xx.2004x1008xx@smtp-relay.mailin.fr>"
}
```

<Warning>
  Sandbox mode only validates the API request format. To test actual email delivery, send emails without the sandbox header.
</Warning>


***

title: Weekly event exports
subtitle: Export raw transactional event data for analytics
slug: docs/bulk-fetch-all-your-transactional-activity
-----------------------------------------------------

<PlanAvailability
  supportedPlans={{
    free: false,
    starter: false,
    standard: false,
    professional: true,
    enterprise: true
  }}
/>

Export raw transactional event data from the past 7 days as CSV files. Use this service for high-volume accounts that need unaggregated data for analytics pipelines.

The service sends a webhook to your notify URL with a link to the generated CSV file. For large data volumes, the export is delivered as a compressed file containing multiple CSV files.

## Supported events

Exports include the following transactional events:

| Event name    | API response field | Documentation                                               |
| ------------- | ------------------ | ----------------------------------------------------------- |
| Sent          | `requests`         | [Sent](/docs/transactional-webhooks#sent)                   |
| Clicked       | `clicks`           | [Clicked](/docs/transactional-webhooks#clicked)             |
| Deferred      | `deferred`         | [Deferred](/docs/transactional-webhooks#deferred)           |
| Delivered     | `delivered`        | [Delivered](/docs/transactional-webhooks#delivered)         |
| Soft Bounced  | `softBounces`      | [Soft Bounced](/docs/transactional-webhooks#soft-bounced)   |
| Complaint     | `spam`             | [Complaint](/docs/transactional-webhooks#complaint)         |
| First Opening | `unique_opened`    | [First Opening](/docs/transactional-webhooks#first-opening) |
| Hard Bounced  | `hardBounces`      | [Hard Bounced](/docs/transactional-webhooks#hard-bounced)   |
| Opened        | `opened`           | [Opened](/docs/transactional-webhooks#opened)               |
| Invalid Email | `invalid`          | [Invalid Email](/docs/transactional-webhooks#invalid-email) |
| Blocked       | `blocked`          | [Blocked](/docs/transactional-webhooks#blocked)             |
| Error         | `error`            | [Error](/docs/transactional-webhooks#error)                 |
| Unsubscribed  | `unsubscribed`     | [Unsubscribed](/docs/transactional-webhooks#unsubscribed)   |
| Proxy Open    | `loadedByProxy`    | [Proxy Open](/docs/transactional-webhooks#proxy-open)       |
| All events    | `allEvents`        | Fetches all events for the specified time period            |

<Note>
  Event name mappings between guides and API responses. See [Get personalized content of a sent Transactional email](/reference/get-transac-email-content) for reference.
</Note>

## Define a notify URL

Create a notify URL endpoint that receives the webhook with the CSV file link. The endpoint must return `success` to confirm receipt. Export data persists for 7 days.

**Example notify URL response**

```json
"success"
```

## Create an export job

Call the [Export all transactional events](/reference/export-webhooks-history) endpoint to create an export job. This example exports all events from the past 7 days. You can filter by specific event types.

```bash
curl --request POST \
     --url https://api.brevo.com/v3/webhooks/export \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --data '{
  "event": "allEvents",
  "type": "transactional",
  "days": 7,
  "notifyURL": "https://your-domain.com/webhook-export"
}'
```

## Response

The API returns a `processId` to track the export job status. Use the [Get process details](/reference/get-process) endpoint to check progress.

```json
{
  "processId": 1843555083931176858
}
```

## Receive export data

When the export job completes, your notify URL receives a webhook with the file location. Download the file promptly—export URLs expire after a set period.

```json
{
  "url": "https://webhooks-export.brevo.com/webhook-export-2036548-1680071958.zip?Expires=1680075559&KeyName=webhooks-export-cdn&Signature=sop8E-xYkUd8keGKb60CcIaPp0c=",
  "process_id": 1843555083931176858
}
```

## CSV format

The exported CSV file contains the following columns:

```csv
date,email,event,id,message-id,reason,sending_ip,subject,tag,tags,template_id,ts,ts_epoch,ts_event,X-Mailin-custom,link,s_returnpath
2023-03-15 11:09:22 +0000 UTC,user@example.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false
```

## Check export status

Query the export job status using the `processId` from the response. Call the [Get process details](/reference/get-process) endpoint.

```json
{
  "id": 1843555083931176858,
  "status": "completed",
  "name": "EXPORT_TRANSACTIONAL",
  "export_url": "https://webhooks-export.brevo.com/webhook-export-2036548-1680071958.zip?Expires=1680075559&KeyName=webhooks-export-cdn&Signature=sop8E-xYkUd8keGKb60CcIaPp0c="
}
```

<Warning>
  Maximum 20 export jobs per 7-day period. Large data volumes are delivered as compressed files containing multiple CSV files.
</Warning>


***

title: SMTP relay integration
subtitle: Configure the SMTP relay to send transactional emails from your email client
slug: docs/smtp-integration
---------------------------

Use the SMTP relay to send transactional emails from your email client or application. Send order confirmations, password resets, account creation notifications, and other automated messages.

## SMTP credentials

Retrieve your SMTP username and password from [SMTP and API settings](https://app.brevo.com/settings/keys/smtp). Under the "SMTP" tab, copy existing credentials or generate new ones.

<Frame background="subtle">
  ![SMTP credentials settings](file:e7da0518-43ed-43c7-a02d-2f20d5321f6a)
</Frame>

<Warning>
  Use an SMTP key, not an API key, for SMTP relay connections.
</Warning>

### Connection settings

**Ports:**

* **Non-encrypted**: Use ports 587 or 2525
* **Encrypted**: Use port 465 with SSL or TLS encryption

**Encryption:**

* Leave empty unless using port 465, which requires SSL or TLS encryption

## SMTP parameters

The following parameters are available for SMTP relay messages:

| Parameter         | Type             | Description                                                                                                                                        | Example                                                              |
| ----------------- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| `sender`          | Object           | Sender information. Required if `templateId` is not provided. Pass `name` (optional) and `email`, or `id`. If `id` is provided, `name` is ignored. | `{"name":"Support", "email":"no-reply@brevo.com"}` or `{"id":2}`     |
| `to`              | Array of objects | Recipient email addresses and names (optional). Required if `messageVersions` is not provided. Ignored if `messageVersions` is provided.           | `[{"name":"John", "email":"john@example.com"}]`                      |
| `bcc`             | Array of objects | BCC recipient email addresses and names (optional).                                                                                                | `[{"name":"Admin", "email":"admin@example.com"}]`                    |
| `cc`              | Array of objects | CC recipient email addresses and names (optional).                                                                                                 | `[{"name":"Manager", "email":"manager@example.com"}]`                |
| `htmlContent`     | String           | HTML body of the message. Required if `templateId` is not provided. Ignored if `templateId` is provided.                                           | `<!DOCTYPE html><html><body><p>Content</p></body></html>`            |
| `textContent`     | String           | Plain text body of the message. Ignored if `templateId` is provided.                                                                               | `"Plain text content"`                                               |
| `subject`         | String           | Email subject line. Required if `templateId` is not provided.                                                                                      | `"Your order confirmation"`                                          |
| `replyTo`         | Object           | Reply-to email address (required) and name (optional).                                                                                             | `{"email":"support@brevo.com", "name":"Support Team"}`               |
| `attachment`      | Array of objects | Attachments. Provide absolute URL (no local files) or base64-encoded content with attachment name. Name is required if content is provided.        | See attachment object attributes below                               |
| `headers`         | Object           | Custom headers (non-standard) to include in the email.                                                                                             | `{"X-Custom-Header":"value"}`                                        |
| `templateId`      | Int64            | Template ID to use for the email.                                                                                                                  | `2`                                                                  |
| `params`          | Object           | Template variables for customization. Only applies to templates using New Template Language format.                                                | `{"FNAME":"John", "LNAME":"Doe"}`                                    |
| `messageVersions` | Array of objects | Multiple message versions with personalized content. See API reference for details.                                                                | Contains multiple versions with same sender and recipient parameters |
| `tags`            | Array of strings | Tags to categorize and filter emails.                                                                                                              | `["order", "confirmation"]`                                          |
| `scheduledAt`     | date-time        | UTC date-time for scheduled delivery (YYYY-MM-DDTHH:mm:ss.SSSZ). Include timezone. Expected delay of up to 5 minutes. Currently in public beta.    | `2022-04-05T12:30:00+02:00`                                          |
| `batchId`         | String           | UUIDv4 batch identifier for scheduled batch transactional emails. Auto-generated if not provided.                                                  | `5c6cfa04-eed9-42c2-8b5c-6d470d978e9d`                               |

### Sender object

| Attribute | Type   | Description                                                                                     | Example                |
| --------- | ------ | ----------------------------------------------------------------------------------------------- | ---------------------- |
| `name`    | String | Sender display name. Maximum 70 characters. Only applicable when `email` is provided.           | `"Support Team"`       |
| `email`   | String | Sender email address. Required if `id` is not provided.                                         | `"no-reply@brevo.com"` |
| `id`      | Int64  | Sender ID. Use to select a sender with a specific IP pool. Required if `email` is not provided. | `2`                    |

### Recipient objects (to, bcc, cc)

| Attribute | Type   | Description                                    | Example              |
| --------- | ------ | ---------------------------------------------- | -------------------- |
| `email`   | String | Recipient email address.                       | `"user@example.com"` |
| `name`    | String | Recipient display name. Maximum 70 characters. | `"John Doe"`         |

### Reply-to object

| Attribute | Type   | Description                                   | Example               |
| --------- | ------ | --------------------------------------------- | --------------------- |
| `email`   | String | Reply-to email address.                       | `"support@brevo.com"` |
| `name`    | String | Reply-to display name. Maximum 70 characters. | `"Support Team"`      |

### Attachment object

| Attribute | Type   | Description                                                    | Example                                |
| --------- | ------ | -------------------------------------------------------------- | -------------------------------------- |
| `url`     | URL    | Absolute URL of the attachment. Local files are not supported. | `"https://example.com/attachment.pdf"` |
| `content` | String | Base64-encoded attachment content.                             | `"b3JkZXIucGRm"`                       |
| `name`    | String | Attachment filename. Required if `content` is provided.        | `"invoice.pdf"`                        |

### Headers object

Custom headers are key-value pairs. The key is the header name, and the value is the header value. Only non-standard headers are supported.

<Info>
  The SMTP relay does not support batch sending. Use the batch sending API endpoints for batch operations. The SMTP relay is designed for transactional emails.
</Info>

<Tip>
  To improve deliverability for B2B emails, consult [Brevo IP ranges](https://help.brevo.com/hc/en-us/articles/208848409--Brevo-IP-ranges-improve-the-deliverability-of-B2B-emails) from the help center.
</Tip>


***

## slug: docs/using-the-smtp-relay-with-postfix

## Postfix configuration with Brevo SMTP

1. For Postfix, you need to setup the SASL authentication. For that, you have to access  the `/etc/postfix/sasl_passwd` file in the local postfix directory and add your SMTP credentials.

```
[smtp-relay.brevo.com]:587 USERNAME:master_password
```

2. Use `sudo postmap /etc/postfix/sasl_passwd` to update the credentials in `sasl_passwd`. For username, you can put the master password from your Brevo account. You can find the master password in SMTP and API menu in the top-right. Next we will update the `main.cf` file in Postfix.

```
relayhost = [smtp-relay.brevo.com]:587
```

if the relay does not allow IPv6 connections then you can adjust the value of `inet_protocols` to IPv4 in the `main.conf` file.

3. You can now restart Postfix with the command `sudo service postfix restart` and send a test email by using the command below.

```
date | mail -s "Test Email" YOUR_EMAIL@brevo.com
```

Note: In case of errors, check mailq or check in the log file for Postfix. If you receive an authentication error, then you may have entered incorrect credentials or the changes in `sasl_passwd` file may not be saved.


***

## slug: docs/node-smtp-relay-example

You can use this Node.js code and enter your own details to run the smtp relay.

### Install nodemailer in your Node project

Run this command in your working directory

```javascript
npm install nodemailer
```

### Include the library in your working class

```javascript
const nodemailer = require("nodemailer");
```

### Declare your SMTP credentials

You should specify your Brevo credentials in order to establish a connection between our server and your application. You will need to make use of the `createTransport` obeject to define these values.

```javascript
  let transporter = nodemailer.createTransport({
    host: "smtp-relay.brevo.com",
    port: 587,
    secure: false, // true for 465, false for other ports
    auth: {
      user: "example@brevo.com", // generated ethereal user
      pass: "xxxxxxxxx", // generated ethereal password
    },
  });
```

### Compose your email object

Next, specify the content and metadata of the email message you want to send through the previously declared transporter object. In this example we have only included text content, but you can also make use of a predefined `templateId` .

```javascript


  // send mail with defined transport object
  let info = await transporter.sendMail({
    from: '"Joe" example@brevo.com', // sender address
    to: "hi@mail.com", // list of receivers
    subject: "Hello ✔", // Subject line
    text: "Hello {{ contact.FIRSTNAME }} , This is an SMTP message with customizations", // plain text body
  });


```

### Trigger your email

Next, specify the content and metadata of the email message you want to send through the previously declared transporter object. In this example we have only included text content, but you can also make use of a predefined templateId. Here you can also see the full example we just went through.

```javascript
const nodemailer = require("nodemailer");

async function main() {
  

  // create reusable transporter object using the default SMTP transport
  let transporter = nodemailer.createTransport({
    host: "smtp-relay.brevo.com",
    port: 587,
    secure: false, // true for 465, false for other ports
    auth: {
      user: "user@brevo.com", // generated brevo user
      pass: "xxxxxxxxx", // generated brevo password
    },
  });

  // send mail with defined transport object
  let info = await transporter.sendMail({
    from: '"mauricio@brevo.com', // sender address
    to: "john@domain.com", // list of receivers
    subject: "Hello ✔", // Subject line
    text: "Hello {{ contact.FIRSTNAME }} , This is an SMTP message with customizations", // plain text body
  });

  console.log("Message sent: %s", info.messageId);
  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>
}

main().catch(console.error);
```

Note: This example is if you want to add more customisations into your SMTP email, it will take the attributes if the contact exists within Brevo. You can this JS code in a file through the command line interface or through the API endpoint for [Send a Transactional Email](/reference/send-transac-email).


***

## slug: docs/deleting-transactional-logs-based-on-recipient-address-to

### Use the log deletion endpoint to start a deletion job.

Start the deletion by defining the recipient address you would like to completely erase from the database by executing the [transactional deletion endpoint](/reference/delete-an-smtp-transactional-log) with the following properties.

```
curl --request DELETE \
     --url https://api.brevo.com/v3/smtp/log/recipient@brevo.com \
     --header 'accept: application/json'
```

### Execute the call.

When you specify the address and execute the call you will receive as a response a `process_id` which indicates an asynchronous deletion job is running.

Optional:You can retrieve the status of the asynchronous job by querying the "[Return the informations for a process](/reference/get-process)" endpoint.

```
curl --request GET \
     --url https://api.brevo.com/v3/processes/352351 \
     --header 'accept: application/json'
```

### Verify the actions.

Option 1: You can verify the deletion actions, once completed, by accessing the [logs view](https://app-smtp.brevo.com/log). Type the recipient address , result set should be 0.

Option 2: You can verify the deletion actions by querying the following [endpoint](/reference/get-transac-emails-list)



***

## slug: docs/inbound-parse-webhooks

## What is inbound parsing?

Receiving email is a much harder task than sending email for developers since there's no easy way to retrieve the actual message from naturally-unstructured incoming emails. "A real pain" or "a headache" is what developers usually answer when asked about processing incoming emails.

This leads to poor user experiences when emails that are meant to be replied (e.g. messages from buyers on a marketplace) come from a no-reply address and feature a "Reply" button that takes the user to a cumbersome reply flow on an app or website.

## Inbound parsing at Brevo

The parsing technology at Brevo comes from the acquisition of the MailClark startup, whose technology has converted millions and millions of unstructured emails into formatted chat messages since 2015. Using state-of-the-art algorithms and machine learning techniques, the actual message and signatures are retrieved from raw emails and converted into Markdown.

Emails are received and processed on our end, and are then sent to you as a structured JSON payload (described in the next chapter) via a webhook.

## Setting up your Inbound parsing webhook

### Preparing your domain

For the set-up, you will need to determine two things first:

* The **receiving domain** (or subdomain) for the emails to be parsed. It must be a different domain than the one used for sending email. We recommend creating a subdomain such as `reply.yourdomain.com`.
* The **webhook URL** that Brevo will call to send the events when an inbound email has been parsed.

Make sure that your domain is [verified with Brevo](https://help.sendinblue.com/hc/en-us/articles/115000185270).

Then, you will need to delegate the receiving domain to Brevo: This is done by updating your DNS configuration for `reply.yourdomain.com` so that emails sent to this domain are received on Brevo servers. There are 2 records that you need to add:

| Record domain          | Record Type | Record Priority | Record value               |
| :--------------------- | :---------- | :-------------- | :------------------------- |
| `reply.yourdomain.com` | MX          | 10              | `inbound1.sendinblue.com.` |
| `reply.yourdomain.com` | MX          | 20              | `inbound2.sendinblue.com.` |

<Warning>
  DNS changes can take several hours to spread over the internet, so it's important to do this configuration as soon as possible.
</Warning>

### Creating the webhook

The same endpoints used to [create, get, update and delete webhooks](/reference/get-webhooks) for Marketing and Transactional events are available to manage Inbound parsing webhooks.

As you can see in the sample POST request below, the differences compared to events-related webhooks are:

* Use `inbound` for `type` and `inboundEmailProcessed` for `events`
* Specify your receiving `domain`

```json POST https://api.brevo.com/v3/webhooks
//example
{
   "type": "inbound",
   "events": ["inboundEmailProcessed"],
   "url":"https://hook.znapi.cc/ix0v9y", //Your ingress
   "domain": "reply.yourdomain.com",
   "description":"Webhook to receive replies"
}
```

With the above configuration, any email sent to `*@reply.yourdomain.com` will be received by our API, parsed and converted to JSON, and the result POST-ed to `http://example.domain.com/1brxxxxxx5p1`.

## Parsed email payload

The JSON body will contain a top-level `items` array, listing the emails that were received. Each email will have the following properties:

| Inbound email property       | Data type                    | Description                                                                                                                                                                           |
| ---------------------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Uuid`                       | string\[]                    | A list of recipients `UUID` (can be used with the [Public API](#future-public-api-endpoints))                                                                                         |
| `MessageId`                  | string                       | The `Message-ID` header of the inbound email.                                                                                                                                         |
| `InReplyTo`                  | ?string                      | `Message-ID` of the original email this one replies to (if applicable)                                                                                                                |
| `From`                       | Mailbox                      | Author of the email (the person who sent it)                                                                                                                                          |
| `To`                         | Mailbox\[]                   | The primary recipients of the email                                                                                                                                                   |
| `Recipients`                 | Mailbox\[]                   | RCPT TO recipients                                                                                                                                                                    |
| `Cc`                         | Mailbox\[]                   | The secondary/informational recipients of the email                                                                                                                                   |
| `ReplyTo`                    | ?Mailbox                     | Where replies to this email should be sent (if different than the author in the `From` property)                                                                                      |
| `SentAtDate`                 | string                       | The `Date` header of the inbound email (format should be RFC822)                                                                                                                      |
| `Subject`                    | string                       | The `Subject` header of the inbound email                                                                                                                                             |
| `RawHtmlBody`                | ?string                      | The HTML version of the inbound email                                                                                                                                                 |
| `RawTextBody`                | ?string                      | The text version of the inbound email                                                                                                                                                 |
| `ExtractedMarkdownMessage`   | string                       | The markdown version that was extracted by the Brevo parsing (without the signature)                                                                                                  |
| `ExtractedMarkdownSignature` | ?string                      | The signature that was recognized by the Brevo parsing                                                                                                                                |
| `Spam.Score`                 | float                        | Spam is an object with a Score property. It is calculating using *rspamd* (it's not extracted from the headers).                                                                      |
| `Attachments`                | Attachment\[]                | The list of attachments included in the inbound email.                                                                                                                                |
| `Headers`                    | array of string or \[]string | The complete headers list of the inbound email.  <br />Headers that appear once will be sent as a `string`. Headers that appear multiple times will be sent as an array of `string[]` |

### The Mailbox object

| Mailbox property | Data type | Description                 |
| :--------------- | :-------- | :-------------------------- |
| `Address`        | string    | Email address of the person |
| `Name`           | ?string   | Name of the person          |

### The Attachment object

Use the `DownloadToken`(see below) to [retrieve attachments using this endpoint](/reference/get-inbound-email-attachment).

| Attachment property | Data type | Description                                                                              |
| :------------------ | :-------- | :--------------------------------------------------------------------------------------- |
| `Name`              | string    | Name of the attachment                                                                   |
| `ContentType`       | string    | Content-Type of the attachment                                                           |
| `ContentLength`     | integer   | Estimated size of the attachment                                                         |
| `ContentID`         | string    | ID used to reference the content in the HTML version (if applicable, e.g. inline images) |
| `DownloadToken`     | string    | Token needed to fetch the attachment                                                     |

### Sample payload

```json Webhook JSON payload
{
    "items": [
        {
            "Uuid": [
                "1a825d56-029b-4a41-b8e4-61670463431b"
             ],
            "MessageId": "<CAN0zNmMsj_xOx8hCREv3rbovcYE3m5rZh8eRe+QSKC0yff_W6A@mail.gmail.com>",
            "InReplyTo": "<e6df8cf2-cfb2-2cb6-320f-d9cba05a3001@clubble.me>",
            "From": {
                "Name": "Antoine Lefeuvre",
                "Address": "antoine@mailclark.ai"
            },
            "To": [
                {
                    "Name": "Terry Estill",
                    "Address": "test@clubble.me"
                }
            ],
            "Recipients": [
                     "test-2023-08-02@sib-inbound.esperat.fr"
            ],
            "Cc": [],
            "ReplyTo": null,
            "SentAtDate": "Tue, 1 Sep 2020 09:53:21 +0200",
            "Subject": "Re: Summer brochure 2021",
            "RawHtmlBody": "<div dir=\"ltr\">Hi Terry,<br />Nice to hear from you, I hope you&#39;re well.<br />Sure, our summer brochure is already out \ud83d\ude0e! I&#39;ve attached it <b>together with our winter brochure\u00a0<\/b>\u26c4.<br /><br />I&#39;ve heard you&#39;re a massive fan of <a href=\"https:\/\/en.wikipedia.org\/wiki\/Rubber_duck_debugging\">rubber ducks<\/a>, so I wanted to share with you this picture I took this summer. <i>Amazing, eh?<\/i><div><div><img src=\"cid:ii_kejngtlh0\" alt=\"duck1.png\" width=\"294\" height=\"196\" style=\"margin-right: 0px;\"><br /><\/div><br />Any questions (about the brochures, not the ducks \ud83d\ude1c), I&#39;d\u00a0be happy to help.<br /><br />Speak soon,\u00a0\u00a0<br clear=\"all\"><div><div dir=\"ltr\" class=\"gmail_signature\" data-smartmail=\"gmail_signature\"><div dir=\"ltr\"><div><div dir=\"ltr\"><div><div dir=\"ltr\"><b>Antoine Lefeuvre<\/b><br />Co-founder &amp; Product Manager at <a href=\"https:\/\/mailclark.ai\" target=\"_blank\">MailClark<\/a><br /><a href=\"mailto:antoine@mailclark.ai\" target=\"_blank\">antoine@mailclark.ai<\/a><br /><a href=\"https:\/\/twitter.com\/jiraisurfer\" target=\"_blank\">Twitter<\/a> <a href=\"https:\/\/www.linkedin.com\/in\/lefeuvre\" target=\"_blank\">LinkedIn<\/a><br /><i>Sent with MailClark<\/i><br /><\/div><\/div><\/div><\/div><\/div><\/div><\/div><br /><\/div><\/div><br /><div class=\"gmail_quote\"><div dir=\"ltr\" class=\"gmail_attr\">On Tue, 1 Sep 2020 at 09:43, Terry Estill &lt;<a href=\"mailto:test@clubble.me\">test@clubble.me<\/a>&gt; wrote:<br /><\/div><blockquote class=\"gmail_quote\" style=\"margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex\">\n  \n    \n  \n  <div bgcolor=\"#FFFFFF\">\n    <p>Hi there, I hope things with you are good.<br />\n      <br />\n      I was wondering whether your brochure for the summer next year was\n      already available. I&#39;m willing to start planning asap.<br />\n      <br />\n      Best,<br />\n    <\/p>\n    <div>-- <br />\n      <strong>Terry Estill<\/strong>\u2014Cofounder &amp; CEO<br />\n      <em>The Wheat Assembly - Le Club Bl\u00e9<\/em><br />\n      <a href=\"mailto:test@clubble.me\" target=\"_blank\">test@clubble.me<\/a><br />\n      <a href=\"http:\/\/www.clubble.me\" target=\"_blank\">www.clubble.me<\/a><\/div>\n  <\/div>\n\n<\/blockquote><\/div>\n",
            "RawTextBody": "Hi Terry,\nNice to hear from you, I hope you're well.\nSure, our summer brochure is already out \ud83d\ude0e! I've attached it *together\nwith our winter brochure *\u26c4.\n\nI've heard you're a massive fan of rubber ducks\n<https:\/\/en.wikipedia.org\/wiki\/Rubber_duck_debugging>, so I wanted to share\nwith you this picture I took this summer. *Amazing, eh?*\n[image: duck1.png]\n\nAny questions (about the brochures, not the ducks \ud83d\ude1c), I'd be happy to help.\n\nSpeak soon,\n*Antoine Lefeuvre*\nCo-founder & Product Manager at MailClark <https:\/\/mailclark.ai>\nantoine@mailclark.ai\nTwitter <https:\/\/twitter.com\/jiraisurfer> LinkedIn\n<https:\/\/www.linkedin.com\/in\/lefeuvre>\n*Sent with MailClark*\n\n\nOn Tue, 1 Sep 2020 at 09:43, Terry Estill <test@clubble.me> wrote:\n\n> Hi there, I hope things with you are good.\n>\n> I was wondering whether your brochure for the summer next year was already\n> available. I'm willing to start planning asap.\n>\n> Best,\n> --\n> *Terry Estill*\u2014Cofounder & CEO\n> *The Wheat Assembly - Le Club Bl\u00e9*\n> test@clubble.me\n> www.clubble.me\n>\n",
            "ExtractedMarkdownMessage": "Hi Terry,  \nNice to hear from you, I hope you're well.  \nSure, our summer brochure is already out \ud83d\ude0e! I've attached it **together with our winter brochure**\u00a0\u26c4.  \n\nI've heard you're a massive fan of [rubber ducks](https:\/\/en.wikipedia.org\/wiki\/Rubber_duck_debugging), so I wanted to share with you this picture I took this summer. *Amazing, eh?*  \n\n[duck1.png](ii_kejngtlh0)  \n\nAny questions (about the brochures, not the ducks \ud83d\ude1c), I'd\u00a0be happy to help.  \n\nSpeak soon,\u00a0\u00a0  \n",
            "ExtractedMarkdownSignature": "**Antoine Lefeuvre**  \nCo-founder &amp; Product Manager at [MailClark](https:\/\/mailclark.ai)  \n[antoine@mailclark.ai](mailto:antoine@mailclark.ai)  \n[Twitter](https:\/\/twitter.com\/jiraisurfer) [LinkedIn](https:\/\/www.linkedin.com\/in\/lefeuvre)  \n*Sent with MailClark*",
            "SpamScore": 3.3,
            "Attachments": [
                {
                    "Name": "duck1.png",
                    "ContentType": "image\/png",
                    "ContentLength": 330518,
                    "ContentID": "ii_kejngtlh0",
                  	"DownloadToken": "abc"
                },
                {
                    "Name": "summer2021.pdf",
                    "ContentType": "application\/pdf",
                    "ContentLength": 168910,
                    "ContentID": "f_kejnjyug1",
                  	"DownloadToken": "def"
                },
                {
                    "Name": "winter2020-2021.pdf",
                    "ContentType": "application\/pdf",
                    "ContentLength": 113007,
                    "ContentID": "f_kejnjyv02",
                  	"DownloadToken": "xyz"
                }
            ],
            "Headers": {
                "Return-Path": "<antoine@mailclark.ai>",
                "Delivered-To": "test@clubble.me",
                "Received": [
                    "from spool.mail.gandi.net (spool5.mail.gandi.net [217.70.178.214]) by nmboxes20.sd4.0x35.net (Postfix) with ESMTP id 7115220256 for <test@clubble.me>; Tue,  1 Sep 2020 07:53:43 +0000 (UTC)",
                    "from sender4-of-o51.zoho.com (sender4-of-o51.zoho.com [136.143.188.51]) by spool.mail.gandi.net (Postfix) with ESMTPS id 4B618D80F65 for <test@clubble.me>; Tue,  1 Sep 2020 07:53:41 +0000 (UTC)",
                    "from mail-ot1-f42.google.com (mail-ot1-f42.google.com [209.85.210.42]) by mx.zohomail.com with SMTPS id 1598946814954566.0226921077056; Tue, 1 Sep 2020 00:53:34 -0700 (PDT)",
                    "by mail-ot1-f42.google.com with SMTP id a65so390247otc.8 for <test@clubble.me>; Tue, 01 Sep 2020 00:53:34 -0700 (PDT)"
                ],
                "ARC-Seal": "i=1; a=rsa-sha256; t=1598946818; cv=none;  d=zohomail.com; s=zohoarc;  b=A7jKTJCD9ieoEKAPtoZpyxtuJQp8ek0cIqCbf2HUvJkkVYmXIhI6jiLtYaR6Sm0Et5r\/E5vFPowt6RjFtWaDaz7UoW9CIiePJkEkGHgHhQ343s2IUWlADGGsCEPskwCvlJvn3tVSiABgQLIsf6FaqfkDZEOYtejRC786Jlb8eT8=",
                "ARC-Message-Signature": "i=1; a=rsa-sha256; c=relaxed\/relaxed; d=zohomail.com; s=zohoarc;  t=1598946818; h=Content-Type:Date:From:In-Reply-To:MIME-Version:Message-ID:References:Subject:To;  bh=CgBV\/y5azQ9uDe+uFDrdGKiTQx6DwkxdL1XwOip9ZEU=;  b=XuCp2CYwXDNo5dDdBML4beYI+IUT4+81Pr78RmDWpoaQfumm22YX3TF2tjITVtYnqmUDbLUoR4bBmPgrPIUWxsOc+omLlpg2FyjXO8Xyw\/MCazKZhrUuHaIvsMbV\/QOZLavGITgKtTVw8iMg2M1hVz8Ay8VKqG\/oFkbJxbzdZh8=",
                "ARC-Authentication-Results": "i=1; mx.zohomail.com; dkim=pass  header.i=mailclark.ai; spf=pass  smtp.mailfrom=antoine@mailclark.ai; dmarc=pass header.from=<antoine@mailclark.ai> header.from=<antoine@mailclark.ai>",
                "DKIM-Signature": "v=1; a=rsa-sha256; q=dns\/txt; c=relaxed\/relaxed; t=1598946818; s=zoho; d=mailclark.ai; i=antoine@mailclark.ai; h=MIME-Version:References:In-Reply-To:From:Date:Message-ID:Subject:To:Content-Type; bh=CgBV\/y5azQ9uDe+uFDrdGKiTQx6DwkxdL1XwOip9ZEU=; b=i4YJj1RFryuXbHDh8E9oKZv3+e6Kzat5oAxwuLZV4w\/t2b1rTBP\/qGMArXvuSRAz lNZvfJj4Kf7VD7nQMRrm8EdXGyuWPvVfjBU9PQjFs\/6GkANzLJW5PGGXZrlDXFIpiHH e5tmnYmFSfplAMsyZokpm5oDjT2whR34YZCGcUOg=",
                "X-Gm-Message-State": "AOAM530ChFmHzQDIPhTYzy4S5fs4ciUbgttaJYjt92mK62LXV52RGa7h zEkGPJ3KsDnCA7b9DrENpVFt\/zojNvW+Ha4nVbU=",
                "X-Google-Smtp-Source": "ABdhPJxFuLbNc8G\/rGIwkCPsDITPakKQW3VZe3+48by7auFyBNSjppLNydYymK21mcORQgOG5fYNeJkXu3+EPkerxj0=",
                "X-Received": "by 2002:a9d:58c8:: with SMTP id s8mr541588oth.292.1598946813444; Tue, 01 Sep 2020 00:53:33 -0700 (PDT)",
                "MIME-Version": "1.0",
                "References": "<e6df8cf2-cfb2-2cb6-320f-d9cba05a3001@clubble.me>",
                "In-Reply-To": "<e6df8cf2-cfb2-2cb6-320f-d9cba05a3001@clubble.me>",
                "From": "Antoine Lefeuvre <antoine@mailclark.ai>",
                "Date": "Tue, 1 Sep 2020 09:53:21 +0200",
                "X-Gmail-Original-Message-ID": "<CAN0zNmMsj_xOx8hCREv3rbovcYE3m5rZh8eRe+QSKC0yff_W6A@mail.gmail.com>",
                "Message-ID": "<CAN0zNmMsj_xOx8hCREv3rbovcYE3m5rZh8eRe+QSKC0yff_W6A@mail.gmail.com>",
                "Subject": "Re: Summer brochure 2021",
                "To": "Terry Estill <test@clubble.me>",
                "Content-Type": "multipart\/mixed",
                "X-Zoho-Virus-Status": "1",
                "X-ZohoMailClient": "External",
                "X-GND-Status": "LEGIT",
                "Received-SPF": "pass (spool5: domain of mailclark.ai designates 136.143.188.51 as permitted sender) client-ip=136.143.188.51; envelope-from=antoine@mailclark.ai; helo=sender4-of-o51.zoho.com;"
            }
        }
    ]
}
```

## Logs and inbound email parsing activity

Two endpoints are available for you to access logs and monitor inbound parsing activity:

1. [List and filter by date and/or sender the emails received](/reference/get-inbound-email-events) via your Inbound parsing webhook.

2. [Get the full details for one particular email](/reference/get-inbound-email-events-by-uuid) received via your Inbound parsing webhook.

## Ongoing improvement

Given the diversity of email apps, human languages and formatting possibilities, it is impossible to guarantee a 100% success rate on inbound parsing. Nevertheless, we constantly keep on bettering the performance of our parsing engine—you can participate in this ongoing improvement by reporting parsing failures.

It is important to note that depending on the reason behind the parsing failure, we might or might not be able to correct a given error. If, for instance, quoted replies weren't stripped because an email app uses an unusual formatting, we can integrate this unknown formatting to our algorithm and this will correct your problem once the parsing engine is updated. On the other hand, if a segment was wrongly identified as a signature, we won't necessarily be able to correct your particular error since signature detection uses machine learning. But your failure reports do help our data scientists fine tune what they "teach" the machine.

Please send your failure report to contact at brevo.com with the following details:

* **Subject line: Inbound Parsing API Failure**
* JSON payload (or relevant excerpt of the payload + UUID)
* Reason of failure:
  * Quoted replies not removed from `ExtractedMarkdownMessage`
  * Signature not removed `ExtractedMarkdownMessage`
  * Truncated `ExtractedMarkdownMessage`
  * Truncated or empty `ExtractedMarkdownSignature`
  * Message content wrongly detected as `ExtractedMarkdownSignature`


***

## slug: docs/transactional-sms-endpoints

Transactional SMS provides solution for non-promotional sms using the recipients contact number instead of email address. It is used to send notifications and confirmations like making an online order.

## Requirements

Get your <Tooltip tip="The unique identifier related to your account that is used to authenticate requests made to SendinBlue API. Get it from your settings (SMTP & API) and pass it to your request header under the key api-key.">API key</Tooltip> from [your settings (SMTP & API)](https://account.sendinblue.com/advanced/api).

If you are new to the API, read more about [how the api works](/docs/how-it-works).

<br />

## Send SMS message to a mobile number

<Info title="Additional info for `type` and `content` params">
  `type` param: To ensure the \[STOP CODE] is correctly substituted, you must specify the type as "marketing" when using the transactional SMS API endpoint. If your SMS content includes \[STOP CODE], select the type as "marketing."

  `content` param when `type` is marketing: On some routes, the short code will automatically replace the alphanumeric SenderID if you do not add an opt-out \[STOP CODE].
</Info>

This endpoint uses the endpoint `https://api.brevo.com/v3/transactionalSMS/send` with the POST method. A sample cURL request is:

```curl
curl --request POST \
     --url https://api.brevo.com/v3/transactionalSMS/send \
     --header 'accept: application/json' \
     --header 'api-key: YOUR-API-KEY' \
     --header 'content-type: application/json' \
     --data '
{
  "sender": "MyShop",
  "recipient": "33680065433",
  "content": "Enter this code:CAAA08 to validate your account",
  "type": "marketing",
  "tag": "\"tag1\" OR [\"tag1\", \"tag2\"]",
  "webUrl": "http://requestb.in/100lyyx1",
  "unicodeEnabled": true,
  "organisationPrefix": "MyCompany"
}
'

```

The params are mentioned below:

| Attribute name     | Datatype | Description                                                                                                                                                                                                                                                                                          | Value                                           |
| ------------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- |
| sender             | String   | Name of the sender. The number of characters is limited to 11 for alphanumeric characters and 15 for numeric characters                                                                                                                                                                              | MyShop                                          |
| recipient          | String   | Mobile number to send SMS with the country code                                                                                                                                                                                                                                                      | 33680005003                                     |
| content            | String   | Content of the message. If more than 160 characters long, will be sent as multiple text messages                                                                                                                                                                                                     | Enter this code:CCJJG8 to validate your account |
| type               | String   | Type of the SMS. Marketing SMS messages are those sent typically with marketing content. Transactional SMS messages are sent to individuals and are triggered in response to some action, such as a sign-up, purchase, etc.                                                                          | Choice of Transactional and Marketing           |
| tag                | String   | Tag of the message                                                                                                                                                                                                                                                                                   | accountValidation                               |
| webUrl             | Url      | Webhook to call for each event triggered by the message (delivered etc.)                                                                                                                                                                                                                             | `http://requestb.in/173lyyx1`                   |
| unicodeEnabled     | Boolean  | Format of the message. It indicates whether the content should be treated as unicode or not.                                                                                                                                                                                                         | Boolean true or false                           |
| organisationPrefix | String   | A recognizable prefix will ensure your audience knows who you are. Recommended by U.S. carriers. This will be added as your Brand Name before the message content. Prefer verifying maximum length of 160 characters including this prefix in message content to avoid multiple sending of same sms. | Brand name like **My Company**                  |

The response for a successful 201 request is shown here:

```json
{  
  "messageId": 1511882900100020,  
}
```

A `400`  error code means you sent a bad request.

## Get your SMS activity aggregated over a period of time

This request uses the endpoint `https://api.brevo.com/v3/transactionalSMS/statistics/aggregatedReport` with the GET method. You can send a request with the cURL request below:

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/transactionalSMS/statistics/aggregatedReport?startDate=&endDate=&days=23&tag=' \
     --header 'accept: application/json' \
     --header 'api-key: '
```

There are some query params which are mentioned below.

| Attribute | Datatype | Description                                                                                              | Value      |
| :-------- | :------- | :------------------------------------------------------------------------------------------------------- | :--------- |
| startDate | String   | Mandatory if endDate is used. Starting date (YYYY-MM-DD) of the report                                   | 2024-01-25 |
| endDate   | String   | Mandatory if startDate is used. Ending date (YYYY-MM-DD) of the report                                   | 2024-02-25 |
| days      | int64    | Number of days in the past including today (positive integer). Not compatible with startDate and endDate | 10         |
| tag       | String   | Filter on a tag                                                                                          | tagged     |

After a successful request, the SMS activity  response is shown below.

```json
{
  "range": "2015-05-22|2017-11-29",
  "requests": 54,
  "delivered": 16,
  "hardBounces": 5,
  "softBounces": 26,
  "blocked": 4,
  "unsubscribed": 10,
  "replied": 8,
  "accepted": 6,
  "rejected": 14
}
```

<br />

## Get your SMS activity aggregated per day

This request uses the endpoint `https://api.brevo.com/v3/transactionalSMS/statistics/reports` with the GET method. You can send a request with the cURL request below.

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/transactionalSMS/statistics/reports?sort=desc' \
     --header 'accept: application/json'
```

You can also add more query params above in the `--url` header, the params are mentioned below in a table.

| Attribute | Datatype | Description                                                                                                              | Value      |
| :-------- | :------- | :----------------------------------------------------------------------------------------------------------------------- | :--------- |
| startDate | String   | Mandatory if endDate is used. Starting date (YYYY-MM-DD) of the report                                                   | 2024-01-25 |
| endDate   | String   | Mandatory if startDate is used. Ending date (YYYY-MM-DD) of the report                                                   | 2024-02-25 |
| days      | int64    | Number of days in the past including today (positive integer). Not compatible with startDate and endDate                 | 10         |
| tag       | String   | Filter on a tag                                                                                                          | tagged     |
| sort      | String   | Sort the results in the ascending/descending order of record creation. Default order is descending if sort is not passed | desc       |

After a successful request, the response looks something like below.

```json
{
  "reports": [
    {
      "date": "2017-04-30",
      "requests": 10756,
      "delivered": 10103,
      "hardBounces": 21,
      "softBounces": 137,
      "blocked": 1026,
      "unsubscribed": 720,
      "replied": 5091,
      "accepted": 2318,
      "rejected": 0,
      "skipped": 0
    },
    {
      "date": "2017-05-01",
      "requests": 18812,
      "delivered": 17499,
      "hardBounces": 34,
      "softBounces": 254,
      "blocked": 1514,
      "unsubscribed": 1090,
      "replied": 10089,
      "accepted": 4393,
      "rejected": 0,
      "skipped": 0
    },
    {
      "date": "2017-05-02",
      "requests": 14321,
      "delivered": 13427,
      "hardBounces": 16,
      "softBounces": 176,
      "blocked": 1646,
      "unsubscribed": 1170,
      "replied": 11563,
      "accepted": 4689,
      "rejected": 0,
      "skipped": 1
    }
  ]
}
```

## Get all your SMS activity (unaggregated events)

This request uses the endpoint `https://api.brevo.com/v3/transactionalSMS/statistics/events` with the GET method. You can send a request with the cURL request below.

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/transactionalSMS/statistics/events?limit=50&offset=0&sort=desc' \
     --header 'accept: application/json'
```

The query params for this endpoint are mentioned below.

| Attribute   | Datatype | Description                                                                                                              | Value                                                  |
| :---------- | :------- | :----------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------- |
| startDate   | String   | Mandatory if endDate is used. Starting date (YYYY-MM-DD) of the report                                                   | 2024-01-25                                             |
| endDate     | String   | Mandatory if startDate is used. Ending date (YYYY-MM-DD) of the report                                                   | 2024-02-25                                             |
| days        | int64    | Number of days in the past including today (positive integer). Not compatible with startDate and endDate                 | 10                                                     |
| tag         | String   | Filter on a tag                                                                                                          | tagged                                                 |
| sort        | String   | Sort the results in the ascending/descending order of record creation. Default order is descending if sort is not passed | desc                                                   |
| limit       | int64    | Number of documents per page                                                                                             | 50                                                     |
| offset      | String   | Index of the first document of the page                                                                                  | 2                                                      |
| phoneNumber | String   | Filter the report for a specific phone number                                                                            | tag1                                                   |
| event       | String   | Filter the report for specific events                                                                                    | Includes events like bounces, delivered, accepted etc. |

After a successful request, the response looks something like below.

```json
{
  "events": [
    {
      "phoneNumber": "00911059469013",
      "date": "2015-05-20T12:30:00Z",
      "messageId": "1473139351170140",
      "event": "sent",
      "reason": "Recipient is currently unreachable",
      "tag": "cabWaiting"
    },
    {
      "phoneNumber": "00911059469013",
      "date": "2015-05-20T16:30:00Z",
      "messageId": "1473139351170140",
      "event": "delivered",
      "reason": "Recipient is currently unreachable",
      "tag": "cabRequest"
    }
  ]
}
```


***

title: WhatsApp messages
subtitle: Send transactional WhatsApp messages using the Brevo API
slug: docs/whatsapp-messages
----------------------------

Send transactional WhatsApp messages such as order confirmations, status updates, and password reset links.

## Activate WhatsApp

Before using WhatsApp APIs, activate the feature in your Brevo account:

<Steps>
  ### Enable WhatsApp

  Log in to your Brevo account and navigate to the top navigation bar. Click "Add more apps" to open **Apps and Integration**.

  ### Activate feature

  Under Apps, scroll down and enable the WhatsApp feature. WhatsApp appears in your Brevo dashboard after activation.

  ### Set up business account

  After activating WhatsApp, sign up for Facebook and WhatsApp Business accounts. See [Getting started with WhatsApp campaigns in Brevo](https://help.brevo.com/hc/en-us/articles/4417084910866-Part-1-Link-your-WhatsApp-Business-account-to-Sendinblue#Before_you_start) for setup instructions.
</Steps>

## Send a WhatsApp message

Send a transactional WhatsApp message using a template or plain text.

**Endpoint:** `POST /v3/whatsapp/sendMessage`

### Using a template

For the first message, use a `templateId`. Create templates in your Brevo account:

1. Go to the WhatsApp campaigns dashboard
2. Click "Create a campaign" in the top right
3. After creating the campaign, use the [template list endpoint](/api-reference/whatsapp/get-whats-app-campaigns) to fetch the `templateId`

```bash
curl --request POST \
  --url https://api.brevo.com/v3/whatsapp/sendMessage \
  --header 'accept: application/json' \
  --header 'api-key: YOUR_API_KEY' \
  --header 'content-type: application/json' \
  --data '{
  "contactNumbers": [
    "4915778559164"
  ],
  "templateId": 465118589032810,
  "senderNumber": "917878172050"
}'
```

### Request parameters

**Template based message**

| Parameter        | Type             | Description                       | Required |
| :--------------- | :--------------- | :-------------------------------- | :------- |
| `templateId`     | Integer          | Template ID to use                | Yes      |
| `senderNumber`   | String           | WhatsApp number with country code | Yes      |
| `contactNumbers` | Array of strings | List of recipient phone numbers   | Yes      |

**Text based message**

| Parameter        | Type             | Description                                         | Required |
| :--------------- | :--------------- | :-------------------------------------------------- | :------- |
| `senderNumber`   | String           | WhatsApp number with country code                   | Yes      |
| `text`           | String           | Message body (used if `templateId` is not provided) | No       |
| `contactNumbers` | Array of strings | List of recipient phone numbers                     | Yes      |

<Tip>
  Enter phone numbers without characters or spaces. Include country codes (e.g., `4915778559164`). Find your `templateId` in Campaigns > WhatsApp in your Brevo account.
</Tip>

### Response

| Status code | Description               |
| :---------- | :------------------------ |
| `201`       | Message sent successfully |
| `400`       | Invalid parameters        |

## Get WhatsApp activity

Retrieve unaggregated WhatsApp event data for the past 30 days (default) or a custom date range.

**Endpoint:** `GET /v3/whatsapp/statistics/events`

```bash
curl --request GET \
  --url 'https://api.brevo.com/v3/whatsapp/statistics/events?limit=50&offset=0&startDate=2024-01-01&endDate=2024-01-31' \
  --header 'accept: application/json' \
  --header 'api-key: YOUR_API_KEY'
```

### Query parameters

| Parameter       | Type   | Description                                                                                               | Required |
| :-------------- | :----- | :-------------------------------------------------------------------------------------------------------- | :------- |
| `limit`         | Int64  | Maximum number of results to return                                                                       | No       |
| `offset`        | Int64  | Starting point in the results list                                                                        | No       |
| `startDate`     | String | Start date (YYYY-MM-DD). Required if `endDate` is provided. Must be less than or equal to `endDate`.      | No       |
| `endDate`       | String | End date (YYYY-MM-DD). Required if `startDate` is provided. Must be greater than or equal to `startDate`. | No       |
| `days`          | Int64  | Number of days in the past including today. Not compatible with `startDate` and `endDate`                 | No       |
| `contactNumber` | String | Filter results for a specific contact (WhatsApp number with country code)                                 | No       |
| `event`         | String | Filter by event type                                                                                      | No       |
| `sort`          | String | Sort order: `asc` or `desc`. Default is `desc`                                                            | No       |

### Response

| Status code | Description                         |
| :---------- | :---------------------------------- |
| `200`       | Returns WhatsApp event report data  |
| `400`       | Invalid parameters or routing error |



***

title: Manage your contacts in Brevo
subtitle: Learn how to create and update contacts using the Brevo API
slug: docs/synchronise-contact-lists
------------------------------------

Import contacts to Brevo to send email campaigns, SMS, and marketing automation messages. Use the API to create and update contacts programmatically.

<Note>
  Import at least the contact's email address. You can also import additional contact attributes such as first name, last name, birthday, mobile phone number, and other custom fields.
</Note>

<Info title="Other methods to manage contacts">
  To manage contacts through the Brevo app or import contacts using CSV files, see the [help center tutorial](https://help.brevo.com/hc/en-us/articles/115000719584-Importing-your-contacts-into-SendinBlue).
</Info>

## Before you start

<Steps>
  ### Get your API key

  Retrieve your API key from [your account settings](https://my.brevo.com/account/settings). Read the [Authentication guide](/docs/authentication-schemes) for details.

  ### Understand the API

  If you're new to the Marketing API, read the [Quickstart](/docs/quickstart) guide.
</Steps>

## Create a contact

Create contacts using the `POST /v3/contacts` endpoint. You can create email contacts, SMS contacts, or both.

### Endpoint

<EndpointRequestSnippet endpoint="POST /contacts" />

### Request parameters

Create different types of contacts:

<EndpointSchemaSnippet endpoint="POST /contacts" selector="request" />

**Email contact:**

```json
{
  "email": "thomas.bianchi@example.com"
}
```

**SMS contact:**

```json
{
  "attributes": {
    "SMS": "0612345678"
  }
}
```

**Email and SMS contact with attributes:**

```json
{
  "email": "thomas.bianchi@example.com",
  "attributes": {
    "SMS": "0612345678",
    "LASTNAME": "Bianchi",
    "FIRSTNAME": "Thomas",
    "DELIVERYADDRESS": "176 Boulevard des fleurs, 75014 Paris, France"
  }
}
```

**Assign to contact lists:**

```json
{
  "email": "thomas.bianchi@example.com",
  "listIds": [1, 5]
}
```

<Info>
  Get contact list IDs from [Contacts > Lists](https://my.brevo.com/lists) in the Brevo platform or using the [get all lists](/reference/get-lists) endpoint.
</Info>

### Request example

```curl
curl --request POST \
  --url https://api.brevo.com/v3/contacts \
  --header 'accept: application/json' \
  --header 'api-key: YOUR_API_KEY' \
  --header 'content-type: application/json' \
  --data '{
    "email": "john.doe@example.com",
    "attributes": {
      "SMS": "0611223344",
      "FNAME": "John",
      "LNAME": "Doe"
    },
    "listIds": [11],
    "emailBlacklisted": false,
    "smsBlacklisted": false,
    "updateEnabled": false
  }'
```

### Response

A successful response returns status code **201** with the contact ID:

```json
{
  "id": 123
}
```

<Error>
  If the request fails, you'll receive a 400 error. Common errors include:

  * Invalid email address or phone number
  * Email or phone number already exists in your database
  * Missing or invalid API key
  * Missing `Content-Type: application/json` header
</Error>

### Verify the contact

After creating a contact, verify it was created:

1. Check the [Contacts section](https://my.brevo.com/users/list) in the Brevo platform
2. Use the [retrieve contact information](/reference/get-contact-info) endpoint

<Info title="API Reference testing">
  You can test the endpoint using the [API Reference](/reference/create-contact). When testing, you make real API calls that count against your rate limits and credits.
</Info>

### Code examples

<CodeBlocks>
  <CodeBlock title="curl">
    ```bash
    curl --request POST \
      --url https://api.brevo.com/v3/contacts \
      --header 'api-key:YOUR_API_KEY' \
      --header 'Content-Type: application/json' \
      --data '{"email": "testmail@example.com", "attributes": {"SMS": "0611223344", "FNAME": "John", "LNAME": "Doe"}, "listIds": [11], "emailBlacklisted": false, "smsBlacklisted": false, "updateEnabled": false}'
    ```
  </CodeBlock>
</CodeBlocks>

### Manage contact lists

**Assign contacts to lists:**

```json
{
  "listIds": [1, 5]
}
```

**Unassign contacts from lists:**

```json
{
  "unlinkListIds": [1]
}
```

## Common use cases

### Create a contact with email and attributes

```json
{
  "email": "customer@example.com",
  "attributes": {
    "FNAME": "Jane",
    "LNAME": "Smith",
    "BIRTHDATE": "1990-01-15",
    "CITY": "Paris"
  },
  "listIds": [1]
}
```

### Update contact attributes

```json
{
  "attributes": {
    "CITY": "London",
    "COUNTRY": "UK"
  }
}
```

### Add contact to multiple lists

```json
{
  "listIds": [1, 2, 3]
}
```

## Troubleshooting

### Error: Invalid email address

**Problem**: Request fails with email validation error.

**Solution**: Verify the email address format is correct (e.g., `user@example.com`).

### Error: Contact already exists

**Problem**: Request fails because contact already exists.

**Solution**: Set `updateEnabled: true` in the create request to update existing contacts, or use the update endpoint instead.

### Error: Missing API key

**Problem**: Request fails with authentication error.

**Solution**: Ensure the `api-key` header is included in your request with a valid API key.

## Next steps

* Learn about [contact attributes](/reference/get-attributes)
* Manage [contact lists](/reference/get-lists)
* Import contacts using [CSV files](https://help.brevo.com/hc/en-us/articles/115000719584-Importing-your-contacts-into-SendinBlue)
* Review the [full API reference](/reference/create-contact)


***

title: Getting started with Brevo Tracker
subtitle: >-
Learn how to track website visitor behavior and build abandoned cart
workflows.
----------

## Overview

Brevo Tracker tracks website visitor behavior and identifies contacts. Once identified, contacts are automatically added to Brevo.

This guide demonstrates how to capture cart abandonments and target identified visitors through cart recovery emails after 2 hours of inactivity.

<Note title="What you will learn from this tutorial">
  In this tutorial, you will learn how to:

  * Install Brevo Tracker
  * Track your first website event
  * Build an abandoned cart workflow
</Note>

<Tip>
  You can also track abandoned carts using plugins. Read more about [this option here](https://help.sendinblue.com/hc/en-us/articles/360002856000-Recovering-abandoned-carts-track-your-website-activity-step-1-).
</Tip>

## Install Brevo Tracker

Brevo Tracker tracks all pages visited by your contacts. Once identified, contacts are automatically added to Brevo.

<Steps>
  ### Access tracking settings

  1. Log in to your [Brevo Platform](https://app.brevo.com/account/login)
  2. Activate the **Marketing Automation** feature on your [Apps page](https://app.sendinblue.com/account/apps)
  3. Go to [Automation > Settings > Tracking code](https://automation.sendinblue.com/parameters)

  <Frame background="subtle">
    ![Brevo Tracker installation interface](file:588e78f1-3c61-4e04-b920-55bfe9b5806f)
  </Frame>

  ### Add tracking code

  Copy the tracking code and paste it just before the `</head>` closing tag in your website. If you don't have a `</head>` tag, add the script just before the `<body>` tag.
  Visit your website to verify the tracker is installed. If installed correctly, the Tracking ID status shows as verified next to the **Verify** button.

  <Frame background="subtle">
    ![Verified tracking ID status](file:e74c4645-937a-465a-89f4-499848c3dcf1)
  </Frame>
</Steps>

## Track your first website event

After installation, you can send custom events when visitors perform actions on your website.

<Info>
  Page views are automatically tracked once Brevo Tracker is installed.
</Info>

## The `track()` function

The `track()` function sends custom events. It accepts three parameters:

* Event name (required)
* Properties (optional)
* Event data (optional)

```javascript
brevo.track(
  'event name', // required
  {
    // properties - optional
  },
  {
    // event data - optional
  }
);
```

### Event name

The event name identifies the action being tracked.

For a visitor who adds items to their cart, use `cart_updated` as the event name.

### Properties

Properties is a JSON object that describes the visitor's state, such as email, age, gender, and location.

Pass user attributes (firstname, lastname, etc.) to the `properties` object to update the contact database in Brevo.

<CodeBlocks>
  ```json title="Properties example"
  {
    "email": "thomas.bianchi@example.com",
    "FIRSTNAME": "Thomas",
    "LASTNAME": "Bianchi"
  }
  ```
</CodeBlocks>

<Info title="Properties and contact attributes">
  Properties and contact attributes have similarities:

  * Contact attributes that correspond to properties are updated each time an event is fired
  * Properties that don't correspond to existing contact attributes can only be used in Marketing Automation unless you add them as contact attributes
</Info>

### Event data

Event data is a JSON object that contains information about a transaction. It has two optional entries:

* `id` (optional): Unique identifier of the event. For example, the unique identifier of the cart object on your website, so each time the user adds an object to their cart, it's reflected in Brevo
* `data` (optional): Any information related to your transaction. For example, the details of all products in the cart

<CodeBlocks>
  ```json title="Event data example"
  {
    "id": "cart:1234",
    "data": {
      "total": 280,
      "currency": "USD",
      "url": "www.example.com",
      "items": [
        {
          "name": "Black shoes",
          "price": 90,
          "quantity": 2,
          "url": "www.example.com/black-shoes",
          "image": "www.example.com/black-shoes.jpg"
        },
        {
          "name": "White shirt",
          "price": 100,
          "quantity": 1,
          "url": "www.example.com/shirt",
          "image": "www.example.com/shirt.jpg"
        }
      ]
    }
  }
  ```
</CodeBlocks>

## Build your first track event

Call `brevo.track()` with an event name, properties, and event data to fire a track event.

For a cart update, fire the `cart_updated` track event each time a user clicks the update button.

<Frame background="subtle">
  ![Cart update button example](file:1aa9c538-4f4c-4bc4-9714-e4a6000f0fe0)
</Frame>

Below is an example implementation:

<CodeBlocks>
  ```javascript title="cart-update.js"
  $(".update-btn").click(function() {
    var properties = {
      "email": "thomas.bianchi@example.com",
      "FIRSTNAME": "Thomas",
      "LASTNAME": "Bianchi"
    }

    var track_event = {
      "id": "cart:1234",
      "data": {
        "total": 280,
        "currency": "USD",
        "url": "www.example.com",
        "items": [{
          "name": "Black shoes",
          "price": 90,
          "quantity": 2,
          "url": "www.example.com/black-shoes",
          "image": "www.example.com/black-shoes.jpg"
        }, {
          "name": "White shirt",
          "price": 100,
          "quantity": 1,
          "url": "www.example.com/shirt",
          "image": "www.example.com/shirt.jpg"
        }]
      }
    }
    
    brevo.track("cart_updated", properties, track_event);
  });
  ```

  ```html title="cart-update.html"
  <!-- Update cart button -->
  <a href="#" class="update-btn">Update cart</a>
  ```
</CodeBlocks>

## Build an abandoned cart workflow

Abandoned cart workflows help recover potential lost sales.

### Required events

Track these three events to build an abandoned cart workflow:

* **cart\_updated**: Indicates when a cart is created or updated
* **order\_completed**: Indicates when a cart is purchased
* **cart\_deleted**: Indicates when products are deleted from an existing shopping cart

### Create the workflow

<Steps>
  ### Access automation

  1. Log in to your [Brevo Platform](https://app.brevo.com/account/login)
  2. Go to [Automation](https://automation.sendinblue.com/). If you haven't enabled Automation before, activate it from the [Apps page](https://app.sendinblue.com/account/apps/)

  ### Create workflow

  3. Click **Create a new workflow** at the top right of your screen
  4. Click **Abandoned cart**
</Steps>

<Frame background="subtle">
  <iframe width="854" height="480" src="https://www.youtube.com/embed/xVIitKGKNIo" title="Sendinblue Tutorials - Set an abandoned cart workflow" frameborder="0" allow="autoplay; fullscreen" allowfullscreen />
</Frame>

<Note>
  You've learned how to use Brevo Tracker to track website activity. The `brevo.track()` function accepts three types of entries:

  * **Event name**: Recommended events for abandoned cart tracking are `cart_updated`, `order_completed`, and `cart_deleted`
  * **Properties**: Describes the state of an individual person (your website visitor or product user)
  * **Event data**: Pass precise information about your transaction, such as the details of all products in the cart

  [Discover more about Brevo Tracker here](/docs/getting-started-with-the-brevo-tracker).
</Note>


***

title: WhatsApp campaigns
subtitle: Learn how to create and manage WhatsApp campaigns using the Brevo API
slug: docs/whatsapp-campaigns-1
-------------------------------

## Overview

The WhatsApp Campaigns API enables you to programmatically create and manage WhatsApp marketing campaigns. Use the API to:

* Create and manage WhatsApp campaigns and templates
* Broadcast messages to contact lists and segments
* Retrieve campaign statistics and performance metrics
* Schedule and update campaign delivery

<Note>
  You need access to the WhatsApp Campaigns feature in your Brevo account. See the [activation section](#activating-whatsapp) below.
</Note>

## Activating WhatsApp

Before using the WhatsApp Campaigns API, activate WhatsApp in your Brevo account.

<Steps>
  ### Access Campaigns

  Log in to your Brevo account and navigate to **Campaigns** from the left sidebar.

  ### Create Campaign

  Click **Create Campaign** in the top-right corner of the Campaigns page.

  ### Select WhatsApp

  Under **Standard** campaigns, select **WhatsApp** to activate the feature on your account.
</Steps>

After activation, you must link your WhatsApp Business account to Brevo. For detailed setup instructions, see the [WhatsApp onboarding guide](https://help.brevo.com/hc/en-us/articles/4417084910866-Part-1-Link-your-WhatsApp-Business-account-to-Sendinblue#Before_you_start).

## Get a WhatsApp campaign

Retrieve details for a specific WhatsApp campaign.

### Endpoint

**GET** `https://api.brevo.com/v3/whatsappCampaigns/{campaignId}`

### Path parameters

| Parameter    | Type   | Description |
| :----------- | :----- | :---------- |
| `campaignId` | String | Campaign ID |

### Request example

```curl
curl --request GET \
     --url https://api.brevo.com/v3/whatsappCampaigns/465908589032810 \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response codes

| Code  | Description                             |
| :---- | :-------------------------------------- |
| `200` | Campaign details returned successfully  |
| `400` | Invalid request parameters              |
| `404` | Campaign ID not found or not accessible |

## Delete a WhatsApp campaign

Delete a WhatsApp campaign. You cannot delete campaigns that are currently being sent.

### Endpoint

**DELETE** `https://api.brevo.com/v3/whatsappCampaigns/{campaignId}`

### Path parameters

| Parameter    | Type   | Description |
| :----------- | :----- | :---------- |
| `campaignId` | String | Campaign ID |

<Info>
  Retrieve the `campaignId` from the Brevo WhatsApp dashboard or use the [get all campaigns](#return-all-your-created-whatsapp-campaigns) endpoint.
</Info>

### Request example

```curl
curl --request DELETE \
     --url https://api.brevo.com/v3/whatsappCampaigns/465908589032810 \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response codes

| Code  | Description                             |
| :---- | :-------------------------------------- |
| `204` | Campaign deleted successfully           |
| `400` | Invalid request parameters              |
| `404` | Campaign ID not found or not accessible |

## Update a WhatsApp campaign

Update campaign details, including status, recipients, and scheduling.

### Endpoint

**PUT** `https://api.brevo.com/v3/whatsappCampaigns/{campaignId}`

For detailed parameter information, see the [API reference](/reference/update-whats-app-campaign).

### Path parameters

| Parameter    | Type  | Description |
| :----------- | :---- | :---------- |
| `campaignId` | int64 | Campaign ID |

### Body parameters

| Parameter        | Type   | Description                                                                                                                                      |
| :--------------- | :----- | :----------------------------------------------------------------------------------------------------------------------------------------------- |
| `campaignName`   | String | Campaign name                                                                                                                                    |
| `campaignStatus` | String | Campaign status                                                                                                                                  |
| `rescheduleFor`  | String | UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to reschedule the campaign. Include timezone for accurate results. Example: `2017-06-01T12:30:00+02:00` |
| `recipients`     | Object | Lists and segments to include or exclude                                                                                                         |

### Recipients object

| Parameter         | Type     | Description                                                             |
| :---------------- | :------- | :---------------------------------------------------------------------- |
| `excludedListIds` | int64\[] | List IDs to exclude from the campaign                                   |
| `listIds`         | int64\[] | Required if `scheduledAt` is provided. List IDs to send the campaign to |
| `segments`        | int64\[] | Required if `listIds` is not used. Segment IDs to send the campaign to  |

### Request example

```curl
curl --request PUT \
     --url https://api.brevo.com/v3/whatsappCampaigns/5678 \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --data '{
  "campaignStatus": "scheduled",
  "recipients": {
    "excludedListIds": [8],
    "listIds": [32],
    "segments": [23]
  },
  "campaignName": "Test WhatsApp",
  "rescheduleFor": "2017-06-01T12:30:00+02:00"
}'
```

### Response codes

| Code  | Description                   |
| :---- | :---------------------------- |
| `204` | Campaign updated successfully |
| `400` | Invalid or missing parameters |

## Get all WhatsApp templates

Retrieve all created WhatsApp templates with optional filtering.

### Endpoint

**GET** `https://api.brevo.com/v3/whatsappCampaigns/template-list`

### Query parameters

| Parameter   | Type   | Description                                                                                                                         |
| :---------- | :----- | :---------------------------------------------------------------------------------------------------------------------------------- |
| `startDate` | String | Required if `endDate` is used. Starting UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to filter templates. Include timezone for accuracy |
| `endDate`   | String | Required if `startDate` is used. Ending UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to filter templates. Include timezone for accuracy |
| `limit`     | int64  | Number of documents per page                                                                                                        |
| `offset`    | int64  | Index of the first document in the page                                                                                             |
| `sort`      | String | Sort order: `asc` or `desc`. Default is `desc`                                                                                      |

### Request example

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/whatsappCampaigns/template-list?startDate=2022-05-01T12%3A30%3A00Z&endDate=2022-07-01T12%3A30%3A00Z&limit=50&offset=0&sort=asc' \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response example

```json
{
  "count": 2,
  "templates": [
    {
      "id": 235,
      "name": "campaign_22",
      "type": "whatsapp",
      "status": "approved",
      "language": "en",
      "category": "MARKETING",
      "errorReason": "NONE",
      "createdAt": "2017-05-01T12:30:00Z",
      "modifiedAt": "2017-05-01T12:30:00Z"
    }
  ]
}
```

### Response codes

| Code  | Description                      |
| :---- | :------------------------------- |
| `200` | Templates retrieved successfully |
| `400` | Invalid or missing parameters    |

## Create and send a WhatsApp campaign

Create a new WhatsApp campaign and schedule it for delivery.

### Endpoint

**POST** `https://api.brevo.com/v3/whatsappCampaigns`

### Body parameters

| Parameter     | Type    | Description                                                                                                                        |
| :------------ | :------ | :--------------------------------------------------------------------------------------------------------------------------------- |
| `name`        | String  | Campaign name                                                                                                                      |
| `templateId`  | Integer | ID of an approved WhatsApp template                                                                                                |
| `scheduledAt` | String  | UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to schedule delivery. Include timezone for accuracy. Example: `2017-06-01T12:30:00+02:00` |
| `recipients`  | Object  | Lists and segments to include or exclude                                                                                           |

### Recipients object

| Parameter     | Type     | Description                                                             |
| :------------ | :------- | :---------------------------------------------------------------------- |
| `excludedIds` | int64\[] | List IDs to exclude from the campaign                                   |
| `listIds`     | int64\[] | Required if `scheduledAt` is provided. List IDs to send the campaign to |
| `segments`    | int64\[] | Required if `listIds` is not used. Segment IDs to send the campaign to  |

<Info>
  Get list and segment IDs using the [get all lists](/reference/get-lists) and [get all segments](/reference/get-segments) endpoints.
</Info>

### Request example

```curl
curl --request POST \
     --url https://api.brevo.com/v3/whatsappCampaigns \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --header 'content-type: application/json' \
     --data '{
  "recipients": {
    "excludedIds": [8],
    "listIds": [32],
    "segments": [23]
  },
  "name": "Test Campaign",
  "templateId": 19,
  "scheduledAt": "2017-06-01T12:30:00+02:00"
}'
```

### Response example

```json
{
  "id": 5
}
```

### Response codes

| Code  | Description                                                      |
| :---- | :--------------------------------------------------------------- |
| `201` | Campaign created successfully                                    |
| `400` | Invalid parameters, duplicate campaign, or template not approved |

## Get all WhatsApp campaigns

Retrieve all WhatsApp campaigns with optional filtering.

### Endpoint

**GET** `https://api.brevo.com/v3/whatsappCampaigns`

### Query parameters

| Parameter   | Type   | Description                                                                                                                         |
| :---------- | :----- | :---------------------------------------------------------------------------------------------------------------------------------- |
| `startDate` | String | Required if `endDate` is used. Starting UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to filter campaigns. Include timezone for accuracy |
| `endDate`   | String | Required if `startDate` is used. Ending UTC date-time (YYYY-MM-DDTHH:mm:ss.SSSZ) to filter campaigns. Include timezone for accuracy |
| `limit`     | int64  | Number of documents per page                                                                                                        |
| `offset`    | int64  | Index of the first document in the page                                                                                             |
| `sort`      | String | Sort order: `asc` or `desc`. Default is `desc`                                                                                      |

### Request example

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/whatsappCampaigns?startDate=2017-05-01T12%3A30%3A00Z&endDate=2017-07-01T12%3A30%3A00Z&limit=50&offset=0&sort=desc' \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response example

```json
{
  "count": 23,
  "campaigns": [
    {
      "id": 1672035851100690,
      "campaignName": "campaign_22",
      "campaignStatus": "sent",
      "templateId": 637660278078655,
      "scheduledAt": "2022-12-27T09:50:00Z",
      "errorReason": "",
      "invalidatedContacts": 0,
      "stats": {
        "sent": 3,
        "delivered": 3,
        "read": 2,
        "unsubscribe": 0,
        "notSent": 4
      },
      "readPercentage": 28.57,
      "createdAt": "2017-05-01T12:30:00Z",
      "modifiedAt": "2017-05-01T12:30:00Z"
    }
  ]
}
```

### Response codes

| Code  | Description                      |
| :---- | :------------------------------- |
| `200` | Campaigns retrieved successfully |
| `400` | Invalid or missing parameters    |

## Create a WhatsApp template

Create a new WhatsApp template. Templates must be approved before use in campaigns.

### Endpoint

**POST** `https://api.brevo.com/v3/whatsappCampaigns/template`

### Body parameters

| Parameter    | Type   | Description                                                                                                         |
| :----------- | :----- | :------------------------------------------------------------------------------------------------------------------ |
| `name`       | String | Template name                                                                                                       |
| `language`   | String | Template language code (e.g., `en`)                                                                                 |
| `category`   | String | Template category: `MARKETING` or `TRANSACTIONAL`                                                                   |
| `mediaUrl`   | String | Absolute URL of the media file for the header. Use when `headerText` is empty. Allowed formats: jpeg, png, mp4, pdf |
| `bodyText`   | String | Template body text. Maximum 1024 characters                                                                         |
| `headerText` | String | Template header text. Maximum 45 characters. Use when `mediaUrl` is empty                                           |

### Request example

```curl
curl --request POST \
     --url https://api.brevo.com/v3/whatsappCampaigns/template \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --data '{
  "category": "MARKETING",
  "name": "Test template",
  "language": "en",
  "mediaUrl": "https://attachment.domain.com",
  "bodyText": "making it look like readable English",
  "headerText": "Test WhatsApp campaign"
}'
```

### Response example

```json
{
  "id": 5
}
```

### Response codes

| Code  | Description                                                            |
| :---- | :--------------------------------------------------------------------- |
| `201` | Template created successfully                                          |
| `400` | Invalid parameters, duplicate template, or account validation required |

For detailed error information, see the [API reference](/reference/create-whats-app-template).

## Send WhatsApp template for approval

Submit a template for WhatsApp approval. Approved templates can be used in campaigns.

### Endpoint

**POST** `https://api.brevo.com/v3/whatsappCampaigns/template/approval/{templateId}`

### Path parameters

| Parameter    | Type  | Description |
| :----------- | :---- | :---------- |
| `templateId` | int64 | Template ID |

<Info>
  Get the `templateId` from the response when creating a WhatsApp template.
</Info>

### Request example

```curl
curl --request POST \
     --url https://api.brevo.com/v3/whatsappCampaigns/template/approval/5 \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response codes

| Code  | Description                                  |
| :---- | :------------------------------------------- |
| `200` | Template submitted for approval successfully |
| `400` | Invalid parameters or unauthorized           |

## Get WhatsApp API account information

Retrieve your WhatsApp Business account information, including sending limits and account status.

### Endpoint

**GET** `https://api.brevo.com/v3/whatsappCampaigns/config`

### Request example

```curl
curl --request GET \
     --url https://api.brevo.com/v3/whatsappCampaigns/config \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'
```

### Response example

```json
{
  "whatsappBusinessAccountID": 105569359072383,
  "sendingLimit": "TIER_1K",
  "phoneNumberQuality": "GREEN",
  "whatsappBusinessAccountStatus": "APPROVED",
  "businessStatus": "verified",
  "phoneNumberNameStatus": "APPROVED"
}
```

### Response codes

| Code  | Description                                                              |
| :---- | :----------------------------------------------------------------------- |
| `200` | Account information retrieved successfully                               |
| `400` | Invalid parameters, insufficient credits, or account validation required |
| `503` | Service unavailable                                                      |


***

## slug: docs/fetch-all-your-weekly-marketing-events

<PlanAvailability
  supportedPlans={{
    free: false,
    starter: false,
    standard: false,
    professional: true,
    enterprise: true
  }}
/>

If you happen to have a high volume of marketing events on a weekly basis this service will allow you to generate raw data exports of all the generated webhook calls on a 7 day time period. Usually you should be able to easily pipe out the exported raw data into further analytics tools of your preference.

In order for this service to work you need to open a webhook on your infrastructure which will receive a link to a CSV file containing the unaggregated raw data once the export is computed. If the raw data volumes are to high you will receive a compressed file with multiple CSVs in it.

Currently the data exports include the following events:

| Event name            | API response field | Documentation                                                           |
| --------------------- | ------------------ | ----------------------------------------------------------------------- |
| Marked as Spam        | `spam`             | [Marked as Spam](/docs/marketing-webhooks#marked-as-spam)               |
| Opened                | `opened`           | [Opened](/docs/marketing-webhooks#opened)                               |
| Clicked               | `click`            | [Clicked](/docs/marketing-webhooks#clicked)                             |
| Hard Bounced          | `hard_bounce`      | [Hard Bounced](/docs/marketing-webhooks#hard-bounced)                   |
| Soft Bounced          | `soft_bounce`      | [Soft Bounced](/docs/marketing-webhooks#soft-bounced)                   |
| Delivered             | `delivered`        | [Delivered](/docs/marketing-webhooks#delivered)                         |
| Unsubscribe           | `unsubscribe`      | [Unsubscribe](/docs/marketing-webhooks#unsubscribe)                     |
| Contact Deleted       | `contact_deleted`  | [Contact Deleted](/docs/marketing-webhooks#contact-deleted)             |
| Contact Updated       | `contact_updated`  | [Contact Updated](/docs/marketing-webhooks#contact-updated)             |
| Contact added to list | `list_addition`    | [Contact added to list](/docs/marketing-webhooks#contact-added-to-list) |
| All events            | `allEvents`        | Fetches all events for the specified time period                        |

## Define an export notify url

First you will need to create a notify URL on your side which will receive the webhook call containing the information and path of the generated CSV file with your transactional raw data. Keep in mind that the persistence of the data is of 7 days.

**Example**

```curl
curl --request POST \
     --url https://mydomain.com/importData \
     --header 'accept: application/json' \
     --header 'content-type: application/json'
     
     ------
     ==> Returns 'success' to our servers
```

## Post a new job export

In order to execute the export job you will need to call the following endpoint:

* [Export all webhook events ](/reference/export-webhooks-history)\
  Note for this example we will create a job request for `allEvents` registered in the past `7` days. You can also define more specific queries based on additional filters.

```json
curl --request POST \
     --url https://api.brevo.com/v3/webhooks/export \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "event": "allEvents",
  "type": "marketing",
  "days": 7
}
'
```

## Response

If your request is successfully accepted you will receive in exchange a `processId` which you can use to further track the status of your asynchronous export operation via the following endpoint:

* [Return the informations for a process](/reference/get-process)

```json
{
  "processId": 1843555083931176858
}
```

## Receiving the raw data on your application

Once the asynchronous job has been completed your notifyURL will receive the following payload indicating the data is ready and uploaded to the `url` path as shown below. Note that there's a path expiry time for each data export, so ideally you should download the contents of the file before it is removed from our servers.

```json JSON
{
  "url": "https://webhooks-export.brevo.com/webhook-export-2036548-1680071958.zip?Expires=1680075559&KeyName=webhooks-export-cdn&Signature=sop8E-xYkUd8keGKb60CcIaPp0c=",
  "process_id": 1843555083931176858
}
```

### CSV contents

```Text csv
date,email,event,id,message-id,reason,sending_ip,subject,tag,tags,template_id,ts,ts_epoch,ts_event,X-Mailin-custom,link,s_returnpath
2023-03-15 11:09:22 +0000 UTC,ankit.Balodhi@brevo.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2"",""testTag3"",""testTag4""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false
2023-03-15 11:09:22 +0000 UTC,ankit.Balodhi@brevo.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2"",""testTag3"",""testTag4""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false
2023-03-15 11:09:22 +0000 UTC,ankit.Balodhi@brevo.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2"",""testTag3"",""testTag4""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false
2023-03-15 11:09:22 +0000 UTC,ankit.Balodhi@brevo.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2"",""testTag3"",""testTag4""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false
2023-03-15 11:09:22 +0000 UTC,ankit.Balodhi@brevo.com,spam,13997,<202302241202.77117841982@smtp-relay.mailin.fr>,sent,127.0.0.1,Test Subject,,"[""testTag1"",""testTag2"",""testTag3"",""testTag4""]",45678,1676545042,1676534500,1676545042,TEST-X-Mailin-custom,https://brevo.com,false

```

## Checking the status of an ongoing export job

Query the `process_id` you received as response on the [Return the informations for a process](/reference/get-process) endpoint.

```
{
  "id": 1843555083931176858,
  "status": "completed",
  "name": "EXPORT_MARKETING",
  "export_url": "https://webhooks-export.brevo.com/webhook-export-2036548-1680071958.zip?Expires=1680075559&KeyName=webhooks-export-cdn&Signature=sop8E-xYkUd8keGKb60CcIaPp0c="
}
```

<Info title="Limitations and quotas">
  * Whenever you start using this feature bear in mind the maximum exports you can generate on a 7 day basis is of 20 executions.
  * If the data volume is too high you will receive a compressed file with multiple CSV files in it which you will need to iterate on and upload to your system.
</Info>


***

## slug: docs/retry-mechanism

Retry mechanisms are done to send webhook event requests again that are not successful in the first attempt. There might be many reasons that the requests cannot go through included but not limited to connection timeouts, problems on the client side. Some points to remember for retry mechanisms are mentioned below.

* In the case that the clients servers are non responsive, the webhook event requests are stopped for 10 minutes and they are resumed after that.
* `4xx` response codes, with the exception of `429`and any `5xx`, will stop all retry attempts and will discard the webhook.
* There are total 4 attempts for retries excluding the first attempt to send a webhook request.

  Each webhook retry request would be sent with the following increments:

  * 1st attempt: 10 min
  * 2nd attempt: 1 hour
  * 3rd attempt: 2 hours
  * 4th attempt: 8 hours

  **Check the below example as reference to the runtime of the retry mechanism**

  | Attempt Number       | Delay   | Time     |
  | :------------------- | :------ | :------- |
  | T1- Original attempt | 0       | 10:00 am |
  | T1 + 10 min          | 10 min  | 10:10 am |
  | T2 + 1 hour          | 1 hour  | 11:10 am |
  | T3 + 2 hours         | 2 hours | 1:10 pm  |
  | T4 + 8 hours         | 8 hours | 9:10 pm  |

Note this example includes the original attempt which Brevo sends to the notify URL before failure, so there are 5 requests in total.


***

title: Conversations webhooks
subtitle: >-
Create and manage Conversations webhooks in <a target="_self" href="https://conversations-app.brevo.com/settings/integrations/webhooks">Conversations
\> Settings > Integrations > Webhooks</a>
slug: docs/conversations-webhooks
---------------------------------

Here you will find the list of all the Conversation events you can track, along with their schema and parameters.

## Conversation started

Event is triggered when a conversation is started by a visitor or an agent (automatic targeted messages and pushed messages won’t trigger the event).

| Attribute name          | Data type                                                  | Description                                                                                                                                                                                                                                             |
| ----------------------- | ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `eventName`             | string                                                     | "conversationStarted"                                                                                                                                                                                                                                   |
| `conversationId`        | string                                                     | ID of the continuous conversation with one visitor.                                                                                                                                                                                                     |
| `message`               | [Message](/docs/conversations-webhooks#the-message-object) | Initial message                                                                                                                                                                                                                                         |
| `agent`                 | [Agent](/docs/conversations-webhooks#the-agent-object)     | Agent information                                                                                                                                                                                                                                       |
| `visitor`               | [Visitor](/docs/conversations-webhooks#the-visitor-object) | Visitor information:  <br /><br />- country, language, browser, etc.<br />- contact attributes<br />- info from contact form or JS API<br />- info from channel (i.e. Facebook profile)<br />- terms of service and marketing consents<br />- and more! |
| `conversationStartPage` | Object                                                     | For the chat widget, will contain the `link` and `title` of your website at the time the conversation was started.                                                                                                                                      |
| `isNoAvailableAgent`    | Boolean                                                    | Shows if no agent is online at this point                                                                                                                                                                                                               |

```json
{
    "eventName": "conversationStarted",
    "conversationId": "MxhGJAEugdLtS2BBq",
    
    "conversationStartPage": {
      "link": "https://getwear.com/women/151254/",
      "title": "Washed skinny jeans for women"
    }

    // initial message (see “The Message object” below)
    // /guides/conversations/conversations-webhooks#the-message-object
    "message": {
        "id": "dkmyYPxJyh5rKDhRT",
        // `type` can be `agent` or `visitor`
        "type": "agent",
        "text": "Hi there! Did you receive your tracking number?",
        "html": "Hi there! Did you receive your tracking number?",
        // timestamp in ms
        "createdAt": 1665578322700,
        // agent’s name and ID is passed in case it’s agent’s message
        "agentId": "bnRzp4CioKudG4aHm",
        "agentName": "Julia",
        // only set when the agent has uploaded a profile picture
        "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/"
    },

    // agent info is passed in case chat was started by an agent
    "agent": {
        "id": "bnRzp4CioKudG4aHm",
        "name": "Julia",
        "email": "julia@getwear.com",
        // only set when the agent has uploaded a profile picture
        "userpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/"
    },

    // visitor information
    "visitor": {
        // id generated by Brevo or `visitorId` passed to `window.BrevoConversationsSetup`
        // (see “Binding chat to a user account”: /guides/conversations/customize-the-chat-widget#binding-conversations-to-user-accounts)
        "id": "vfg1y4h4ioapl1cx0trw1mujk6den021zs9b2q8",
        "threadId": "aC4krWMZWLYzz9sKZ",
        // link to this conversation in dashboard
        "threadLink": "https://conversations-app.brevo.com/conversations/aC4krWMZWLYzz9sKZ",
        "source": "widget",
        // For Facebook/Instagram/WhatsApp, the ID of the page/account
        "sourceChannelRef": null,
        // For Facebook/Instagram/WhatsApp, the link of the channel on the platform
        "sourceChannelLink": null,
        // For Facebook/Instagram/WhatsApp, the ID of the visitor on the platform
        "sourceConversationRef": null,
        // id of the agent group
        "groupId": "z2o3F8GDkNpKD4BYt",
        // visitor’s userpic color in Conversations
        "color": "#faebd7",
        "ip": "192.168.1.179",
        // visitor’s browser language
        "browserLanguage": "en-US",
        // language displayed to the visitor
        "conversationLanguage": "en",
        "browser": "Chrome 106.0.0",
        "os": "Windows 10",
        // User agent string
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36",
        "country": "Ireland",
        "city": "Dublin",
        "lastVisit": {
            // timestamp in ms
            "startedAt": 1664550759104,
            // finishedAt can be undefined for an ongoing visit
            "finishedAt": 1664551471534,
            // last visited website
            "hostName": "getwear.com",
            // list of viewed pages (link + title) during current visit
            "viewedPages": [
                {
                    "link": "https://getwear.com/",
                    "title": "Getwear — custom designer jeans"
                },
                {
                    "link": "https://getwear.com/women/151254/",
                    "title": "Washed skinny jeans for women"
                }
            ]
        },
        // name displayed in dashboard (userpic color name for anonymous visitors, e.g. “Dark Orange”)
        "displayedName": "Jane",
        // Attributes from the contact
        "contactAttributes": {
            "SMS": "35315684258"
        },
        // Information from the contact form or passed to the JS API.
        // (see “Passing user details to Conversations”: /guides/conversations/customize-the-chat-widget#passing-user-details-to-conversations)
        "integrationAttributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Combination of the two above, priority is given to the information filled by visitor
        // and/or agents. This object should be used over the two above in most cases.
        "attributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "SMS": "35315684258",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Attributes that can be formatted only
        "formattedAttributes": {
          "SMS": "+353 1 568 4258"
        },
        "notes": "Loves skinny jeans",
        "contactId": 5,
        "marketingConsent": false,
        "termsOfServiceConsent": true
    }
}
```

## Conversation fragment

Event is triggered after each message with some exceptions. Will not be triggered in these cases:

* Message is an automatic targeted message from an agent.
* Visitor’s chat is blocked by a mandatory <a target="_blank" href="https://conversations-app.sendinblue.com/settings/bot">contact form</a> (“*Get messages only once the form is filled*” option in contact form settings). In this case, the event will be triggered after the contact form is filled by the visitor.
* Message is a [pushed message](/reference/send-an-automated-message-to-a-visitor) and there are no previous conversations with the visitor.\
  `messages` property of the event object contains all the messages since previous `conversationFragment` event.

<Info title="This ruleset is designed for two-way integrations with help desks and the like.">
  The event is only triggered when there's a message that requires agents' attention or there's a response from an agent that should be added to the conversation (i.e. new ticket should be created or an existing ticket should be updated).

  That's why automatic targeted messages do not trigger the event, but are added to the webhook for the sake of completeness the next time the event happens.
</Info>

| Attribute name       | Data type                                                      | Description                                                                                                                                                                                                                                             |
| -------------------- | -------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `eventName`          | string                                                         | "conversationFragment"                                                                                                                                                                                                                                  |
| `conversationId`     | string                                                         | ID of the continuous conversation with one visitor.                                                                                                                                                                                                     |
| `messages`           | [Message\[\]](/docs/conversations-webhooks#the-message-object) | List of messages since the previous `conversationFragment` event                                                                                                                                                                                        |
| `agents`             | Object\[]                                                      | List of agents who participated in this fragment                                                                                                                                                                                                        |
| `visitor`            | [Visitor](/docs/conversations-webhooks#the-visitor-object)     | Visitor information:  <br /><br />- country, language, browser, etc.<br />- contact attributes<br />- info from contact form or JS API<br />- info from channel (i.e. Facebook profile)<br />- terms of service and marketing consents<br />- and more! |
| `isNoAvailableAgent` | Boolean                                                        | Shows if no agent is online at this point                                                                                                                                                                                                               |

```json
{
    "eventName": "conversationFragment",
    "conversationId": "aC4krWMZWLYzz9sKZ",

    // list of messages since previous `conversationFragment` event
    // (see “The Message object” below)
    // /guides/conversations/conversations-webhooks#the-message-object
    "messages": [
        // pushed message from an agent (see `pushedMessages` in REST API)
        {
            "type": "agent",
            "id": "AXCR3k9bpSY7bpuh7",
            "text": "Your order has shipped! Here’s your tracking number: 9114 5847 4668 7775 9233 54",
          	"html": "Your order has shipped! Here&39;s your tracking number: 9114 5847 4668 7775 9233 54",
            "createdAt": 1664550379561,
            "agentId": "d9nKoegKSjmCtyK78",
            "agentName": "Liz",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/",
            // `true` for pushed messages
            "isPushed": true
        },

        // automatic targeted message from an agent
        {
            "type": "agent",
            "id": "DftGtKqyJpBXtC42J",
            "text": "Hi there! How can we help you?",
            "html": "Hi there! How can we help you?",
            "createdAt": 1664554934355,
            "agentId": "bnRzp4CioKudG4aHm",
            "agentName": "Julia",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/",
            // `true` for automatic messages from “Targeted chats & triggers”
            "isTrigger": true
        },

        // visitor’s message
        {
            "type": "visitor",
            "id": "JuzQe8pJ9cZqymJK9",
            "text": "I’ve changed my email, could you please re-send my order details?",
            "html": "I&39;ve changed my email, could you please re-send my order details?",
            "createdAt": 1664563333617
        }
    ],

    // list of agents who participated in this fragment
    "agents": [
        {
            "id": "d9nKoegKSjmCtyK78",
            "name": "Liz",
            "email": "liz@getwear.com",
            // only set when the agent has uploaded a profile picture
            "userpic": "https://ucarecdn.com/93d1e396-2a78-4ece-82f0-7b8bb9043b78/"
        },

        {
            "id": "bnRzp4CioKudG4aHm",
            "name": "Julia",
            "email": "julia@getwear.com",
            // only set when the agent has uploaded a profile picture
            "userpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/"
        }
    ],

    // visitor information
    "visitor": {
  
        // id generated by Brevo or `visitorId` passed to `window.BrevoConversationsSetup`
        // (see “Binding chat to a user account”: /guides/conversations/customize-the-chat-widget#binding-conversations-to-user-accounts)
        "id": "vfg1y4h4ioapl1cx0trw1mujk6den021zs9b2q8",
        "threadId": "aC4krWMZWLYzz9sKZ",
        // link to this conversation in dashboard
        "threadLink": "https://conversations-app.brevo.com/conversations/aC4krWMZWLYzz9sKZ",
        "source": "widget",
        // For Facebook/Instagram/WhatsApp, the ID of the page/account
        "sourceChannelRef": null,
        // For Facebook/Instagram/WhatsApp, the link of the channel on the platform
        "sourceChannelLink": null,
        // For Facebook/Instagram/WhatsApp, the ID of the visitor on the platform
        "sourceConversationRef": null,
        // id of the agent group
        "groupId": "z2o3F8GDkNpKD4BYt",
        // visitor’s userpic color in Conversations
        "color": "#faebd7",
        "ip": "192.168.1.179",
        // visitor’s browser language
        "browserLanguage": "en-US",
        // language displayed to the visitor
        "conversationLanguage": "en",
        "browser": "Chrome 106.0.0",
        "os": "Windows 10",
        // User agent string
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36",
        "country": "Ireland",
        "city": "Dublin",
        "lastVisit": {
            // timestamp in ms
            "startedAt": 1664550759104,
            // finishedAt can be undefined for an ongoing visit
            "finishedAt": 1664551471534,
            // last visited website
            "hostName": "getwear.com",
            // list of viewed pages (link + title) during current visit
            "viewedPages": [
                {
                    "link": "https://getwear.com/",
                    "title": "Getwear — custom designer jeans"
                },
                {
                    "link": "https://getwear.com/women/151254/",
                    "title": "Washed skinny jeans for women"
                }
            ]
        },
        // name displayed in dashboard (userpic color name for anonymous visitors, e.g. “Dark Orange”)
        "displayedName": "Jane",
        // Attributes from the contact
        "contactAttributes": {
            "SMS": "35315684258"
        },
        // Information from the contact form or passed to the JS API.
        // (see “Passing user details to Conversations”: /guides/conversations/customize-the-chat-widget#passing-user-details-to-conversations)
        "integrationAttributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Combination of the two above, priority is given to the information filled by visitor
        // and/or agents. This object should be used over the two above in most cases.
        "attributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "SMS": "35315684258",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Attributes that can be formatted only
        "formattedAttributes": {
          "SMS": "+353 1 568 4258"
        },
        "notes": "Loves skinny jeans",
        "contactId": 5,
        "marketingConsent": false,
        "termsOfServiceConsent": true
    }
}
```

## Conversation transcript

Event is triggered when a conversation is finished. Conversation is considered finished after the visitor goes offline (leaves your website) or all the agents who participated leave the conversation.

| Attribute name          | Data type                                                      | Description                                                                                                                                                                                                                                               |
| ----------------------- | -------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `eventName`             | string                                                         | "conversationTranscript"                                                                                                                                                                                                                                  |
| `conversationId`        | string                                                         | ID of the continuous conversation with one visitor.                                                                                                                                                                                                       |
| `messages`              | [Message\[\]](/docs/conversations-webhooks#the-message-object) | List of messages                                                                                                                                                                                                                                          |
| `missedMessagesCount`   | Number                                                         | Number of missed and offline messages                                                                                                                                                                                                                     |
| `agents`                | Object\[]                                                      | List of agents who participated in the conversation                                                                                                                                                                                                       |
| `visitor`               | [Visitor](/docs/conversations-webhooks#the-visitor-object)     | Visitor information:  <br />  <br />- country, language, browser, etc.<br />- contact attributes<br />- info from contact form or JS API<br />- info from channel (i.e. Facebook profile)<br />- terms of service and marketing consents<br />- and more! |
| `conversationStartPage` | Object                                                         | For the chat widget, will contain the `link` and `title` of your website at the time the conversation was started.                                                                                                                                        |

```json
{
    "eventName": "conversationTranscript",
    "conversationId": "aC4krWMZWLYzz9sKZ",
    
    // For the chat widget, will contain the `link` and `title` of your website at the time the conversation was started
    "conversationStartPage": {
      "link": "https://getwear.com/women/151254/",
      "title": "Washed skinny jeans for women"
    }

    // list of messages (see “The Message object” below)
    // /guides/conversations/conversations-webhooks#the-message-object
    "messages": [
        // pushed message from an agent (see `pushedMessages` in REST API)
        {
            "type": "agent",
            "id": "AXCR3k9bpSY7bpuh7",
            "text": "Your order has shipped! Here’s your tracking number: 9114 5847 4668 7775 9233 54",
            "html": "Your order has shipped! Here&#39;s your tracking number: 9114 5847 4668 7775 9233 54",
            "createdAt": 1664550379561,
            "agentId": "d9nKoegKSjmCtyK78",
            "agentName": "Liz",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/93d1e396-2a78-4ece-82f0-7b8bb9043b78/",
            // `true` for pushed messages
            "isPushed": true
        },

        // automatic targeted message from an agent
        {
            "type": "agent",
            "id": "DftGtKqyJpBXtC42J",
            "text": "Hi there! How can we help you?",
            "html": "Hi there! How can we help you?",
            "createdAt": 1664554934355,
            "agentId": "bnRzp4CioKudG4aHm",
            "agentName": "Julia",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/",
            // `true` for automatic messages from “Targeted chats & triggers”
            "isTrigger": true
        },

        // visitor’s message
        {
            "type": "visitor",
            "id": "JuzQe8pJ9cZqymJK9",
            "text": "I’ve changed my email, could you please re-send my order details?",
            "html": "I&39;ve changed my email, could you please re-send my order details?",
            "createdAt": 1664563333617
        },

        // agent’s message
        {
            "type": "agent",
            "id": "5z5fvBj4auebD63S5",
            "text": "Sure, just a moment :)",
            "html": "Sure, just a moment :)",
            "createdAt": 1664563359830,
            "agentId": "bnRzp4CioKudG4aHm",
            "agentName": "Julia",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/",
        },

        // agent sends a file
        {
            "type": "agent",
            "id": "5MzkBA9ERXJNk4JuH",
            "text": "receipt.png",
            // Sanitized file name
            "html": "receipt.png",
            "file": {
                "name": "receipt.png",
                // size in bytes
                "size": 333455,
                "isAllowedFileType": true,
                // whether the file is an image
                "isImage": true,
                "isSticker": true,
                "link": "https://ucarecdn.com/03cd56cd-1de9-4f65-996d-08afdf27fa1b/",
                // image info is passed in case the file is an image
                "imageInfo": {
                    "width": 1129,
                    "height": 525,
                    "previewLink": "https://ucarecdn.com/03cd56cd-1de9-4f65-996d-08afdf27fa1b/-/preview/800x800/-/quality/better/"
                }
            },
            "createdAt": 1664563366078,
            "agentId": "bnRzp4CioKudG4aHm",
            "agentName": "Julia",
            // only set when the agent has uploaded a profile picture
            "agentUserpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/"
        },

        {
            "type": "visitor",
            "id": "6QZDugATac9FXZSkp",
            "text": "Thanks!",
            "html": "Thanks!",
            "createdAt": 1664563372326,
            // `true` for missed and offline messages
            "isMissed": true
        }
    ],

    // number of missed and offline messages
    "missedMessagesCount": 1,

    // list of agents who participated in the conversation
    "agents": [
        {
            "id": "d9nKoegKSjmCtyK78",
            "name": "Liz",
            "email": "liz@getwear.com",
            // only set when the agent has uploaded a profile picture
            "userpic": "https://ucarecdn.com/93d1e396-2a78-4ece-82f0-7b8bb9043b78/"
        },

        {
            "id": "bnRzp4CioKudG4aHm",
            "name": "Julia",
            "email": "julia@getwear.com",
            // only set when the agent has uploaded a profile picture
            "userpic": "https://ucarecdn.com/06e119c4-debd-420f-bb8c-7a2f261ca0e5/"
        }
    ],

    // visitor information
    "visitor": {
        // id generated by Brevo or `visitorId` passed to `window.BrevoConversationsSetup`
        // (see “Binding chat to a user account”: /guides/conversations/customize-the-chat-widget#binding-conversations-to-user-accounts)
        "id": "vfg1y4h4ioapl1cx0trw1mujk6den021zs9b2q8",
        "threadId": "aC4krWMZWLYzz9sKZ",
        // link to this conversation in dashboard
        "threadLink": "https://conversations-app.brevo.com/conversations/aC4krWMZWLYzz9sKZ",
        "source": "widget",
        // For Facebook/Instagram/WhatsApp, the ID of the page/account
        "sourceChannelRef": null,
        // For Facebook/Instagram/WhatsApp, the link of the channel on the platform
        "sourceChannelLink": null,
        // For Facebook/Instagram/WhatsApp, the ID of the visitor on the platform
        "sourceConversationRef": null,
        // id of the agent group
        "groupId": "z2o3F8GDkNpKD4BYt",
        // visitor’s userpic color in Conversations
        "color": "#faebd7",
        "ip": "192.168.1.179",
        // visitor’s browser language
        "browserLanguage": "en-US",
        // language displayed to the visitor
        "conversationLanguage": "en",
        "browser": "Chrome 106.0.0",
        "os": "Windows 10",
        // User agent string
        "userAgent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36",
        "country": "Ireland",
        "city": "Dublin",
        "lastVisit": {
            // timestamp in ms
            "startedAt": 1664550759104,
            // finishedAt can be undefined for an ongoing visit
            "finishedAt": 1664551471534,
            // last visited website
            "hostName": "getwear.com",
            // list of viewed pages (link + title) during current visit
            "viewedPages": [
                {
                    "link": "https://getwear.com/",
                    "title": "Getwear — custom designer jeans"
                },
                {
                    "link": "https://getwear.com/women/151254/",
                    "title": "Washed skinny jeans for women"
                }
            ]
        },
        // name displayed in dashboard (userpic color name for anonymous visitors, e.g. “Dark Orange”)
        "displayedName": "Jane",
        // Attributes from the contact
        "contactAttributes": {
            "SMS": "35315684258"
        },
        // Information from the contact form or passed to the JS API.
        // (see “Passing user details to Conversations”: /guides/conversations/customize-the-chat-widget#passing-user-details-to-conversations)
        "integrationAttributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Combination of the two above, priority is given to the information filled by visitor
        // and/or agents. This object should be used over the two above in most cases.
        "attributes": {
            "FIRSTNAME": "Jane",
            "EMAIL": "jane@example.com",
            "SMS": "35315684258",
            "ORDER": "#151254",
            "CART": "Washed skinny jeans for women, $99"
        },
        // Attributes that can be formatted only
        "formattedAttributes": {
          "SMS": "+353 1 568 4258"
        },
        "notes": "Loves skinny jeans",
        "contactId": 5,
        "marketingConsent": false,
        "termsOfServiceConsent": true,
        "isBanned": false
    }
}
```

### The Visitor object

| Attribute name                              | Data type | Description                                                                                                                                                                                                                                                                                                        |
| ------------------------------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `source`                                    | string    | Source of the visitor, e.g. `widget`, `facebook`, `whatsapp`, etc.                                                                                                                                                                                                                                                 |
| `displayedName`                             | string    | Name displayed in dashboard (userpic color name for anonymous visitors, e.g. “Dark Orange”)                                                                                                                                                                                                                        |
| `contactId`                                 | Number    | If the visitor is in your Contacts, its ID will be available here.                                                                                                                                                                                                                                                 |
| `contactAttributes`                         | Object    | Info from your Brevo contact.                                                                                                                                                                                                                                                                                      |
| `integrationAttributes`                     | Object    | Info from the integration. Examples:  <br /><br />- For the **chat widget**, it will be the info from the contact form or the [JS API](/docs/javascript-api-reference#updateintegrationdata).<br />- Info from channel (i.e. Facebook profile)                                                                     |
| `attributes`                                | Object    | Combination of the two above.  <br />Priority is given to the contact attributes.  <br />This object should be used over the two above in most cases                                                                                                                                                               |
| `formattedAttributes`                       | Object    | Display name for attributes that can be formatted (`SMS`, `WHATSAPP`)                                                                                                                                                                                                                                              |
| `termsOfServiceConsent`                     | Boolean   | Useful if you have enabled ["Request consent to your terms"](https://help.sendinblue.com/hc/en-us/articles/4416568800146#h_01G16954VM9Z8KYXZDR1F5HFMK) in the Contact form, and the conversation was started by the chat widget (not applicable for other channels like Instagram or Facebook)                     |
| `marketingConsent`                          | Boolean   | Useful if you have enabled ["Request consent to your marketing communications"](https://help.sendinblue.com/hc/en-us/articles/4416568800146#h_01G16954VM9Z8KYXZDR1F5HFMK) in the Contact form,  and the conversation was started by the chat widget (not applicable for other channels like Instagram or Facebook) |
| `isBanned`                                  | Boolean   | Whether the visitor is banned (in `conversationTranscript` only)                                                                                                                                                                                                                                                   |
| `browser` / `country` /  `lastVisit` / etc. |           | More fields are available in this object, please check the sample payloads to find out.                                                                                                                                                                                                                            |

### The Agent object

| Attribute name | Data type | Description                                                                                               |
| -------------- | --------- | --------------------------------------------------------------------------------------------------------- |
| `id`           | string    | ID of the agent, as found in the [agent's page](https://conversations-app.sendinblue.com/settings/agents) |
| `name`         | string    | Name of the agent                                                                                         |
| `email`        | string    | Email address of the agent                                                                                |
| `userpic`      | string    | URL of the agent's profile photo, if they have uploaded one                                               |

### The Message object

| Attribute name      | Data type                                                                   | Description                                                                                                                                                                                                   |
| ------------------- | --------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `id`                | String                                                                      | Message ID.                                                                                                                                                                                                   |
| `type`              | String                                                                      | `visitor` or `agent` (depending on who sent the message)                                                                                                                                                      |
| `text`              | String                                                                      | Message text or name of the attached file                                                                                                                                                                     |
| `html`              | String                                                                      | Safe HTML with our chat “markdown” applied                                                                                                                                                                    |
| `createdAt`         | Number                                                                      | Timestamp in milliseconds                                                                                                                                                                                     |
| `agentId`           | String                                                                      | Agent’s ID in the messages sent by an agent                                                                                                                                                                   |
| `agentName`         | String                                                                      | Agent’s name as displayed to the visitor. Only in the messages sent by an agent                                                                                                                               |
| `agentUserpic`      | String                                                                      | URL of the agent's profile photo, if they have uploaded one                                                                                                                                                   |
| `messageType`       | String                                                                      | Contains “email\_bounce” when the received answer is a bounce notification received from Gmail                                                                                                                |
| `isTrigger`         | Boolean                                                                     | `true` for automatic messages from [Targeted chats & triggers](https://conversations-app.sendinblue.com/settings/actions)  and [API](/docs/javascript-api-reference#sendautomessage)                          |
| `isPushed`          | Boolean                                                                     | For [automated messages](/reference/send-an-automated-message-to-a-visitor)                                                                                                                                   |
| `isMissed`          | Boolean                                                                     | When the chat is finished, visitor’s messages missed by the agents are marked with `\"isMissed\": true`                                                                                                       |
| `isMissedByVisitor` | Boolean                                                                     | When the chat is finished, agent’s messages missed by the visitor are marked with `\"isMissedByVisitor\": true`                                                                                               |
| `receivedFrom`      | String                                                                      | In two-way integrations, messages sent via [REST API](/reference/send-a-message-as-an-agent) can be marked with receivedFrom property and then filtered out when received in a webhook to avoid infinite loop |
| `rawUnsafeHtml`     | String                                                                      | Raw unsanitized HTML of the message                                                                                                                                                                           |
| `subject`           | String                                                                      | Email subject line (present for email-source conversations)                                                                                                                                                   |
| `isSentViaJsApi`    | Boolean                                                                     | `true` for messages sent via the JS API                                                                                                                                                                       |
| `sourceMessageId`   | String                                                                      | Original message ID from the source platform                                                                                                                                                                  |
| `from`              | Object                                                                      | Sender info (email conversations)                                                                                                                                                                             |
| `to`                | Array                                                                       | Recipients (email conversations)                                                                                                                                                                              |
| `replyTo`           | Object                                                                      | Reply-to address (email conversations)                                                                                                                                                                        |
| `cc`                | Array                                                                       | CC recipients (email conversations)                                                                                                                                                                           |
| `bcc`               | Array                                                                       | BCC recipients (email conversations)                                                                                                                                                                          |
| `isForward`         | Boolean                                                                     | `true` if the message is a forwarded message                                                                                                                                                                  |
| `file`              | [Attachment](/docs/conversations-webhooks#the-attachment-object) object     | Attachment messages have this property containing file information                                                                                                                                            |
| `attachments`       | [Attachment\[\]](/docs/conversations-webhooks#the-attachment-object) object | This can exists in email replies to chat conversations. Unlike `file`, `attachments` exist alongside the regular message                                                                                      |

### The Attachment object

| Attribute name      | Data type | Description                                                                                                                        |
| ------------------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| `name`              | String    | Name of the file                                                                                                                   |
| `size`              | Number    | Size in bytes                                                                                                                      |
| `isImage`           | Boolean   | Whether the file is an image                                                                                                       |
| `isSticker`         | Boolean   | For stickers (Facebook/Instagram/WhatsApp)                                                                                         |
| `link`              | String    | URL of the file                                                                                                                    |
| `isAllowedFileType` | Boolean   | Whether the file type is allowed in [this setting](https://conversations-app.sendinblue.com/settings/preferences#allowedFileTypes) |
| `mimeType`          | String    | MIME type of the file                                                                                                              |
| `isInline`          | Boolean   | Whether the attachment is inline (e.g. embedded images in emails)                                                                  |
| `inlineId`          | String    | Content-ID for inline attachments                                                                                                  |
| `imageInfo`         | Object    | In case the file is an image, will contain `width`, `height` and `previewLink`                                                     |


***

## slug: docs/custom-objects-management

## Create or update object records in bulk

This endpoint allows you to insert or update multiple records of a custom object in a single API call. The API sends a request to the URL `https://api.brevo.com/v3/objects/{object_type}/batch/upsert` using the `POST` method.

This operation is asynchronous. The endpoint returns a `processId` that can be used to monitor the status of the request. You can refer to the API endpoint [here](/reference/custom-objects/upsertrecords).

### Requirements

* Custom objects are only available for Enterprise or Pro plan accounts.
* This endpoint only supports custom objects, it will not create or update any records for Brevo system objects such as contact, company, deal, task, note, store, order, ticket etc.
* The target object type must already exist in your Brevo schema (see [create custom objects](https://help.brevo.com/hc/en-us/articles/25588365458066-Create-custom-objects) help article). The endpoint does not create new object types, and will return an invalid `object_type` error otherwise.
* The attributes in your payload must be previously defined in the schema-attributes and the ones that are not defined are ignored as shown [here](https://help.brevo.com/hc/en-us/articles/25588365458066-Create-custom-objects#h_01JW89SP9TY0J6J24PRYDMEJD2).
* To associate two object records:
  * An association between the corresponding object types must exist (see [here](https://help.brevo.com/hc/en-us/articles/25588365458066-Create-custom-objects#h_01JW89SP9TFSG04S5NBSCPD7GK)).
  * Both object records must exist before associating them, otherwise the API will return an error.

### Limits and behaviour

| Limit                   | Value                                                                                                                                                                                                         |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Records per request     | 1000 in the array                                                                                                                                                                                             |
| Payload size            | Total request body must not exceed 1 MB                                                                                                                                                                       |
| Attributes per record   | 500 attributes max can be passed in each record of the request. Only 500 attributes can be defined for an object type in the database                                                                         |
| Associations per record | 10 associations max can be passed per associated object type in each record of the request. If you need to define more than 10 associations for a given associated object type, you can run multiple requests |

<br />

**Associations**

* Associations must reference existing object records, otherwise the API returns an error.
* For associating custom objects, either use `ext_id` or `id`.
* Custom objects can be associated with Brevo system objects. For example, with `object_type` as vehicle and associated `object_type` as company:
  * For associating contacts, `contact_id` must be used as `id` in identifiers.
  * For associating companies or deals, use the `ext_id` in identifiers, and fill it with the Brevo generated company or deal id e.g. `company_id` as `ext_id`.

**For storing attributes of an object record (while creating or updating an object record)**

* Use the `attribute_id`, which gets generated while creating an object attribute, as a key.
* The `attribute_id` not defined in the object schema will be simply ignored, they will not be created or throw errors.

| Attribute name             | Datatype         | Description                                                                         |
| :------------------------- | :--------------- | :---------------------------------------------------------------------------------- |
| `records`                  | Array            | Records to be created                                                               |
| `attributes`               | Object           | The properties to set and update                                                    |
| `associations`             | Array            | Linked object records                                                               |
| `associations.object_type` | String           | Type of the associated object                                                       |
| `associations.records`     | Array of objects | Records associated with the object type                                             |
| `identifiers`              | Object           | Used for identification of records                                                  |
| `identifiers.ext_id`       | String           | ID of record in the external system that client want to store in the object system. |
| `identifiers.id`           | String           | ID of object record generated by Brevo                                              |

### CURL request

```curl
curl --request POST \
     --url https://api.brevo.com/v3/objects/object_type/batch/upsert \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY' \
     --header 'content-type: application/json' \
     --data '
{
  "records": [
    {
      "attributes": {
        "make": "Honda",
        "model": "Civic",
        "color": "Gray",
        "year": 2021,
        "engine_type": "Diesel"
      },
      "identifiers": {
        "id": 400
      },
      "associations": [
        {
          "object_type": "garage",
          "records": [
            {
              "identifiers": {
                "id": 435435
              }
            }
          ]
        },
        {
          "object_type": "insurance",
          "records": [
            {
              "identifiers": {
                "id": 1236
              }
            },
            {
              "identifiers": {
                "ext_id": "f7e8d9c0ba"
              }
            }
          ]
        }
      ]
    }
  ]
}
'
```

### Response

The response codes and their description is mentioned.

| Response code | Description                                                                                                                          |
| :------------ | :----------------------------------------------------------------------------------------------------------------------------------- |
| `202`         | Batch request accepted for processing of upsert object records                                                                       |
| `400`         | Bad request. Error messages may include: invalid `organizationId`, invalid `object_type`, records cannot be empty or more than 1000) |
| `403`         | Custom objects are not available on this account                                                                                     |
| `404`         | Object not found for the provided organization or object type                                                                        |
| `500`         | Internal server error                                                                                                                |

A successful response returns a `processId` and a message.

```json
{
  "processId": 21,
  "message": "Batch object records are being processed"
}
```

<br />

## Get the list of object records and total records count for an object

This endpoint allows you to retrieve a paginated list of records of a specific object type, including associated data and a total count of records.

The API sends a request to the URL `https://api.brevo.com/v3/objects/{object_type}/records`using the `GET` method. The endpoint returns a list of records and total count of the object records. You can refer to the API endpoint [here](/reference/custom-objects/getrecords).

### Requirements

* This endpoint currently only supports custom objects, it will not return any records for Brevo system objects  like contact, company, deal, task, note, store, order, ticket etc.
* Custom objects are only available for Enterprise or Pro plan accounts.
* Confirm that the object type is already defined in your schema, otherwise this endpoint will not return records for undefined object types.

| Attribute name | Datatype | Description                                                                                                                    |
| :------------- | :------- | :----------------------------------------------------------------------------------------------------------------------------- |
| `object_type`  | String   | Object type for attribute                                                                                                      |
| `limit`        | Integer  | Number of records returned per page                                                                                            |
| `page_num`     | Integer  | Page number for pagination. It is used to fetch the object records on a provided page number. Must be a valid positive integer |
| `sort`         | String   | Order of the sort. Accepts two possible values: `asc` or `desc`                                                                |
| `association`  | String   | Specifies whether association should be included. Accepts two possible values: `true` or `false`.                              |

### CURL request

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/objects/object_type/records?sort=desc' \
     --header 'accept: application/json' \
     --header 'api-key: YOUR_API_KEY'

```

### Response

The response codes and their description is mentioned.

| Response code | Description                                                                                                                                           |
| :------------ | :---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `200`         | A list of object records for an object type. If association param is set true it will return 5 associated records per association for an object type. |
| `400`         | Bad request (e.g., invalid `object_type`, invalid `page_num` provided)                                                                                |
| `403`         | Custom objects are not available on this account                                                                                                      |
| `424`         | Primary attribute not found                                                                                                                           |
| `500`         | Internal server error                                                                                                                                 |

The response returns a list of object records with attributes, identifiers and associations. It also returns a total count of records for that object type which is useful for pagination.

```json
{
  "count": 350,
  "records": [
    {
      "createdAt": "2025-07-22T10:20:30Z",
      "updatedAt": "2025-07-22T10:20:30Z",
      "identifiers": {
        "id": 16789,
        "ext_id": "507f1f77bc"
      },
      "attributes": {
        "make": "Toyoto",
        "model": "Corolla",
        "color": "Black",
        "year": 2020,
        "engine_type": "Hybrid"
      },
      "associations": [
        {
          "object_type": "garage",
          "records": [
            {
              "identifiers": {
                "id": 12345
              }
            },
            {
              "identifiers": {
                "id": 45678
              }
            }
          ]
        },
        {
          "object_type": "insurance",
          "records": [
            {
              "identifiers": {
                "id": 98765
              }
            },
            {
              "identifiers": {
                "id": 87654
              }
            }
          ]
        }
      ]
    }
  ]
}


```


***

## slug: docs/getting-started-with-the-brevo-tracker

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

The Brevo tracker is a powerful tool that connects Brevo apps (such as Automations, Segments, and Conversations) to your website. It monitors your website in real-time, allowing you to use Brevo to respond as visitors take actions like visiting certain pages or submitting forms. This helps you better understand and engage with your contacts.

## What is the Brevo Tracker

The Brevo tracker is a **tracking code that you can add to your website to monitor activity in real-time**. It uses either first-party or third-party cookies to collect data about your visitors and their actions, such as visiting specific pages, and **sends this information directly to your Brevo account**.

If a visitor is identified, their data is associated to their profile (typically stored in their contact attributes and history), and records of these events can be accessed from the [**Event logs**](https://automation.brevo.com/log/events) page.

Once the data is available in Brevo, you can identify the most relevant information for each contact and use it to improve their experience and increase conversions.

For more details, check our help article [here](https://help.brevo.com/hc/en-us/articles/209465705-What-is-Brevo-Tracker-and-how-can-I-install-it).

<Info title="What can be tracked?">
  Depending on your configuration the tracking criteria can vary. In general the options are as follows:

  * You log the event when a user clicks on a link in your website
  * You log whenever a page from your website is visited
  * You log a custom event for which you define its specific attributes and values
  * You identify recurrent visitors in your website. For this ones you can log their email address, IP address and update their contact attributes in Brevo, if needed.
</Info>

## How can the Brevo Tracker be implemented?

There are two types of implementations:

* [JS Implementation](/docs/getting-started-with-js-implementation)
* [REST Implementation](/docs/tracker-rest-implementation)


***

## slug: docs/identify-users-js

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

### Identify a user through identify() function

The Brevo.identify() method is used to identify the users who visited your website. The way it works is the following:

* by default, once installed, the Brevo tracker adds a cookie for each of your visitors
* then, as soon as the Brevo.identify() function is called, Brevo associates this cookie with an email
* if you’re calling the Brevo.identify() function for a contact that already exists, we will update its contact attributes based on the payload of the call

If you wish to identify your visitor,  you need to call the `Brevo.identify` function like this:

```javascript
Brevo.push(function () {
    Brevo.identify({
        identifiers: {
            email_id: "email"   /*required*/
        },
        attributes: {            /*optional*/
            FIRSTNAME: "Jane",
            LASTNAME: "Doe",
            AGE: 32,
            GENDER: "FEMALE"
        },
    });
});

```

The parameters are defined below:

| Attribute    | Datatype    | Description                                                                               | Value                                                      |
| :----------- | :---------- | :---------------------------------------------------------------------------------------- | :--------------------------------------------------------- |
| `email_id`   | String      | Email address of website visitor. This is a required parameter                            | [visitor@email.com](mailto:visitor@email.com)              |
| `attributes` | JSON object | JSON object that your visitor’s contact attributes’ values. This is an optional parameter | Any of your visitors contact attributes. See example below |

When sending `attributes` :

* if the contact does not exist yet, we will create it with the attributes you’re sending
* if it exists already, we will update it
* if there is a mistake and a given attribute in the call is not an actual attribute in your contact database, we won’t take it into account

<Info title="Properties and contacts attributes">
  There is some similarity between Contacts attributes and the information you can pass onto the `properties` object.

  If the contact exists in Brevo, its attributes matching **Properties** will be updated each time the **Brevo.identify()** method is called.

  `properties` that don't correspond to existing Contacts attributes can be used only in your automation workflows unless you add them as attributes from your Contacts section or via Brevo API.
</Info>

**Example**

```javascript
var email = "John.Doe@email.com"; /*required*/

var properties = {	/*optional*/
  FIRSTNAME : "John",
  LASTNAME : "Doe",
  id : "10001",
  plan : "diamond",
};
Brevo.push([
  "identify", {
    identifiers : {
      email_id : email
    },
    attributes : properties
  }
]);

```
***

## slug: docs/track-page-views-js

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

If you wish to track which pages your contacts are visiting, you can use the `Brevo.page` like this:

```javascript
Brevo.push([
  "page",
      page_name, /* mandatory */
      properties /* optional */ 
]);
```

Parameters are defined below:

| Attribute    | Datatype    | Description                                                              | Value                       |
| :----------- | :---------- | :----------------------------------------------------------------------- | --------------------------- |
| `page_name`  | String      | Name of your page                                                        | "About Page"                |
| `properties` | JSON object | Additional elements to describe the page context: page title for example | `{ "title": "Page title" }` |

<Info title="Reserved keywords">
  In addition to any key-value pair, you can pass four reserved keywords beginning with the prefix `ma_` in the `properties` object:

  1. `ma_url:` the full URL of the page, including the scheme.
  2. `ma_path:` the path of the page, i.e. the url without the scheme, the domain, the query string or the fragments.
  3. `ma_title:` the title of the page.
  4. `ma_referrer:` the referrer of the page.
</Info>

> If any of this parameter is not provided then the value will be taken from the current page.

**Example**

```javascript
var page_name = 'homepage';

var properties = {
  'ma_title' : 'My Home Page',
  'ma_url' : 'http://www.example.com/home',
  'ma_path' : '/home'
};

Brevo.push([
  "page",
      page_name, /* mandatory */
      properties /* optional */ 
]);
```


***

## slug: docs/track-link-clicks-js

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

`trackLink()` is the function used to track clicks on links on your website. You can use it like this:

```javascript
Brevo.push([
  "trackLink",
      link,      /* mandatory */
      properties /* optional */
]);
```

Parameters are defined below:

| Attribute    | Datatype    | Description                                        | Value                                              |
| :----------- | :---------- | :------------------------------------------------- | -------------------------------------------------- |
| `link`       | DOM element | It is the DOM element that you want to track       | document.getElementById('download\_casestudy\_a'); |
| `properties` | JSON object | Describes the click context or the visitor’s state | `{ "title": "Page title" }`                        |

<Info title="Implement `trackLink` after the tag">
  `trackLink()` needs you to pass the DOM elements which should have been loaded before. Therefore it's better to implement `trackLink()` after the `<body>` tag while making sure that your DOM elements are already loaded.
</Info>

#### Example:

```javascript
var link = document.getElementById('download_casestudy_a');

var properties = {'casestudy' : 'A'}

Brevo.push([
  "trackLink",
      link,      /* mandatory */
      properties /* optional */
]);
```


***

## slug: docs/track-custom-events-js

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

Custom events are events that you would like to follow. We call them custom in the sense that you are able to give it any name you want.

You can use it in different situations, for example in the context of an eCommerce shop, to follow cart events. Here is the syntax:

```javascript
Brevo.push([
  "track",
      event_name, 	/* mandatory */
      properties,	/* optional */
      event_data	/* optional */
]);
```

Parameters are defined below:

| Attribute    | Datatype    | Description                                                         | Value                                                                   |
| :----------- | :---------- | :------------------------------------------------------------------ | :---------------------------------------------------------------------- |
| `event_name` | String      | Name of your event                                                  | `"cart_updated"`                                                        |
| `properties` | JSON object | Describes the state of the visitor                                  | `{"email": "john.doe@email.com","FIRSTNAME": "John","LASTNAME": "doe"}` |
| `event_data` | JSON object | A JSON object which you can use to pass information about the event | See example below                                                       |

Here is an example for `event_data`:

```javascript
event_data = {  
    "id": "cart:1234",  
    "data": {  
        "total": 280,  
        "currency": "USD",  
        "url": "www.example.com",  
        "items": [{  
                "name": "Black shoes",  
                "price": 90,  
                "quantity": 2,  
                "url": "www.example.com/black-shoes",  
                "image": "www.example.com/black-shoes.jpg"  
            }  
        ]  
    }  
}
```

**Example**

```javascript
var event_name = "cart_updated";
var properties = {
	"email": "john.doe@email.com",
	"FIRSTNAME": "John",
	"LASTNAME": "doe"
}

var event_data = {  
    "id": "cart:1234",  
    "data": {  
        "total": 280,  
        "currency": "USD",  
        "url": "www.example.com",  
        "items": [{  
                "name": "Black shoes",  
                "price": 90,  
                "quantity": 2,  
                "url": "www.example.com/black-shoes",  
                "image": "www.example.com/black-shoes.jpg"  
            }  
        ]  
    }  
}

Brevo.push([
  "track",
      event_name, 	/* mandatory */
      properties,	/* optional */
      event_data	/* optional */
]);
```


***

## slug: docs/identify-users-rest

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

This endpoint creates and updates users directly on the Brevo account. You can use the cURL request below to send a request:

```curl
curl --request POST \
     --url https://in-automate.brevo.com/api/v2/identify \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'ma-key: YOUR_MA_KEY'
     --data '
{
  "email": "abc@brevo.com",
  "attributes": {
    "FirstName": "abc",
    "LastName": "def",
    "Age": 24,
    "SMS": 919989894562
  }
}
'
```

Parameters are defined below:

| Attribute    | Datatype    | Description                                                                            | Value                                 |
| :----------- | :---------- | :------------------------------------------------------------------------------------- | ------------------------------------- |
| `email`      | String      | Email address used to identify a user                                                  | [abc@email.com](mailto:abc@email.com) |
| `attributes` | JSON Object | Contains your custom fields. These user properties will populate your contact database | See example above                     |

**Response**

| Response code | Message                                           | Description                                                                                                             |
| :------------ | :------------------------------------------------ | :---------------------------------------------------------------------------------------------------------------------- |
| `204`         | User has been identified and successfully updated | Response shown in case of creation and user update                                                                      |
| `400`         | Bad request                                       | This error is shown in case of a bad request involving `invalid_parameter`, `missing_parameter` and `out_of_RangeModel` |


***

## slug: docs/track-link-clicks-rest

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

This endpoint allows you to send information about the link clicks. You can consult the sample cURL request below:

```curl
curl --request POST \
     --url https://in-automate.brevo.com/api/v2/trackLink \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'ma-key: YOUR_MA_KEY' \
     --data '
{
  "email": "abc@email.com",
  "link": "abc.com/document.pdf",
  "properties": {
    "key": "value"
  }
}
'
```

Parameters are defined below:

| Attribute    | Datatype | Description                                                                            | Value                                 |
| :----------- | :------- | :------------------------------------------------------------------------------------- | :------------------------------------ |
| `email`      | String   | Email address to identify the user                                                     | [abc@email.com](mailto:abc@email.com) |
| `link`       | String   | Link to be tracked                                                                     | abc.com/document.pdf                  |
| `properties` | Object   | Contains your custom fields. These user properties will populate your contact database | See example above                     |

**Response**

| Response code | Message                            | Description                                                      |
| :------------ | :--------------------------------- | :--------------------------------------------------------------- |
| `204`         | Link has been tracked successfully | No content is shown in message which shows link has been tracked |
| `400`         | Bad request                        | Bad request due to invalid, missing or out\_of\_range parameters |



***

## slug: docs/track-page-views-rest

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

This endpoint allows you to track your page views. You can use the cURL request mentioned below to send a request:

```curl
curl --request POST \
     --url https://in-automate.brevo.com/api/v2/trackPage \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'ma-key: YOUR_MA_KEY' \
     --data '
{
  "email": "john.doe@email.com",
  "page": "Checkout",
  "properties": {
    "title": "Dashboard"
    "firstName": "John",
    "lastName": "Doe"
  }
}
'
```

Parameters are defined below:

| Attribute    | Datatype | Description                                                                            | Value                                           |
| :----------- | :------- | :------------------------------------------------------------------------------------- | :---------------------------------------------- |
| `email`      | String   | Email to identify the user                                                             | [john.doe@email.com](mailto:john.doe@email.com) |
| `page`       | String   | Page name                                                                              | "Checkout page"                                 |
| `properties` | Object   | Contains your custom fields. These user properties will populate your contact database | See example above                               |

**Response**

| Response code | Message                            | Description                                                           |
| :------------ | :--------------------------------- | :-------------------------------------------------------------------- |
| `204`         | Page has been tracked successfully | Page has been tracked but no JSON response with the 204 response code |
| `400`         | Bad request                        | Bad request due to incorrect or missing parameters in the request.    |


***

## slug: docs/track-custom-events-rest

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

This endpoint lets you to capture events and additional information about the events. A cURL request is mentioned below:

```curl
curl --request POST \
     --url https://in-automate.brevo.com/api/v2/trackEvent \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --header 'ma-key: YOUR_MA_KEY' \
     --data '
{
    "email": "example@brevo.com",
    "event": "cart_updated",
    "properties": {
        "additionalProp": "additional property"
    },
    "eventdata": {
        "data": {
            "added_product": [
                {
                    "currency": "EUR",
                    "name": "Wrist watch",
                    "type": "accessories",
                    "price": "50.00"
                }
            ]
        }
    }
}
'
```

You can choose any value you want for the field `event` and pass any key-value in the field `properties`. Make sure not to use any reserved key (email or event) in the `properties` object. The attributes to track events are defined in the table below:

| Attribute    | Datatype | Description                                                                            | Value                                           |
| :----------- | :------- | :------------------------------------------------------------------------------------- | :---------------------------------------------- |
| `email`      | String   | Email to identify the user                                                             | [john.doe@email.com](mailto:john.doe@email.com) |
| `event`      | String   | Event to track                                                                         | "item\_deleted"                                 |
| `properties` | Object   | Contains your custom fields. These user properties will populate your contact database | See example above                               |
| `eventdata`  | Object   | Contain the data you want to pass about the event                                      | See example above                               |

**Response**

| Response code | Message                             | Description                                                                            |
| :------------ | :---------------------------------- | :------------------------------------------------------------------------------------- |
| `204`         | Event has been tracked successfully | No content is shown in the JSON response but the event has been tracked                |
| `400`         | Bad request                         | Bad request occurs due to `out_of_rangeModel`, `invalid_parameter`, `missingParameter` |


***

## slug: docs/tracker-rest-implementation

<Info title="Legacy Tracker Documentation">
  For the legacy tracker doc, check our guide [here](https://tracker-doc.brevo.com/docs/getting-started-1).
</Info>

Below and in the next pages are described how to use the REST API to implement the Brevo Tracker features. However, keep in mind the [JS implementation](/guides/brevo-tracker-events/js-implementation/overview) is easier and allows you more things, for example:

1. The Javascript tracker tracks the page views for you and it is an automated process while in REST implementation you will have to run the events yourself.
2. We won't be able to track the users who clicked on your emails.
3. For REST implementation, you will have to pass email to the call because this would identify the users.

<Info title="Combining the REST and the JS implementation">
  You can totally combine the two tracking technologies: JS and REST. For example, you can use the JS on the client side to identify and track users' behaviours on your website and your can use REST implementation on the server side, to track orders.
</Info>

### Authentication

The REST implementation requires a key, shown as `client_key` below, to authenticate. You can get it from your [Brevo account](https://automation.brevo.com/parameters).

```javascript
<script src="https://cdn.brevo.com/js/sdk-loader.js" async></script>
<script>
	// Version: 2.0
    window.Brevo = window.Brevo || [];
    Brevo.push([
        "init",
        {
        client_key: "YOUR_CLIENT_KEY",   
        // Optional: Add other initialization options, see documentation
        }
    ]);
</script>
```


***

## slug: docs/events

The Events API is a platform designed to facilitate the tracking and management of interactions between contacts or users within Brevo. An event could be related to an action a Brevo user performed on a Brevo object like updating contacts or sending an email etc.

Events are used to:

* Log important events in the system and track the history of a particular contact
* Segment the contacts database according to behaviours
* Trigger automation workflows

### Pre-requisites

You need to have an API-key to access the Events API endpoints on the **[API reference](/api-reference/events/create-event)**. To get an API-key, you can consult the **[guide](/guides/key-concepts#quick-start)** for getting the API-key from the user account.


***

## slug: docs/event-endpoints

Event endpoints track a users or a contacts interactions with Brevo platforms. You can find the Events endpoints in the [Events API reference](/reference/create-event).

## Create an event

This API endpoint will create an event to monitor a contacts interaction. You can refer and use the cURL request below for creating an event.

```curl
curl --request POST \
     --url https://api.brevo.com/v3/events \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "event_name": "video_played",
  "event_date": "2024-02-06T20:59:23.383Z",
  "identifiers": {
    "email_id": "jane.doe@example.com"
  },
  "contact_properties": {
    "AGE": 32,
    "GENDER": "FEMALE"
  },
  "event_properties": {
    "video_title": "Brevo — The most approachable CRM suite",
    "vide_description": "Create your free account today!",
    "duration": 142,
    "autoplayed": false,
    "upload_date": "2023-11-24T12:09:10+01:00"
  }
}
```

There are a few body params for this endpoints which we will mention in a table below individually.

| Attribute            | Datatype | Description                                                                                                                                                                                                                                                                                                                                                                                  | Example                                                                                        |
| :------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------- |
| `event_name`         | String   | The name of the event that occurred. This is how you will find your event in Brevo. Limited to 255 characters, alphanumerical characters and `- , _` only.                                                                                                                                                                                                                                   | `video_played`                                                                                 |
| `event_date`         | String   | Timestamp of when the event occurred `(e.g. "2024-01-24T17:39:57+01:00").` If no value is passed, the timestamp of the event creation is used.                                                                                                                                                                                                                                               | `2024-02-06T20:59:23.383Z`                                                                     |
| `identifiers`        | Object   | Identifies the contact associated with the event.                                                                                                                                                                                                                                                                                                                                            | `jane.doe@example.com`                                                                         |
| `contact_properties` | Object   | Properties defining the state of the contact associated to this event. Useful to update contact attributes defined in your contacts database while passing the event. For example: `"FIRSTNAME": "Jane" , "AGE": 37`                                                                                                                                                                         | Add properties like `Age`and `Gender`                                                          |
| `event_properties`   | Object   | Properties of the event. Top level properties and nested properties can be used to better segment contacts and personalise workflow conditions. The following field type are supported: string, number, boolean (true/false), date `(Timestamp e.g. "2024-01-24T17:39:57+01:00").` Keys are limited to 255 characters, alphanumerical characters and `- , _ ` only. Size is limited to 50Kb. | Properties for the event `video_played` like `video_title`, `video_description` and `duration` |

### Response

The request returns a 204 success response with no content. On the other hand, an error response could look something like below.

```json
{
  "code": "method_not_allowed",
  "message": "POST Method is not allowed on this path"
}
```

| Response code | Message       | Description                                                                   |
| :------------ | :------------ | :---------------------------------------------------------------------------- |
| `204`         | Event created | Shows 204 response code when request is successful and event is created       |
| `400`         | Bad request   | Request does not go through due to bad request because of invalid\_parameters |
| `401`         | Unauthorized  |                                                                               |


***

## slug: docs/getting-started-with-senders-and-domains

Senders are authorised addresses to distribute email messages on your Brevo account. You can create, delete, update and get your senders through the endpoints in the <a href="/api-reference/accounts-and-settings/senders/create-sender" target="_blank">API Reference > Senders.</a>

## Requirements

You should keep in mind some requirements before getting started with Senders and Domains. To use the endpoints you have to:

1. Create a user account with Brevo.
2. Log into your Brevo account.
3. Use an API key. You can consult [Guides > Welcome](/guides/key-concepts) to get your API key from  from the Brevo developers dashboard.

<br />

<Info title="Domain Authentication">
  You have to verify the email of the sender to confirm its authenticity along with authenticating the domain so that it is shown as a verified sender. You can learn more about the verification process **[here](https://www.google.com/search?client=safari\&rls=en\&q=sendinblue+validate+sender\&ie=UTF-8\&oe=UTF-8)**
</Info>


***

## slug: docs/sender-creation-and-management

You can check out the API public reference endpoints for senders at <a href="/reference/create-sender" target="_blank">API Reference > Senders</a>. We will talk through the endpoints one by one starting from `Create a new sender`.

## 1. Create a new sender

You can use the endpoint `https://api.brevo.com/v3/senders` for this API call with the calling method `POST`. The cURL request for this endpoint will be like this:

```curl
curl --request POST \
     --url https://api.brevo.com/v3/senders \
     --header 'accept: application/json' \
     --header 'api-key: ' \
     --header 'content-type: application/json' \
     --data '
{
     "ips": [
          {
               "ip": "123.98.689.7",
               "domain": "mycompany.com",
               "weight": 50
          }
     ],
```

The parameters for this endpoint are mentioned in the table below.

| Attribute | Datatype         | Description                                                                          | Value                                                         |
| :-------- | :--------------- | :----------------------------------------------------------------------------------- | :------------------------------------------------------------ |
| `name`    | String           | From Name to use for the sender                                                      | Newsletter                                                    |
| `email`   | String           | From email to use for the sender. A verification email will be sent to this address. | [newsletterr@mycompany.com](mailto:newsletterr@mycompany.com) |
| `ips`     | Array of objects | Mandatory in case of dedicated IP. IPs to associate to the sender                    | IP objects                                                    |

Since `ips` is an array of objects, it has sub attributes which are:

| Attribute | Datatype | Description                                                                                                                                                                            | Value         |
| :-------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `ip`      | String   | Dedicated IP available in your account                                                                                                                                                 | 123.98.689.7  |
| `domain`  | String   | Domain of the IP                                                                                                                                                                       | mycompany.com |
| `weight`  | Int64    | Weight to apply to the IP. Sum of all IP weights must be 100. Should be passed for either ALL or NONE of the IPs. If it's not passed, the sending will be equally balanced on all IPs. | 50            |

<br />

<Info title="Using ips as array of objects">
  You can also use multiple ips as dedicated ips which you can associate to the sender.
</Info>

<br />

**Response**

| Response code | Message        | Description                                                           |
| :------------ | :------------- | :-------------------------------------------------------------------- |
| `201`         | Sender created | Sender has been created                                               |
| `400`         | Bad request    | Bad API request has been sent involving wrong formats for parameters. |

<br />

## 2. Update a sender

You can start updating your existing sender by using the endpoint `https://api.brevo.com/v3/senders/{senderId}` with the calling method `PUT`. To call the endpoint, the cURL request below can be used:

```curl
curl --request PUT \
     --url https://api.brevo.com/v3/senders/24 \
     --header 'accept: application/json' \
     --header 'api-key: ' \
     --header 'content-type: application/json' \
     --data '
{
     "ips": [
          {
               "ip": "123.98.689.7",
               "domain": "mycompany.com",
               "weight": 50
          }
     ],
     "name": "Newsletter",
     "email": "newsletter@mycompany.com"
}
'
```

The attributes of `Update a sender` are in two parts, path params and body params.

<br />

**Path params**

| Attribute  | Datatype | Description      | Value |
| :--------- | :------- | :--------------- | :---- |
| `senderId` | Int64    | Id of the sender | 24    |

<br />

**Body params**

| Attribute | Datatype         | Description                                                                          | Value                                                         |
| :-------- | :--------------- | :----------------------------------------------------------------------------------- | :------------------------------------------------------------ |
| `name`    | String           | From Name to use for the sender                                                      | Newsletter                                                    |
| `email`   | String           | From email to use for the sender. A verification email will be sent to this address. | [newsletterr@mycompany.com](mailto:newsletterr@mycompany.com) |
| `ips`     | Array of objects | Mandatory in case of dedicated IP. IPs to associate to the sender                    | IP objects                                                    |

Since `ips` is an array of objects, it has sub attributes which are:

|          |        |                                                                                                                                                                                        |               |
| :------- | :----- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------ |
| `ip`     | String | Dedicated IP available in your account                                                                                                                                                 | 123.98.689.7  |
| `domain` | String | Domain of the IP                                                                                                                                                                       | mycompany.com |
| `weight` | Int64  | Weight to apply to the IP. Sum of all IP weights must be 100. Should be passed for either ALL or NONE of the IPs. If it's not passed, the sending will be equally balanced on all IPs. | 50            |

<br />

**Response**

| Response code | Description                                                                 | Message             |
| :------------ | :-------------------------------------------------------------------------- | :------------------ |
| `204`         | This shows a success message that the sender has been updated               | Sender updated      |
| `400`         | This response is shown when there is a missing or invalid parameter etc.    | Bad request         |
| `404`         | This response code is shown in case when sender ID is unavailable or wrong. | Sender ID not found |

<br />

## 3. Get the list of all your senders

You can use the endpoint `https://api.brevo.com/v3/senders` with the calling method `GET`. The cURL request for this endpoint is mentioned below:

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/senders?ip=192.168.8.138&domain=mydomain.com' \
     --header 'accept: application/json' \
     --header 'api-key: '
```

<br />

The attributes for this endpoint are defined in the table below:

| Attribute | Datatype | Description                               | Value         |
| :-------- | :------- | :---------------------------------------- | :------------ |
| `ip`      | String   | Filter your senders for a specific ip     | 192.168.8.138 |
| `domain`  | String   | Filter your senders for a specific domain | mydomain.com  |

<br />

**Response**

| Response code | Message         | Description                                                |
| :------------ | :-------------- | :--------------------------------------------------------- |
| `200`         | List of senders | Displays the list of senders.                              |
| `400`         | Bad request     | This response is shown due to invalid or wrong parameters. |

<br />

## Delete a sender

You can use the endpoint `https://api.brevo.com/v3/senders/{senderId}` with the method `DELETE`. If you want to implement this endpoint in your preferred language, you can use the below code.

The cURL request for this endpoint is below.

```curl
curl --request DELETE \
     --url https://api.brevo.com/v3/senders/245 \
     --header 'accept: application/json' \
     --header 'api-key: '
```

There is only one attribute for deleting a sender which is senderId. You get the senderId after your create the sender and the API returns an Id in the response which is your senderId.

| Attribute  | Datatype | Description      | Value |
| :--------- | :------- | :--------------- | :---- |
| `senderId` | Int64    | Id of the sender | 245   |

<br />

**Response**

| Response code | Message             | Description                                                                    |
| :------------ | :------------------ | :----------------------------------------------------------------------------- |
| `204`         | Sender deleted      | Sender has been deleted successfully.                                          |
| `400`         | Bad request         | Request may have invalid or missing parameters or problems in the request etc. |
| `404`         | Sender Id not found | Sender Id to be deleted is not found                                           |


***

## slug: docs/domain-creation-and-management

Domains are used for authenticating and verifying the senders so that a user knows that the email is being sent from a genuine source. You can check out the endpoints for creating and managing domains at [API reference > Domains](/reference/create-domain).

## 1. Creating a new domain

You can use the endpoint `https://api.brevo.com/v3/senders/domains`with the `POST` method to send a request to the API for creating a new domain. You can use the cURL request below for this endpoint.

```curl
curl --request POST \
     --url https://api.brevo.com/v3/senders/domains \
     --header 'accept: application/json' \
     --header 'api-key:' \
     --header 'content-type: application/json' \
     --data '
{
  "name": "mycompany.com"
}
'
```

You can add your API key in the header `api-key` above in the cURL request. This endpoint only has one body parameter which is defined in the table below.

| Attribute | Datatype | Description                       | Value        |
| :-------- | :------- | :-------------------------------- | :----------- |
| `name`    | String   | Name of the domain being created. | mydomain.com |

<br />

**Response**

You will receive a success response something like this below:

```json
{
  "id": "641db448a6a7ea326e585e15",
  "domain_name": "mycompany.com",
  "message": "Domain added successfully. To authenticate it, add following DNS records",
  "dns_records": {
    "dkim_record": {
      "type": "TXT",
      "value": "k=rsa;p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDeMVIzrCa3T14JsNY0IRv5/2V1/v2itlviLQBwXsa7shBD6TrBkswsFUToPyMRWC9tbR/5ey0nRBH0ZVxp+lsmTxid2Y2z+FApQ6ra2VsXfbJP3HE6wAO0YTVEJt1TmeczhEd2Jiz/fcabIISgXEdSpTYJhb0ct0VJRxcg4c8c7wIDAQAB",
      "host_name": "mail._domainkey.",
      "status": false
    },
    "brevo_code": {
      "type": "TXT",
      "value": "brevo-code:4bc1566441c4131069853d135c5905ab",
      "host_name": "",
      "status": false
    }
  }
}
```

On the other hand, A bad request response would be something like this:

```json
{
  "code": "invalid_parameter",
  "message": "Enter domain name in correct format. Example: myexampledomain.com"
}
```

You can view the responses for the request you send below in the table:

| Response code | Message        | Description                                                                                       |
| :------------ | :------------- | :------------------------------------------------------------------------------------------------ |
| `200`         | Domain created | This response code is shown when a domain is created                                              |
| `400`         | Bad request    | A bad request has been sent to the API endpoint which involves invalid or missing parameters etc. |

<br />

## 2. Getting the list of your domains

You can use this endpoint to retrieve created domains. You can use the endpoint `https://api.brevo.com/v3/senders/domains` using the `GET` method. You can use the cURL request below

```curl
curl --request GET \
     --url https://api.brevo.com/v3/senders/domains \
     --header 'accept: application/json' \
     --header 'api-key: '
```

<Info title="No attributes for getting the list of your domains">
  There are no prominent attributes for getting the list of your domains. The request will use your API key and the endpoint to check the domains you have created and it will display them to you in response.
</Info>

<br />

**Response**

A sample response would return all the domains you have created just like in the below JSON format.

```json
{
  "domains": [
    {
      "id": "641db6b43f10ae7b6604d178",
      "domain_name": "mycompany.com",
      "authenticated": false,
      "verified": false,
      "validationRequest": null,
      "verifier": null,
      "authenticator": null,
      "creator": {
        "id": "63930fe975f3bf52825956b7",
        "email": "obaidullah.khan@brevo.com",
        "method": null,
        "creationDate": "2023-03-24T14:41:56+00:00"
      },
      "ip": null
    }
  ],
  "count": 1,
  "current_page": 1,
  "total_pages": 1
}
```

Response codes for the endpoint are mentioned below in a table.

| Response code | Message         | Description                                                                                        |
| :------------ | :-------------- | :------------------------------------------------------------------------------------------------- |
| `200`         | List of domains | A valid request displays the list of domains in the response.                                      |
| `400`         | Bad request     | A `400` response code is due to a bad request involving incorrect parameters or wrong API key etc. |

<br />

## 3. Delete a domain

You can delete a domain by using the endpoint `https://api.brevo.com/v3/senders/domains/{domainName}` with the `DELETE` method. You can put the domain name in endpoint URL in the cURL request as shown below.

```curl
curl --request DELETE \
     --url https://api.brevo.com/v3/senders/domains/mydomain.com \
     --header 'accept: application/json' \
     --header 'api-key: '
```

A sample and appropriate response would return `null` which shows that domain has been deleted. This endpoint only uses domainName as an attribute which is mentioned in the table below.

| Attribute    | Datatype | Description        | Value         |
| :----------- | :------- | :----------------- | :------------ |
| `domainName` | String   | Name of the domain | mycompany.com |

**Response**

| Response code | Message               | Description                                 |
| :------------ | :-------------------- | :------------------------------------------ |
| `200`         | Domain deleted        | Your domain is deleted.                     |
| `400`         | Bad request           | Invalid, incorrect, missing parameters etc. |
| `404`         | Domain does not exist | Domain does not exist in the database.      |


***

## slug: docs/domain-authentication-and-verification

You can authenticate and validate your domains after creating and managing them. You need a domain name which is valid so that it can be authenticated. To check out the public endpoints, you can go to [API reference > Domains](/reference/get-domain-configuration).

## 1. Validate domain configuration

You can use the endpoint `https://api.brevo.com/v3/senders/domains/{domainName}` with the `GET` method to validate your domain. You can use the cURL request below to send a request to the endpoint.

```curl
curl --request GET \
     --url https://api.brevo.com/v3/senders/domains/mycompany.com \
     --header 'accept: application/json' \
     --header 'api-key: '
```

This endpoint shows the configurations of a specific domain. There is only one attribute for this endpoint `domainName` which you have to append with the URL in the cURL request. It is defined below in the table:

| Attribute    | Datatype | Description        | Value         |
| :----------- | :------- | :----------------- | :------------ |
| `domainName` | String   | Name of the domain | mycompany.com |

<br />

**Response**

A sample response for the request would be something like:

```json
{
  "domain": "mycompany.com",
  "verified": false,
  "authenticated": false,
  "dns_records": {
    "dkim_record": {
      "type": "TXT",
      "value": "k=rsa;p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDeMVIzrCa3T14JsNY0IRv5/2V1/v2itlviLQBwXsa7shBD6TrBkswsFUToPyMRWC9tbR/5ey0nRBH0ZVxp+lsmTxid2Y2z+FApQ6ra2VsXfbJP3HE6wAO0YTVEJt1TmeczhEd2Jiz/fcabIISgXEdSpTYJhb0ct0VJRxcg4c8c7wIDAQAB",
      "host_name": "mail._domainkey.",
      "status": false
    },
    "brevo_code": {
      "type": "TXT",
      "value": "brevo-code:e760f020e6d438149540cfc757e99b5a",
      "host_name": "",
      "status": false
    }
  }
}
```

In the JSON format, the domains configurations are shown and if the domain is verified and authenticated. You can find some response codes below and their description.

| Response code | Message               | Description                                                                       |
| :------------ | :-------------------- | :-------------------------------------------------------------------------------- |
| `200`         | Domain configuration  | It shows the status of domain verification and authentication.                    |
| `400`         | Bad request           | Request fails due to a bad request involving incorrect or missing parameters etc. |
| `404`         | Domain does not exist | Request fails because the domain does not exist.                                  |

<br />

## 2.  Authenticate a domain

You can use the endpoint `https://api.brevo.com/v3/senders/domains/{domainName}/authenticate` with the `PUT` method to authenticate a domain. The cURL request below can be utilised to send a request to the endpoint.

```curl
curl --request PUT \
     --url https://api.brevo.com/v3/senders/domains/mycompany.com/authenticate \
     --header 'accept: application/json' \
     --header 'api-key: '
```

You can put the attribute `domainName` in the url of the cURL request as mentioned here `https://api.brevo.com/v3/senders/domains/{domainName}/authenticate`. The attribute is mentioned in the table below:

| Attribute    | Datatype | Description        | Value         |
| :----------- | :------- | :----------------- | :------------ |
| `domainName` | String   | Name of the domain | mycompany.com |

<br />

<Info title="How to get your domain verified?">
  There are three ways to authenticate your domain:

  1. DNS records: You need the Brevo record to verify your domain. To authenticate the domain, configure your domain with other remaining DNS records.
  2. Host a file: You can host a file in the root directory of the domain.
  3. Send an email: You can send email for a verification code which will verify the domain is authentic.
</Info>

<br />

**Response**

A sample response would be something like:

```json
{
  "domain_name": "mycompany.com",
  "message": "Domain has been authenticated successfully."
}
```

A few response codes and their descriptions are mentioned below in the table:

| Response code | Message               | Description                                                                                                                 |
| :------------ | :-------------------- | :-------------------------------------------------------------------------------------------------------------------------- |
| `200`         | Domain authenticated  | The domain is authenticated.                                                                                                |
| `400`         | Bad request           | Bad request due to invalid or missing parameters. It can also be due to a values mismatch with DKIM records and Brevo code. |
| `404`         | Domain does not exist | Domain does not exist in the database.                                                                                      |
***

## slug: docs/user-activity-logs

## Getting started with Accounts

Accounts at Brevo are used to hold the accounts information along with the payment plans and credit details of the clients. There are some pre-requisites to using the Accounts endpoints which include:

1. Having a valid Brevo account.
2. Having a valid and correct API key.
3. In some cases, only Enterprise clients can use the endpoints.

<br />

## 1. Get user activity logs

You can use the endpoint `https://api.brevo.com/v3/organization/activities` with the `GET` method. Through this endpoint, you can get the following information:

* Information about user login.
* When a user is invited to access the account, it provides the details regarding it.
* When you profile is edited, it notifies you about that.
* When the invited user accesses the account, it notifies you about that.
* If the user changes email, this endpoint will inform you about the information about email change.

<br />

The cURL request for `getaccountactivity` is mentioned below:

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/organization/activities?startDate=2023-01-01&endDate=2023-02-01&limit=10&offset=0' \
     --header 'accept: application/json' \
     --header 'api-key: '
```

<br />

This endpoint can be used by the Enterprise clients. The attributes for this endpoint are mentioned below in the table:

| Attribute   | Datatype | Description                                                                                                                                                                                                                                                                 | Value      |
| :---------- | :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------- |
| `startDate` | String   | Mandatory if endDate is used. Enter start date in the (YYYY-MM-DD) format to filter the activity in your account. Maximum time period that can be selected is one month. Additionally, you can retrieve activity logs from the past 12 months from the date of your search. | 2023-01-01 |
| `endDate`   | String   | Mandatory if startDate is used. Enter end date in(YYYY-MM-DD) format to filter the activity in your account. Maximum time period that can be selected is one month.                                                                                                         | 2023-02-01 |
| `limit`     | Int64    | Number of documents per page                                                                                                                                                                                                                                                | 10         |
| `offset`    | Int64    | Index of the first document in the page.                                                                                                                                                                                                                                    | 0          |

<br />

**Response**

A sample JSON response which shows the status of login and profile update would look something like this:

```json
{
  “logs”: [
    {
      “action”: “login-success”,
      “date”: “2023-03-16T16:49:23+05:30”,
      “user_email”: “test@mycompany.com”,
      “user_ip”: “192.158.1.34”,
      “user_agent”: “Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us)”
    },
    {
      “action”: “update-profile”,
      “date”: “2023-03-15T16:49:23+05:30”,
      “user_email”: “test@myexample.com”,
      “user_ip”: “192.158.1.38”,
      “user_agent”: “Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us)“,
      “count”: 2
    }
  ]
}
```

The response codes for the endpoints are mentioned below:

| Response code | Message                    | Description                                                                                                                                                         |
| :------------ | :------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `200`         | List of user activity logs | Shows the user activity logs                                                                                                                                        |
| `400`         | Bad request                | Bad request occurs due to problems like `invalid_parameter`, `permission_denied`  or `not_enough_credits`. It also arises if you are not using the Enterprise plan. |


***

## slug: docs/external-feeds-1

External feeds includes external content from webpages into your Brevo emails. The API is used in a way that it sends requests to the URL where the content is situated and then it updates the content in emails. You can use external feeds for various use cases such as:

1. You can send product recommendations for your customers in your online store.
2. You can show trends on cryptocurrency.
3. These can be used by finance companies, to monitor a stock.

## Requirements

You should keep in mind some requirements before getting started with External feeds. To use the endpoints you have to:

1. Create a user account with Brevo.
2. Log into your Brevo account.
3. Use an API key. You can consult [Guides > Welcome](/guides/key-concepts) to get your API key from  from the Brevo developers dashboard.


***

## slug: docs/getting-started-with-external-feeds

Here you can get to know about the working and handling the external feeds. Below are some methods to include an external feed in your emails.

## Working with External feeds

You can create an external feed using the [API endpoint](/reference/create-external-feed) in the public API reference.

There are **two ways** to connect the external feeds with the email templates which are:

<br />

**Html editor**

To add in html code, use this code below, before the html body.

```html
<!--feed.myvariable : {{feed.get("feedname")}}-->
```

where myvariable is variable name used to access feed data and feedname is the name of the feed you have setup via the API endpoint.

<br />

**Drag and drop editor**

For the drag and drop editor, you should be in developer mode. Add the code mentioned below, at the start of the template in the developer mode.

```yaml
feeds:
  -
    name: myvariable
    source: feedname
```

where myvariable is variable name used to access feed data and feedname is the name of the feed you have setup via the API endpoint.

### Accessing external feeds in email

To access the data from the external feeds, you have to utilize the code below:

```python
{{ feed.myvariable.field }}
{{ feed.myvariable.field.0.item }}
```

`field` is any field in the JSON and to access any item we suffix a number which starts from 0.

### Errors in external feeds

Errors may occur at various steps when using an external feed. If an error is encountered for a particular contact, that contact will be skipped from receiving the email campaign. If there is a general error that applies to all contacts, then all recipients will be skipped, and the reasons can be viewed in the email report.

Some common errors that can be encountered include:

* The external feed either does not exist or its definition is incorrect in the template.
* External feed placeholders are defined incorrectly in the template.
* An API issue prevents access to the external feed.

### How to access external feeds with token authentication

When creating the feeds, bearer token can be sent as headers for authentication. When the feed is called the token will be passed into the headers and the API is called with all the information provided by the user. An example of how the token will be passed in headers is mentioned below.

```json
headers : {
  "token": "Bearer token"
}
```

<br />

### Frequently Asked Questions (FAQ)

**When sending out an email for a campaign, lets hypothetically assume 50,000 recipients. Does Brevo's servers send 50,000 http requests to the API specified in external feed, or one request and use the same response JSON for all emails?**

*for global feed:*\
for 'n' contacts server will send request 'n' times to API  unless client has set `cache: 'true'` while creating feed.

**When sending out an email for a campaign using personal emails with attributes, do Brevo servers send one request per user or once for the whole campaign?**

*In case of personalised feed:*\
As value is expected to be different for each recipient, we don't consider caching functionality, server will send request multiple times as per number of recipients even if caching is `true`.

**If one request per user is sent, Do the http request to their external feed API send the attributes along as variables, either as POST variables or GET parameters?**

As of now we support GET and we don't send any variable to API, we replace the variable value at our end and then send the request to API.

\*\*If one request is sent per campaign and personalization is based on attributes mapped to the response JSON,\
How big is the response json file allowed to be? \*\*

There is no limit for response json as of now but yes we will suggest to have only required data, as more the response data more would be the latency.

<br />

## Examples of Global and Dynamic feeds

Here we mention examples of implementing global and personalized external feeds

### Global feed example

We will create an email campaign to share information about the top 5 trending cryptocurrencies. This is an example of a global feed, where all recipients will receive the same information.

Public API for this example is available at [this url.](https://api.coingecko.com/api/v3/search/trending)

**Step 1**: **Setup Feed**

Here we have added a new feed by the name `trendingcryptocoinsfeed`.

```curl
  curl --location --request POST 'https://api.sendinblue.com/v3/feeds' \
--header 'api-key: ' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name": "trendingcryptocoinsfeed",
    "url": "https://api.coingecko.com/api/v3/search/trending",
    "authType": "basic",
    "username": "test",
    "password": "test",
    "token": "token",
    "headers": [
        {
            "name": "abc",
            "value": "1"
        }
    ],
    "maxRetries": 1,
    "cache": true
}'
```

**Step 2a**: **Connect external feed to the template (New D\&D Editor)**

`Trendingcoins` is the variable connected to the feed **trendingcryptocoinsfeed**.\
Post this setup, `Trendingcoins` contains the entire data that can now be accessed in the template.

<div align="center">
  ![Image](file:13937d69-5702-4d67-bcbf-0d343ea110f6)
</div>

**Step 2b**: **Connect external feed to the template (HTML Editor)**

`Trendingcoins` is the variable connected to the feed **trendingcryptocoinsfeed**.\
Post this setup,`Trendingcoins` contains the entire data that can now be accessed in the template.

<div align="center">
  ![Image](file:478e9465-7c5b-4e83-981c-3dcbda2fa850)
</div>

**Step 3a**: **Access feed data in the template (New D\&D Editor)**

We will set up repeat block in the template so that we are able to show first 5 crypto coins in the newsletter.

We will show following data from data feeds into the newsletter.

* Crypto coin image, Crypto coin name, Crypto coin symbol, Crypto coin rank (market cap wise).

First let us define For loop using Repeat block feature. \[[Read more](https://help.sendinblue.com/hc/en-us/articles/360000591680) about repeat block]

<div align="center">
  ![Image](file:dd72d25b-2f39-4e3d-b175-e0c702eb3832)
</div>

Next we add the variables in the template. Since we have setup variable alias `Trending` we will use it to access feeds variables.

<div align="center">
  ![Image](file:a97073a2-d21a-4f5e-9233-86d41888d552)
</div>

Final email received shows top 5 trending crypto coins.

<div align="center">
  ![Image](file:7e912829-c28d-4d7b-8d05-ee27322eba77)
</div>

**Step 3b**: **Access feed data in the template (HTML editor)**

We will set up repeat block in the template so that we are able to show first 5 crypto coins in the newsletter.

We will show following data from data feeds into the newsletter.

* Crypto coin image, Crypto coin name, Crypto coin symbol, Crypto coin rank (market cap wise).

First let us define For loop using Repeat block feature. \[[Read more](https://help.sendinblue.com/hc/en-us/articles/360000591680) about repeat block]

Next we add the variables in the template. Since we have setup variable alias `Trending` we will use it to access feeds variables.

```html
<!--
   feed.Trendingcoins : {{ feed.get("trendingcryptocoinsfeed") }}
   -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="format-detection" content="telephone=no">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Information on crypto coins</title>
      <style type="text/css" emogrify="no">#outlook a { padding:0; } .ExternalClass { width:100%; } .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div { line-height: 100%; } table td { border-collapse: collapse; mso-line-height-rule: exactly; } .editable.image { font-size: 0 !important; line-height: 0 !important; } .nl2go_preheader { display: none !important; mso-hide:all !important; mso-line-height-rule: exactly; visibility: hidden !important; line-height: 0px !important; font-size: 0px !important; } body { width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0; } img { outline:none; text-decoration:none; -ms-interpolation-mode: bicubic; } a img { border:none; } table { border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt; } th { font-weight: normal; text-align: left; } *[class="gmail-fix"] { display: none !important; } </style>
      <style type="text/css" emogrify="no"> @media (max-width: 600px) { .gmx-killpill { content: ' \03D1';} } </style>
      <style type="text/css" emogrify="no">@media (max-width: 600px) { .gmx-killpill { content: ' \03D1';} .r0-c { box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 320px !important } .r1-o { border-style: solid !important; margin: 0 auto 0 auto !important; width: 320px !important } .r2-c { box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 100% !important } .r3-o { border-style: solid !important; margin: 0 auto 0 auto !important; width: 100% !important } .r4-i { background-color: #ffffff !important; padding-bottom: 20px !important; padding-left: 15px !important; padding-right: 15px !important; padding-top: 20px !important } .r5-c { box-sizing: border-box !important; display: block !important; valign: top !important; width: 100% !important } .r6-o { border-style: solid !important; width: 100% !important } .r7-i { padding-left: 0px !important; padding-right: 0px !important } .r8-i { padding-bottom: 15px !important; padding-top: 15px !important } .r9-c { box-sizing: border-box !important; text-align: left !important; valign: top !important; width: 100% !important } .r10-o { border-style: solid !important; margin: 0 auto 0 0 !important; width: 100% !important } .r11-i { padding-bottom: 0px !important; padding-top: 15px !important; text-align: left !important } .r12-i { padding-bottom: 15px !important; padding-top: 15px !important; text-align: left !important } .r13-i { background-color: #eff2f7 !important; padding-bottom: 20px !important; padding-left: 15px !important; padding-right: 15px !important; padding-top: 20px !important } .r14-i { padding-bottom: 0px !important; padding-top: 15px !important; text-align: center !important } .r15-i { padding-bottom: 0px !important; padding-top: 0px !important; text-align: center !important } .r16-i { padding-bottom: 15px !important; padding-top: 15px !important; text-align: center !important } .r17-c { box-sizing: border-box !important; text-align: center !important; width: 100% !important } .r18-i { padding-bottom: 15px !important; padding-left: 0px !important; padding-right: 0px !important; padding-top: 0px !important } .r19-c { box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 129px !important } .r20-o { border-style: solid !important; margin: 0 auto 0 auto !important; width: 129px !important } body { -webkit-text-size-adjust: none } .nl2go-responsive-hide { display: none } .nl2go-body-table { min-width: unset !important } .mobshow { height: auto !important; overflow: visible !important; max-height: unset !important; visibility: visible !important; border: none !important } .resp-table { display: inline-table !important } .magic-resp { display: table-cell !important } } </style>
      <!--[if !mso]><!-->
      <style type="text/css" emogrify="no"> </style>
      <!--<![endif]-->
      <style type="text/css">p, h1, h2, h3, h4, ol, ul { margin: 0; } a, a:link { color: #40464d; text-decoration: underline } .nl2go-default-textstyle { color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 16px; line-height: 1.5 } .default-button { border-radius: 4px; color: #ffffff; font-family: arial,helvetica,sans-serif; font-size: 16px; font-style: normal; font-weight: normal; line-height: 1.15; text-decoration: none; width: 50% } .default-heading1 { color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 36px } .default-heading2 { color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 32px } .default-heading3 { color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 24px } .default-heading4 { color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 18px } a[x-apple-data-detectors] { color: inherit !important; text-decoration: inherit !important; font-size: inherit !important; font-family: inherit !important; font-weight: inherit !important; line-height: inherit !important; } .no-show-for-you { border: none; display: none; float: none; font-size: 0; height: 0; line-height: 0; max-height: 0; mso-hide: all; overflow: hidden; table-layout: fixed; visibility: hidden; width: 0; } </style>
      <!--[if mso]>
      <xml>
         <o:OfficeDocumentSettings>
            <o:AllowPNG/>
            <o:PixelsPerInch>96</o:PixelsPerInch>
         </o:OfficeDocumentSettings>
      </xml>
      <![endif]-->
      <style type="text/css">a:link{color: #40464d; text-decoration: underline;}</style>
   </head>
   <body text="#3b3f44" link="#40464d" yahoo="fix" style="">
      <table cellspacing="0" cellpadding="0" border="0" role="presentation" class="nl2go-body-table" width="100%" style="width: 100%;">
         <tr>
            <td align="center" class="r0-c">
               <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="600" class="r1-o" style="table-layout: fixed; width: 600px;">
                  <tr>
                     <td valign="top" class="">
                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                           {% for Trending in feed.trendingcoins.coins | slice:":5" %}
                           <tr>
                              <td class="r2-c" align="center">
                                 <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r3-o" style="table-layout: fixed; width: 100%;">
                                    <!-- -->
                                    <tr>
                                       <td class="r4-i" style="background-color: #ffffff; padding-bottom: 20px; padding-top: 20px;">
                                          <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                             <tr>
                                                <th width="50%" valign="top" class="r5-c" style="font-weight: normal;">
                                                   <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r6-o" style="table-layout: fixed; width: 100%;">
                                                      <!-- -->
                                                      <tr>
                                                         <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                            <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                               <tr>
                                                                  <td class="r2-c" align="center">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="270" class="r3-o" style="table-layout: fixed; width: 270px;">
                                                                        <tr>
                                                                           <td class="r8-i" style="font-size: 0px; line-height: 0px; padding-bottom: 15px; padding-top: 15px;"> <img src="{{Trending.item.large}}" width="270" border="0" class="" style="display: block; width: 100%;"></td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                            </table>
                                                         </td>
                                                      </tr>
                                                   </table>
                                                </th>
                                                <th width="50%" valign="top" class="r5-c" style="font-weight: normal;">
                                                   <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r6-o" style="table-layout: fixed; width: 100%;">
                                                      <!-- -->
                                                      <tr>
                                                         <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                            <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="left" valign="top" class="r11-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 16px; line-height: 1.5; padding-top: 15px; text-align: left;">
                                                                              <div>
                                                                                 <p style="margin: 0; font-size: 22px;">{{Trending.item.name}}</p>
                                                                                 <p style="margin: 0; font-size: 22px;"> </p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="left" valign="top" class="r12-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 16px; line-height: 1.5; padding-bottom: 15px; padding-top: 15px; text-align: left;">
                                                                              <div>
                                                                                 <p style="margin: 0;"><strong>Market cap wise rank :</strong><br />{{Trending.item.market_cap_rank}}</p>
                                                                                 <p style="margin: 0;"> </p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                            </table>
                                                         </td>
                                                      </tr>
                                                   </table>
                                                </th>
                                             </tr>
                                          </table>
                                       </td>
                                    </tr>
                                 </table>
                              </td>
                           </tr>
                           {% endfor %}
                           <tr>
                              <td class="r2-c" align="center">
                                 <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r3-o" style="table-layout: fixed; width: 100%;">
                                    <!-- -->
                                    <tr>
                                       <td class="r13-i" style="background-color: #eff2f7; padding-bottom: 20px; padding-top: 20px;">
                                          <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                             <tr>
                                                <th width="100%" valign="top" class="r5-c" style="font-weight: normal;">
                                                   <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r6-o" style="table-layout: fixed; width: 100%;">
                                                      <!-- -->
                                                      <tr>
                                                         <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                            <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="center" valign="top" class="r14-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 18px; line-height: 1.5; padding-top: 15px; text-align: center;">
                                                                              <div>
                                                                                 <p style="margin: 0;"><strong>Coin</strong> <strong>Desk</strong></p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="center" valign="top" class="r15-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 18px; line-height: 1.5; text-align: center;">
                                                                              <div>
                                                                                 <p style="margin: 0; font-size: 14px;">2848 Brown Bear Drive</p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="center" valign="top" class="r14-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 18px; line-height: 1.5; padding-top: 15px; text-align: center;">
                                                                              <div>
                                                                                 <p style="margin: 0; font-size: 14px;">This email was sent to {{contact.EMAIL}}</p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="center" valign="top" class="r15-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 18px; line-height: 1.5; text-align: center;">
                                                                              <div>
                                                                                 <p style="margin: 0; font-size: 14px;">You've received this email because you've subscribed to our newsletter.</p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r9-c" align="left">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r10-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td align="center" valign="top" class="r16-i nl2go-default-textstyle" style="color: #3b3f44; font-family: arial,helvetica,sans-serif; font-size: 18px; line-height: 1.5; padding-bottom: 15px; padding-top: 15px; text-align: center;">
                                                                              <div>
                                                                                 <p style="margin: 0; font-size: 14px;"> <a href="{{ unsubscribe }}" style="color: #40464d; text-decoration: underline;">Unsubscribe</a></p>
                                                                              </div>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                               <tr>
                                                                  <td class="r17-c" align="center">
                                                                     <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r3-o" style="table-layout: fixed; width: 100%;">
                                                                        <tr>
                                                                           <td valign="top" class="r18-i" style="padding-bottom: 15px;">
                                                                              <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                 <tr>
                                                                                    <td class="r19-c" align="center">
                                                                                       <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="129" class="r20-o" style="table-layout: fixed;">
                                                                                          <tr>
                                                                                             <td height="48" class="" style="font-size: 0px; line-height: 0px;"> <img src="https://img.mailinblue.com/new_images/rnb/en.png" width="129" border="0" class="" style="display: block; width: 100%;"></td>
                                                                                          </tr>
                                                                                       </table>
                                                                                    </td>
                                                                                 </tr>
                                                                              </table>
                                                                           </td>
                                                                        </tr>
                                                                     </table>
                                                                  </td>
                                                               </tr>
                                                            </table>
                                                         </td>
                                                      </tr>
                                                   </table>
                                                </th>
                                             </tr>
                                          </table>
                                       </td>
                                    </tr>
                                 </table>
                              </td>
                           </tr>
                        </table>
                     </td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
   </body>
</html>
```

Final email received shows top 5 trending crypto coins.

<br />

<div align="center">
  ![Image](file:7e912829-c28d-4d7b-8d05-ee27322eba77)
</div>

### Personalized feed example

In this example, we will create an email campaign that provides information about each contact's favorite cryptocurrency. This will showcase a dynamic feed where each recipient receives unique, personalized information.

Public API for this example is available at [this url](https://api.coingecko.com/api/v3/coins/bitcoin).

**Step 1: Setup feed**

Here we have added a new feed by the name `favcryptocoinsfeed`. You may notice we have added Contact attribute `{{contact.FAVCOIN}}` in the URL. This will get replaced by contact’s favorite coin at time of email sending and therefore generate unique data for each recipient.

```javascript
curl --location --request POST 'https://api.sendinblue.com/v3/feeds' \
--header 'api-key: ' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name": "favcryptocoinsfeed",
    "url": "https://api.coingecko.com/api/v3/coins/{{contact.FAVCOIN}}",
    "authType": "basic",
    "username": "test",
    "password": "test",
    "token": "token",
    "headers": [
        {
            "name": "abc",
            "value": "1"
        }
    ],
    "maxRetries": 1,
    "cache": true
}'
```

**Step 2: Prepare contact recipients**

Add a new attribute FAVCOIN and add its value for each recipient who will receive this newsletter.

<div align="center">
  ![Image](file:73f0c712-8d01-4b6f-9319-8bf41672e600)
</div>

**Step 3a: Connect external feed to the template (New D\&D Editor)**

`Favcoin` is the variable connected to the feed **favcryptocoinsfeed**.\
Post this setup,`Favcoin` contains the entire data that can now be accessed in the template.

<div align="center">
  ![Image](file:c07e7791-22d2-43e4-af77-506de68b60ce)
</div>

**Step 3b: Connect external feed to the template (HTML Editor)**

`Favcoin` is the variable connected to the feed **favcryptocoinsfeed**.\
Post this setup,`Favcoin` contains the entire data that can now be accessed in the template.

<div align="center">
  ![Image](file:9679eb95-7d42-4b17-bca5-db4d966dd4c6)
</div>

**Step 4a: Access feed data in the template (New D\&D Editor)**

We will show following data from data feeds into the newsletter.

* Crypto coin image, Crypto coin name, Crypto coin symbol, Crypto coin rank (market cap wise), Crypto coin price, Description and link to the coin homepage.

We add the variables in the template. Since we have setup variable alias `Favcoin` we will use it to access feeds variables.

<div align="center">
  ![Image](file:e26e48a6-9625-47ce-81a0-5fae9d0b8919)
</div>

Final email received shows unique crypto coin information for 2 different recipients.

<div align="center">
  ![Image](file:65ce086b-ae93-433f-8651-dc7d03845870)
</div>

<div align="center">
  ![Image](file:24057e6f-ef44-44e5-ba2c-9cae74bfccda)
</div>

**Step 4b: Access feed data in the template (HTML Editor)**

We will show following data from data feeds into the newsletter.

* Crypto coin image, Crypto coin name, Crypto coin symbol, Crypto coin rank (market cap wise), Crypto coin price, Description and link to the coin homepage.

We add the variables in the template. Since we have setup variable alias `Favcoin` we will use it to access feeds variables.

```html
<!--
	feed.Favcoin : {{ feed.get("favcryptocoinsfeed") }}
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Information on crypto coins</title>
        <style type="text/css" emogrify="no">
            #outlook a {
                padding: 0;
            }
            .ExternalClass {
                width: 100%;
            }
            .ExternalClass,
            .ExternalClass p,
            .ExternalClass span,
            .ExternalClass font,
            .ExternalClass td,
            .ExternalClass div {
                line-height: 100%;
            }
            table td {
                border-collapse: collapse;
                mso-line-height-rule: exactly;
            }
            .editable.image {
                font-size: 0 !important;
                line-height: 0 !important;
            }
            .nl2go_preheader {
                display: none !important;
                mso-hide: all !important;
                mso-line-height-rule: exactly;
                visibility: hidden !important;
                line-height: 0px !important;
                font-size: 0px !important;
            }
            body {
                width: 100% !important;
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
                margin: 0;
                padding: 0;
            }
            img {
                outline: none;
                text-decoration: none;
                -ms-interpolation-mode: bicubic;
            }
            a img {
                border: none;
            }
            table {
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }
            th {
                font-weight: normal;
                text-align: left;
            }
            *[class="gmail-fix"] {
                display: none !important;
            }
        </style>
        <style type="text/css" emogrify="no">
            @media (max-width: 600px) {
                .gmx-killpill {
                    content: " \03D1";
                }
            }
        </style>
        <style type="text/css" emogrify="no">
            @media (max-width: 600px) {
                .gmx-killpill {
                    content: " \03D1";
                }
                .r0-c {
                    box-sizing: border-box !important;
                    width: 100% !important;
                }
                .r1-o {
                    border-style: solid !important;
                    width: 100% !important;
                }
                .r2-i {
                    background-color: transparent !important;
                }
                .r3-c {
                    box-sizing: border-box !important;
                    text-align: center !important;
                    valign: top !important;
                    width: 320px !important;
                }
                .r4-o {
                    border-style: solid !important;
                    margin: 0 auto 0 auto !important;
                    width: 320px !important;
                }
                .r5-i {
                    padding-bottom: 5px !important;
                    padding-top: 5px !important;
                }
                .r6-c {
                    box-sizing: border-box !important;
                    display: block !important;
                    valign: top !important;
                    width: 100% !important;
                }
                .r7-i {
                    padding-left: 0px !important;
                    padding-right: 0px !important;
                }
                .r8-c {
                    box-sizing: border-box !important;
                    text-align: center !important;
                    width: 100% !important;
                }
                .r9-o {
                    border-style: solid !important;
                    margin: 0 auto 0 auto !important;
                    width: 100% !important;
                }
                .r10-i {
                    padding-left: 10px !important;
                    padding-right: 10px !important;
                    text-align: center !important;
                }
                .r11-c {
                    box-sizing: border-box !important;
                    text-align: center !important;
                    valign: top !important;
                    width: 100% !important;
                }
                .r12-i {
                    background-color: #ffffff !important;
                    padding-bottom: 0px !important;
                    padding-left: 15px !important;
                    padding-right: 15px !important;
                    padding-top: 0px !important;
                }
                .r13-i {
                    padding-bottom: 0px !important;
                    padding-left: 0px !important;
                    padding-right: 0px !important;
                    padding-top: 0px !important;
                }
                .r14-c {
                    box-sizing: border-box !important;
                    text-align: left !important;
                    valign: top !important;
                    width: 100% !important;
                }
                .r15-o {
                    border-style: solid !important;
                    margin: 0 auto 0 0 !important;
                    width: 100% !important;
                }
                .r16-i {
                    padding-bottom: 0px !important;
                    padding-left: 0px !important;
                    padding-right: 0px !important;
                    padding-top: 15px !important;
                    text-align: left !important;
                }
                .r17-i {
                    padding-bottom: 0px !important;
                    padding-left: 0px !important;
                    padding-right: 0px !important;
                    padding-top: 0px !important;
                    text-align: left !important;
                }
                .r18-o {
                    border-style: solid !important;
                    margin: 0 auto 0 auto !important;
                    margin-bottom: 15px !important;
                    margin-top: 15px !important;
                    width: 100% !important;
                }
                .r19-i {
                    text-align: center !important;
                }
                .r20-r {
                    background-color: #40464d !important;
                    border-radius: 4px !important;
                    border-width: 0px !important;
                    box-sizing: border-box;
                    height: initial !important;
                    padding-bottom: 12px !important;
                    padding-left: 5px !important;
                    padding-right: 5px !important;
                    padding-top: 12px !important;
                    text-align: center !important;
                    width: 100% !important;
                }
                .r21-i {
                    background-color: #eff2f7 !important;
                    padding-bottom: 20px !important;
                    padding-left: 15px !important;
                    padding-right: 15px !important;
                    padding-top: 20px !important;
                }
                .r22-i {
                    padding-bottom: 0px !important;
                    padding-top: 15px !important;
                    text-align: center !important;
                }
                .r23-i {
                    padding-bottom: 0px !important;
                    padding-top: 0px !important;
                    text-align: center !important;
                }
                .r24-i {
                    padding-bottom: 15px !important;
                    padding-top: 15px !important;
                    text-align: center !important;
                }
                .r25-i {
                    padding-bottom: 15px !important;
                    padding-left: 0px !important;
                    padding-right: 0px !important;
                    padding-top: 0px !important;
                }
                .r26-c {
                    box-sizing: border-box !important;
                    text-align: center !important;
                    valign: top !important;
                    width: 129px !important;
                }
                .r27-o {
                    border-style: solid !important;
                    margin: 0 auto 0 auto !important;
                    width: 129px !important;
                }
                body {
                    -webkit-text-size-adjust: none;
                }
                .nl2go-responsive-hide {
                    display: none;
                }
                .nl2go-body-table {
                    min-width: unset !important;
                }
                .mobshow {
                    height: auto !important;
                    overflow: visible !important;
                    max-height: unset !important;
                    visibility: visible !important;
                    border: none !important;
                }
                .resp-table {
                    display: inline-table !important;
                }
                .magic-resp {
                    display: table-cell !important;
                }
            }
        </style>
        <!--[if !mso]><!-->
        <style type="text/css" emogrify="no"></style>
        <!--<![endif]-->
        <style type="text/css">
            p,
            h1,
            h2,
            h3,
            h4,
            ol,
            ul {
                margin: 0;
            }
            a,
            a:link {
                color: #40464d;
                text-decoration: underline;
            }
            .nl2go-default-textstyle {
                color: #3b3f44;
                font-family: arial, helvetica, sans-serif;
                font-size: 16px;
                line-height: 1.5;
            }
            .default-button {
                border-radius: 4px;
                color: #ffffff;
                font-family: arial, helvetica, sans-serif;
                font-size: 16px;
                font-style: normal;
                font-weight: normal;
                line-height: 1.15;
                text-decoration: none;
                width: 50%;
            }
            .default-heading1 {
                color: #1f2d3d;
                font-family: arial, helvetica, sans-serif;
                font-size: 36px;
            }
            .default-heading2 {
                color: #1f2d3d;
                font-family: arial, helvetica, sans-serif;
                font-size: 32px;
            }
            .default-heading3 {
                color: #1f2d3d;
                font-family: arial, helvetica, sans-serif;
                font-size: 24px;
            }
            .default-heading4 {
                color: #1f2d3d;
                font-family: arial, helvetica, sans-serif;
                font-size: 18px;
            }
            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: inherit !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }
            .no-show-for-you {
                border: none;
                display: none;
                float: none;
                font-size: 0;
                height: 0;
                line-height: 0;
                max-height: 0;
                mso-hide: all;
                overflow: hidden;
                table-layout: fixed;
                visibility: hidden;
                width: 0;
            }
        </style>
        <!--[if mso]>
            <xml>
                <o:OfficeDocumentSettings> <o:AllowPNG /> <o:PixelsPerInch>96</o:PixelsPerInch> </o:OfficeDocumentSettings>
            </xml>
        <![endif]-->
        <style type="text/css">
            a:link {
                color: #40464d;
                text-decoration: underline;
            }
        </style>
    </head>
    <body text="#3b3f44" link="#40464d" yahoo="fix" style="">
        <table cellspacing="0" cellpadding="0" border="0" role="presentation" class="nl2go-body-table" width="100%" style="width: 100%;">
            <tr>
                <td align="" class="r0-c">
                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                        <!-- -->
                        <tr>
                            <td valign="top" class="r2-i" style="background-color: transparent;">
                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                    <tr>
                                        <td class="r3-c" align="center">
                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="600" class="r4-o" style="table-layout: fixed;">
                                                <!-- -->
                                                <tr>
                                                    <td class="r5-i" style="padding-bottom: 5px; padding-top: 5px;">
                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                            <tr>
                                                                <th width="100%" valign="top" class="r6-c" style="font-weight: normal;">
                                                                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                                                                        <!-- -->
                                                                        <tr>
                                                                            <td valign="top" class="r7-i" style="padding-left: 10px; padding-right: 10px;">
                                                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                    <tr>
                                                                                        <td class="r8-c" align="center">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r9-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        class="r10-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 16px;
                                                                                                            padding-left: 30px;
                                                                                                            padding-right: 30px;
                                                                                                            text-align: center;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0;">
                                                                                                                <a href="{{ mirror }}" style="color: #40464d; text-decoration: underline;">
                                                                                                                    <span style="font-family: arial, helvetica, sans-serif; font-size: 12px; text-decoration: underline;">
                                                                                                                        View in browser
                                                                                                                    </span>
                                                                                                                </a>
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="center" class="r3-c">
                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="600" class="r4-o" style="table-layout: fixed; width: 600px;">
                        <tr>
                            <td valign="top" class="">
                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                    <tr>
                                        <td class="r11-c" align="center">
                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r9-o" style="table-layout: fixed; width: 100%;">
                                                <!-- -->
                                                <tr>
                                                    <td class="r12-i" style="background-color: #ffffff;">
                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                            <tr>
                                                                <th width="50%" valign="top" class="r6-c" style="font-weight: normal;">
                                                                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                                                                        <!-- -->
                                                                        <tr>
                                                                            <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                    <tr>
                                                                                        <td class="r11-c" align="center">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="270" class="r9-o" style="table-layout: fixed; width: 270px;">
                                                                                                <tr>
                                                                                                    <td class="r13-i" style="font-size: 0px; line-height: 0px;">
                                                                                                        <img src="{{feed.Favcoin.image.large}}" width="270" border="0" class="" style="display: block; width: 100%;" />
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                                <th width="50%" valign="top" class="r6-c" style="font-weight: normal;">
                                                                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                                                                        <!-- -->
                                                                        <tr>
                                                                            <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="left"
                                                                                                        valign="top"
                                                                                                        class="r16-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 1.5;
                                                                                                            padding-top: 15px;
                                                                                                            text-align: left;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0; font-size: 22px;"><strong>{{feed.Favcoin.name}}</strong> ({{feed.Favcoin.symbol}})</p>
                                                                                                            <p style="margin: 0; font-size: 22px;"></p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="left"
                                                                                                        valign="top"
                                                                                                        class="r17-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 1.5;
                                                                                                            text-align: left;
                                                                                                            word-wrap: break-word;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0;"><strong>Market cap wise rank : </strong>{{feed.Favcoin.market_cap_rank}}</p>
                                                                                                            <p style="margin: 0;">
                                                                                                                <br />
                                                                                                                <strong>Current price : </strong><br />
                                                                                                                <strong>$ </strong>{{feed.Favcoin.market_data.current_price.usd}}
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="r11-c" align="center">
                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r9-o" style="table-layout: fixed; width: 100%;">
                                                <!-- -->
                                                <tr>
                                                    <td class="r12-i" style="background-color: #ffffff;">
                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                            <tr>
                                                                <th width="100%" valign="top" class="r6-c" style="font-weight: normal;">
                                                                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                                                                        <!-- -->
                                                                        <tr>
                                                                            <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="left"
                                                                                                        valign="top"
                                                                                                        class="r17-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 1.5;
                                                                                                            text-align: left;
                                                                                                            word-wrap: break-word;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0;">{{feed.Favcoin.description.en|safe|truncatewords: 50}}</p>
                                                                                                            <p style="margin: 0;">{{ contact.FIRSTNAME }}</p>
                                                                                                            <p style="margin: 0;">{{params.key}}</p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r11-c" align="center">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="285" class="r18-o" style="table-layout: fixed; width: 285px;">
                                                                                                <tr class="nl2go-responsive-hide">
                                                                                                    <td height="15" style="font-size: 15px; line-height: 15px;">­</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td
                                                                                                        height="18"
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r19-i nl2go-default-textstyle"
                                                                                                        style="color: #3b3f44; font-family: arial, helvetica, sans-serif; font-size: 16px; line-height: 1.5;"
                                                                                                    >
                                                                                                        <!--[if mso]>
                                                                                                            <v:roundrect
                                                                                                                xmlns:v="urn:schemas-microsoft-com:vml"
                                                                                                                xmlns:w="urn:schemas-microsoft-com:office:word"
                                                                                                                href="{{Favcoin.links.homepage}}"
                                                                                                                style="v-text-anchor: middle; height: 41px; width: 284px;"
                                                                                                                arcsize="10%"
                                                                                                                fillcolor="#40464d"
                                                                                                                strokecolor="#40464d"
                                                                                                                strokeweight="1px"
                                                                                                                data-btn="1"
                                                                                                            >
                                                                                                                <w:anchorlock />
                                                                                                                <v:textbox inset="0,0,0,0">
                                                                                                                    <div style="display: none;">
                                                                                                                        <center class="default-button" style="background-color: #40464d;"><p>View more</p></center>
                                                                                                                    </div>
                                                                                                                </v:textbox>
                                                                                                            </v:roundrect>
                                                                                                        <![endif]-->
                                                                                                        <!--[if !mso]><!-- -->
                                                                                                        <a
                                                                                                            href="{{Favcoin.links.homepage}}"
                                                                                                            class="r20-r default-button"
                                                                                                            target="_blank"
                                                                                                            data-btn="1"
                                                                                                            style="
                                                                                                                font-style: normal;
                                                                                                                font-weight: normal;
                                                                                                                line-height: 1.15;
                                                                                                                text-decoration: none;
                                                                                                                border-style: solid;
                                                                                                                word-wrap: break-word;
                                                                                                                display: inline-block;
                                                                                                                -webkit-text-size-adjust: none;
                                                                                                                mso-hide: all;
                                                                                                                background-color: #40464d;
                                                                                                                border-color: #40464d;
                                                                                                                border-radius: 4px;
                                                                                                                border-width: 0px;
                                                                                                                color: #ffffff;
                                                                                                                font-family: arial, helvetica, sans-serif;
                                                                                                                font-size: 16px;
                                                                                                                height: 18px;
                                                                                                                padding-bottom: 12px;
                                                                                                                padding-left: 5px;
                                                                                                                padding-right: 5px;
                                                                                                                padding-top: 12px;
                                                                                                                width: 275px;
                                                                                                            "
                                                                                                        >
                                                                                                            <p style="margin: 0;">View more</p>
                                                                                                        </a>
                                                                                                        <!--<![endif]-->
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr class="nl2go-responsive-hide">
                                                                                                    <td height="15" style="font-size: 15px; line-height: 15px;">­</td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="r11-c" align="center">
                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r9-o" style="table-layout: fixed; width: 100%;">
                                                <!-- -->
                                                <tr>
                                                    <td class="r21-i" style="background-color: #eff2f7; padding-bottom: 20px; padding-top: 20px;">
                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                            <tr>
                                                                <th width="100%" valign="top" class="r6-c" style="font-weight: normal;">
                                                                    <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r1-o" style="table-layout: fixed; width: 100%;">
                                                                        <!-- -->
                                                                        <tr>
                                                                            <td valign="top" class="r7-i" style="padding-left: 15px; padding-right: 15px;">
                                                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r22-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 18px;
                                                                                                            line-height: 1.5;
                                                                                                            padding-top: 15px;
                                                                                                            text-align: center;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0;"><strong>Coin</strong> <strong>Desk</strong></p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r23-i nl2go-default-textstyle"
                                                                                                        style="color: #3b3f44; font-family: arial, helvetica, sans-serif; font-size: 18px; line-height: 1.5; text-align: center;"
                                                                                                    >
                                                                                                        <div><p style="margin: 0; font-size: 14px;">2848 Brown Bear Drive</p></div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r22-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 18px;
                                                                                                            line-height: 1.5;
                                                                                                            padding-top: 15px;
                                                                                                            text-align: center;
                                                                                                        "
                                                                                                    >
                                                                                                        <div><p style="margin: 0; font-size: 14px;">This email was sent to {{contact.EMAIL}}</p></div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r23-i nl2go-default-textstyle"
                                                                                                        style="color: #3b3f44; font-family: arial, helvetica, sans-serif; font-size: 18px; line-height: 1.5; text-align: center;"
                                                                                                    >
                                                                                                        <div><p style="margin: 0; font-size: 14px;">You've received this email because you've subscribed to our newsletter.</p></div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r14-c" align="left">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r15-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="center"
                                                                                                        valign="top"
                                                                                                        class="r24-i nl2go-default-textstyle"
                                                                                                        style="
                                                                                                            color: #3b3f44;
                                                                                                            font-family: arial, helvetica, sans-serif;
                                                                                                            font-size: 18px;
                                                                                                            line-height: 1.5;
                                                                                                            padding-bottom: 15px;
                                                                                                            padding-top: 15px;
                                                                                                            text-align: center;
                                                                                                        "
                                                                                                    >
                                                                                                        <div>
                                                                                                            <p style="margin: 0; font-size: 14px;">
                                                                                                                <a href="{{ unsubscribe }}" style="color: #40464d; text-decoration: underline;">Unsubscribe</a>
                                                                                                            </p>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="r8-c" align="center">
                                                                                            <table cellspacing="0" cellpadding="0" border="0" role="presentation" width="100%" class="r9-o" style="table-layout: fixed; width: 100%;">
                                                                                                <tr>
                                                                                                    <td valign="top" class="r25-i" style="padding-bottom: 15px;">
                                                                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" role="presentation">
                                                                                                            <tr>
                                                                                                                <td class="r26-c" align="center">
                                                                                                                    <table
                                                                                                                        cellspacing="0"
                                                                                                                        cellpadding="0"
                                                                                                                        border="0"
                                                                                                                        role="presentation"
                                                                                                                        width="129"
                                                                                                                        class="r27-o"
                                                                                                                        style="table-layout: fixed;"
                                                                                                                    >
                                                                                                                        <tr>
                                                                                                                            <td height="48" class="" style="font-size: 0px; line-height: 0px;">
                                                                                                                                <img
                                                                                                                                    src="https://img.mailinblue.com/new_images/rnb/en.png"
                                                                                                                                    width="129"
                                                                                                                                    border="0"
                                                                                                                                    class=""
                                                                                                                                    style="display: block; width: 100%;"
                                                                                                                                />
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </th>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </body>
</html>
```

Final email received shows unique crypto coin information for 2 different recipients.

<div align="center">
  ![Image](file:65ce086b-ae93-433f-8651-dc7d03845870)
</div>

<br />

<div align="center">
  ![Image](file:24057e6f-ef44-44e5-ba2c-9cae74bfccda)
</div>


***

## slug: docs/external-feeds-management

This document provides a descriptive view on the public [API reference](/reference/get-all-external-feeds) for the External feed endpoints.

## 1. Fetch all external feeds

To call this API, you need to request the endpoint `https://api.brevo.com/v3/feeds`  with the `GET` method. This endpoint performs the function of retrieving all of your created external feeds. You can use the cURL request below:

```curl
curl --request GET \
     --url 'https://api.brevo.com/v3/feeds?search=search&startDate=2022-09-04&endDate=2022-10-01&sort=desc&authType=basic&limit=50&offset=0' \
     --header 'accept: application/json' \
     --header 'api-key: '
```

The attributes used in the cURL request are defined below in a table.

| Attributes  | Datatype | Description                                                                                                                                            | Value      |
| :---------- | :------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- | :--------- |
| `search`    | String   | Can be used to filter records by search keyword on feed name                                                                                           | search     |
| `startDate` | Date     | Mandatory if endDate is used. Starting date (YYYY-MM-DD) from which you want to fetch the list. Can be maximum 30 days older than current date.        | 2022-09-04 |
| `endDate`   | Date     | Mandatory if startDate is used. Ending date (YYYY-MM-DD) till which you want to fetch the list. Maximum time period that can be selected is one month. | 2022-10-01 |
| `sort`      | String   | Sort the results in the ascending/descending order of record creation. Default order is descending if sort is not passed.                              | desc       |
| `authType`  | String   | Filter the records by authType of the feed. (Has multiple authentication types)                                                                        | basic      |
| `limit`     | Int64    | Number of documents returned per page.                                                                                                                 | 50         |
| `offset`    | Int64    | Index of the first document on the page.                                                                                                               | 0          |

**Response**

A sample JSON response for the request would be:

```json
{
  "count": 3,
  "feeds": [
    {
      "id": "d955aaa4-f4d6-4557-aa14-24286542ed8d",
      "name": "api feed token",
      "url": "https://abc.com/",
      "authType": "token",
      "token": "jfhdkjdfhjkfdhjkdfhjkdfhkj",
      "headers": [
        {
          "name": "key",
          "value": "val"
        }
      ],
      "maxRetries": 4,
      "cache": true,
      "createdAt": "2022-10-06T05:03:47.053000000Z",
      "modifiedAt": "2022-10-06T05:03:47.053000000Z"
    },
    {
      "id": "311a71ac-bebc-42cf-963d-d8666dfe53e9",
      "name": "api feed basic",
      "url": "https://abc.com/",
      "authType": "basic",
      "username": "user",
      "password": "pass",
      "headers": null,
      "maxRetries": 2,
      "cache": false,
      "createdAt": "2022-10-06T04:48:19.767000000Z",
      "modifiedAt": "2022-10-06T04:48:19.767000000Z"
    }
  ]
}
```

Some response codes are defined in the table below:

| Response code | Message                   | Description                                                                                                           |
| :------------ | :------------------------ | :-------------------------------------------------------------------------------------------------------------------- |
| `200`         | External feeds            | Displays the external feeds details                                                                                   |
| `400`         | Invalid parameters passed | Error code occurs in case of failure by passing invalid parameters or out of range parameters etc.                    |
| `404`         | Record not found          | Error code is displayed in case the results or records are not found. This may occur due to an incorrect request etc. |

<br />

## 2. Create an external feed

To create an external feed, you need to call the endpoint `https://api.brevo.com/v3/feeds` with the `POST` method. You can use the cURL request below to send a request to the API.

```curl
curl --request POST \
     --url https://api.brevo.com/v3/feeds \
     --header 'accept: application/json' \
     --header 'api-key: ' \
     --header 'content-type: application/json' \
     --data '
{
  "authType": "basic",
  "headers": [
    {
      "name": "userId",
      "value": "user12345"
    }
  ],
  "maxRetries": 5,
  "cache": false,
  "name": "New feed",
  "url": "http://requestb.in/173lyyx1",
  "username": "user",
  "password": "password",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
}
'
```

The values and attributes to create a feed are mentioned below in a table:

| Attribute    | Datatype         | Description                                                   | Value                                                      |
| :----------- | :--------------- | :------------------------------------------------------------ | :--------------------------------------------------------- |
| `name`       | String           | Name of the feed                                              | New feed                                                   |
| `url`        | Url              | URL of the feed                                               | [http://requestb.in/173lyyx1](http://requestb.in/173lyyx1) |
| `authType`   | String           | Auth type of the feed: basic, token or noAuth                 | basic                                                      |
| `username`   | String           | Username for authType                                         | user                                                       |
| `password`   | String           | Password for authType                                         | password                                                   |
| `token`      | String           | Token for authType                                            | "Random string of letters and number"                      |
| `headers`    | Array of objects | An array of objects which provide custom headers for the feed | it has objects name and value                              |
| `maxRetries` | integer          | Maximum number of retries on the feed url                     | 5                                                          |
| `cache`      | boolean          | Toggle caching of feed url response                           | false                                                      |

As headers is an array of objects, it has two more attributes name and value:

| Object  | Datatype | Description         | Value     |
| :------ | :------- | :------------------ | :-------- |
| `name`  | String   | Name of the header  | userId    |
| `value` | String   | Value of the header | user12345 |

**Response**

When the request is run, the API will send you an id in the response which will be the unique id of the feed. A sample is given below:

```json
{
  "id": "23befbae-1505-47a8-bd27-e30ef739f32c"
}
```

The response codes are defined below:

| Response code | Message              | Description                                                                                   |
| :------------ | :------------------- | :-------------------------------------------------------------------------------------------- |
| `201`         | Successfully created | Successfully creates external feed and you get an id in the response which is id of the feed. |
| `400`         | Bad request          | Request fails due to invalid, missing parameters or an incorrect way of sending the request.  |

## 3. Get an external feed by UUID

To send a request, you need to call the endpoint `https://api.brevo.com/v3/feeds/{uuid}` with the `GET` method. You can use the cURL request below:

```curl
curl --request GET \
     --url https://api.brevo.com/v3/feeds/38f351fb-6e77-4b38-979a-a2465260449e \
     --header 'accept: application/json' \
     --header 'api-key: '
```

There is only one attribute which is `uuid` which is a universal identifier for the external feed. It is defined in the table below:

| Attribute | Datatype | Description               | Value                                |
| :-------- | :------- | :------------------------ | :----------------------------------- |
| `uuid`    | String   | UUID of the feed to fetch | 38f351fb-6e77-4b38-979a-a2465260449e |

**Response**

```json
{
  "id": "d955aaa4-f4d6-4557-aa14-24286542ed8d",
  "name": "api feed token",
  "url": "https://abc.com/",
  "authType": "token",
  "token": "jfhdkjdfhjkfdhjkdfhjkdfhkj",
  "headers": [
    {
      "name": "key",
      "value": "val"
    }
  ],
  "maxRetries": 4,
  "cache": true,
  "createdAt": "2022-10-06T05:03:47.053000000Z",
  "modifiedAt": "2022-10-06T05:03:47.053000000Z"
}
```

| Response code | Message        | Description                                                                                                         |
| :------------ | :------------- | :------------------------------------------------------------------------------------------------------------------ |
| `200`         | External feeds | Displays the external fields details                                                                                |
| `400`         | Bad request    | Error code occurs in case of a bad request by passing invalid parameters or out of range parameters etc.            |
| `404`         | Feed not found | Error code is displayed in case the results or feeds are not found. This may occur due to an incorrect request etc. |

## 4. Update an external feed

You can use this endpoint `https://api.brevo.com/v3/feeds/{uuid}` by calling the PUT method to update an external feed. You can use the cURL request below to send the request:

```curl
curl --request PUT \
     --url https://api.brevo.com/v3/feeds/38f351fb-6e77-4b38-979a-a2465260449e \
     --header 'accept: application/json' \
     --header 'content-type: application/json' \
     --data '
{
  "headers": [
    {
      "name": "userId",
      "value": "user12345"
    }
  ],
  "maxRetries": 5,
  "cache": false,
  "name": "New feed",
  "url": "http://requestb.in/173lyyx1",
  "authType": "token",
  "username": "user",
  "password": "password",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
}
'
```

There are two types of parameters to update a field **path params** and **body params** which are mentioned below:

**Path params**

| Attribute | Datatype | Description                | Value                                |
| :-------- | :------- | :------------------------- | :----------------------------------- |
| `uuid`    | String   | UUID of the feed to update | 38f351fb-6e77-4b38-979a-a2465260449e |

**Body params**

| Attribute    | Datatype         | Description                                 | Value                                                      |
| :----------- | :--------------- | :------------------------------------------ | :--------------------------------------------------------- |
| `name`       | String           | Name of the feed                            | New feed                                                   |
| `url`        | Url              | Url of the feed                             | [http://requestb.in/173lyyx1](http://requestb.in/173lyyx1) |
| `authType`   | String           | Auth type of the feed: basic, token, noAuth | token                                                      |
| `username`   | String           | Username for authType basic                 | user                                                       |
| `password`   | String           | Password for authType basic                 | password                                                   |
| `token`      | String           | Token for authType token                    | Random numbers and letters                                 |
| `headers`    | Array of objects | Custom headers for the feed                 | Contains objects name and value                            |
| `maxRetries` | Integer          | Maximum number of retries on the feed url   | 5                                                          |
| `cache`      | Boolean          | Toggle caching of feed url response         | false                                                      |

As `headers` is an array of objects, it contains two objects which are:

| Object  | Datatype | Description     | Value     |
| :------ | :------- | :-------------- | :-------- |
| `name`  | String   | Name of header  | userId    |
| `value` | String   | Value of header | user12345 |

**Response**

A sample response would show no message but with a 204 response code which shows that the external feed has been updated. Below some of the response codes and their descriptions are mentioned:

| Response code | Message        | Description                                                                                              |
| :------------ | :------------- | :------------------------------------------------------------------------------------------------------- |
| `204`         | Feed updated   | Feed is updated of the response code `204` is displayed.                                                 |
| `400`         | Bad request    | Bad request which fails the request due to bad or invalid parameters.                                    |
| `404`         | Feed not found | `404`is displayed when the feed cannot be found maybe due to inputting the incorrect parameters or UUID. |

<br />

## 5. Delete an external feed

To delete a feed, you can call the endpoint `https://api.brevo.com/v3/feeds/{uuid}` with the `DELETE` method. For the deletion, you can make use of the cURL request below.

```curl
curl --request DELETE \
     --url https://api.brevo.com/v3/feeds/38f351fb-6e77-4b38-979a-a2465260449e \
     --header 'accept: application/json' \
     --header 'api-key: '
```

Only `uuid` is used as an attribute and it is defined below.

| Attribute | Datatype | Description               | Value                                |
| :-------- | :------- | :------------------------ | :----------------------------------- |
| `uuid`    | String   | UUID of the feed to fetch | 38f351fb-6e77-4b38-979a-a2465260449e |

**Response**

A sample JSON response would show nothing with the response code 200 which shows that the feed has been deleted.

Response codes for this endpoint are mentioned in the table.

| Response code | Message        | Description                                                             |
| :------------ | :------------- | :---------------------------------------------------------------------- |
| `200`         | Feed deleted   | Feed is deleted successfully.                                           |
| `400`         | Bad request    | Bad request is sent to the API because of invalid or missing parameters |
| `404`         | Feed not found | This response occurs when results or feeds are not found to be deleted. |

***

## slug: docs/invited-users-management

User management is about engaging the users, making them feel valued, and encouraging them to become active participants. That's where our invited user management system steps in, offering you a toolkit to effortlessly invite, onboard, and cultivate meaningful relationships with your users. The feature provides access to invited users with different permissions and different level of access with which they can choose what to do with the user account.

### Requirements

You need to have an API-key to access the user management API endpoints on the [API reference](/api-reference/accounts-and-settings/user/get-invited-users-list). To get an API-key, you can consult the [guide](/guides/key-concepts#quick-start) for getting the API-key from the user account.

### Adding a user

You can find detail from the [help centre article](https://help.brevo.com/hc/en-us/articles/360001079439).

Start by going into the profile menu on the top-right and navigate to **Users**.

* Click **Add a user**.
* Enter the email address of the user you want to invite.
* Click Confirm user information
* Choose which permission level to give to your user:
  * \*\*All access \*\*
    * Gives full access to general and sales platform, as well as the features included in your plan.
    * Doesn't give access to the profile, plan selection, billing, and payment information.
  * \*\*Custom Access \*\*
    * Gives access to specific features that you can choose from, including general and sales platform, as well as the features included in your plan.
    * Doesn't give access to the profile, plan selection, billing, and payment information.
* Click Confirm permissions.
* Before you send the invitation, a summary of the permissions given and their additional cost is shown. Click Send invitation.

Similarly, you can edit users permissions and you can cancel an invitation through the user interface. You can find a complex procedure for this in the link mentioned previously.

***

## slug: docs/invited-user-management

You can manage users in your Brevo profile. This guide helps the profile owner to manage their users, edit the invited users access permission and delete users through the API endpoints. The endpoints are mentioned below.

## Get all invited users

This API endpoint allows you to retrieve your invited users. To send a request to this endpoint, you need to use the `GET` method and use the url `https://api.brevo.com/v3/organization/invited/users `. You can use the cURL request below:

```curl
curl --request GET \
     --url https://api.brevo.com/v3/organization/invited/users \
     --header 'accept: application/json' \
     --header 'api-key: '
```

There are no parameters for this endpoint as it is a `GET` request so you just need your API-key to run the endpoint and it will send you the response as a string in JSON mentioning the users that are already invited to your user account. The response codes are mentioned below in a table.

| Response code | Message           | Description                                                                                     |
| :------------ | :---------------- | :---------------------------------------------------------------------------------------------- |
| `200`         | List of all users | Displays list of invited users, their status and the features they are using and other details. |
| `400`         | Bad request       | Bad request due to `invalid_parameters` or `missing_parameters`                                 |

A sample JSON response is shown below which consists of all the users and their details in the accounts including the owners and invited users.

```json
{
  "users": [
    {
      "email": "owner@company.com",
      "is_owner": true,
      "status": "active",
      "feature_access": {
        "marketing": "owner",
        "conversations": "owner",
        "crm": "owner"
      }
    },
    {
      "email": "pendingInvitedUser@company.com",
      "is_owner": false,
      "status": "pending",
      "feature_access": {
        "marketing": "custom",
        "conversations": "none",
        "crm": "full"
      }
    },
    {
      "email": "connectedInvitedUser@company.com",
      "is_owner": false,
      "status": "active",
      "feature_access": {
        "marketing": "none",
        "conversations": "full",
        "crm": "none"
      }
    }
  ]
}
```

## Get users permissions

This API endpoint `https://api.brevo.com/v3/organization/user/{email}/permissions` allows to get the permissions for the invited user. You can implement the `GET` method to send a request to this endpoint and you can use the cURL request below:

```curl
curl --request GET \
     --url https://api.brevo.com/v3/organization/user/example%40brevo.com/permissions \
     --header 'accept: application/json' \
     --header 'api-key: '
```

You only have to send one parameter `email` in the request which is mentioned below along with its details.

| Attribute | Datatype | Description                | Value                                         |
| :-------- | :------- | :------------------------- | :-------------------------------------------- |
| `email`   | String   | Email for the invited user | [example@email.com](mailto:example@email.com) |

After the successful request, you get a response which consists of the features that the invited user uses and its permissions. The schema with the `200` response code for the response would look something like this:

```json
{
  "email": "invitedUser@company.com",
  "status": "active",
  "privileges": [
    {
      "feature": "Email campaign",
      "permissions": [
        "Create / edit / delete",
        "Send / schedule / suspend"
      ]
    },
    {
      "feature": "Templates",
      "permissions": [
        "Create / edit / delete",
        "Activate / deactivate"
      ]
    },
    {
      "feature": "SMS campaign",
      "permissions": [
        "Create / edit / delete",
        "Send / schedule / suspend"
      ]
    },
    {
      "feature": "Facebook Ads",
      "permissions": [
        "Schedule / pause"
      ]
    },
    {
      "feature": "Landing pages",
      "permissions": [
        "All"
      ]
    },
    {
      "feature": "Workflows",
      "permissions": [
        "Create / edit / delete",
        "Activate / deactivate / Pause"
      ]
    },
    {
      "feature": "Contacts",
      "permissions": [
        "View",
        "Contact forms"
      ]
    },
    {
      "feature": "API keys",
      "permissions": [
        "All"
      ]
    },
    {
      "feature": "User management",
      "permissions": [
        "None"
      ]
    },
    {
      "feature": "Sales Platform",
      "permissions": [
        "All"
      ]
    },
    {
      "feature": "Conversations",
      "permissions": [
        "None"
      ]
    }
  ]
}
```

For the `400` bad request, the schema would look something like this:

```json
{
  "code": "method_not_allowed",
  "message": "POST Method is not allowed on this path"
}
```

The response codes are mentioned below in a table.

| Response code | Message     | Description                                                                                                                        |
| :------------ | :---------- | :--------------------------------------------------------------------------------------------------------------------------------- |
| `200`         | Success     | All the details like users status in the account and his privileges are displayed in the JSON response along with the users email. |
| `400`         | Bad request | Bad request due to incorrect parameters like the email format could be wrong or you account does not support inviting users.       |

## Resend / Cancel Invitation

The endpoint `https://api.brevo.com/v3/organization/user/invitation/{action}/{email}` uses  the HTTP `PUT`  method to run the request. This endpoint performs actions on the invited users access to the account. This API endpoint resends, cancels or revokes the users access to the account. It has two parameters mentioned below in the table.

| Attribute | Datatype | Description                                    | Value               |
| :-------- | :------- | :--------------------------------------------- | :------------------ |
| `action`  | String   | The action to be performed on the invited user | `resend`, `cancel`  |
| `email`   | String   | Email of the invited user                      | `example@brevo.com` |

The response shows an `OK` status if the request runs successfully. An example `200` successful response would look like:

```json
{
  "status": "OK",
  "credit_notes": [
    "TEST-123"
  ]
}
```

On the other hand, you may not have access to change the users rights of access. So, a sample error response with code `403` would look something like:

```json
{
  "message": "string",
  "developer_message": "string"
}
```

A table below mentions the response codes.

| Response codes | Message             | Description                                                                             |
| :------------- | :------------------ | :-------------------------------------------------------------------------------------- |
| `200`          | Success             | The `PUT` request is successful and the access rights are updated for the invited user. |
| `403`          | Unauthorized access | You do not have access to resend or cancel an invitation                                |

## Revoke a users permission

You can revoke or stop giving access to an invited user through this endpoint. You can use the endpoint `https://api.brevo.com/v3/organization/user/invitation/revoke/{email}` with the HTTP method `PUT` as you are updating the rights for an invited user.  A cURL request is depicted below to send a request.

```curl
curl --request PUT \
     --url https://api.brevo.com/v3/organization/user/invitation/revoke/revokeduser%40email.com \
     --header 'accept: application/json' \
     --header 'api-key: '
```

There is only one attribute for this mentioned and defined below in a table.

| Attribute | Datatype | Description                                     | Value                   |
| :-------- | :------- | :---------------------------------------------- | :---------------------- |
| `example` | String   | Email of the user whose access is to be revoked | `revokeduser@email.com` |

After the request is successful, a JSON response is shown with two response codes `200` and `403`. We will define them below in a table.

| Response code | Message             | Description                                             |
| :------------ | :------------------ | :------------------------------------------------------ |
| `200`         | Credit note exists  | Users access to the account is revoked                  |
| `403`         | Unauthorized access | You are not authorized to revoke an access for any user |

A JSON response is also shown below.

```json
{
  "status": "OK",
  "credit_notes": [
    "TEST-123"
  ]
}
```

## Send an invitation to the user

You can invite a user by using this endpoint. You can send an invitation to them and they will receive an email to join your account to access certain features. You can use the endpoint `https://api.brevo.com/v3/organization/user/invitation/send` with the HTTP method `POST` to run the request. A cURL request for inviting the user would look something like this.

```curl
curl --request POST \
     --url https://api.brevo.com/v3/organization/user/invitation/send \
     --header 'accept: application/json' \
     --header 'api-key: ' \
     --header 'content-type: application/json' \
     --data '
{
  "all_features_access": false,
  "email": "inviteuser@example.com",
  "privileges": [
    {
      "feature": "sms_campaigns",
      "permissions": [
        "view",
        "create_edit_delete"
      ]
    },
    {
      "feature": "transactional_emails",
      "permissions": [
        "activate_deactivate",
        "settings"
      ]
    }
  ]
}
```

You can navigate to the [API reference](/reference/inviteuser) and you can find more details on the parameters for this endpoint. You can find the parameters below to invite the user to the platform.

| Attribute             | Datatype | Description                                                      | Value                                         |
| :-------------------- | :------- | :--------------------------------------------------------------- | :-------------------------------------------- |
| `email`               | String   | Email of the invited user                                        | [example@brevo.com](mailto:example@brevo.com) |
| `all_features_access` | Boolean  | Describes if all the features can be accessed by the user or not | true or false                                 |
| `privileges`          | Object   | Object showing the features for the user and its permissions     | `feature`, `permissions`                      |

There are some pre-defined values for `features` and `permissions` and the user has to choose from them. For the `privileges` object, we will define its attributes below:

| Attribute     | Datatype | Description                     | Value                                                                                                 |
| :------------ | :------- | :------------------------------ | :---------------------------------------------------------------------------------------------------- |
| `features`    | String   | The features offered from Brevo | Some of the features are `landing_pages`, `api-keys`, `sales_platform`, `user_management` and `phone` |
| `permissions` | String   | Permissions for the features    | Some of the permissions are`all` or `send_schedule_suspend` or `create_edit_delete`                   |

For the JSON response, there are some error codes which are defined below in a table.

| Response code | Message                      | Description                                                                                                      |
| :------------ | :--------------------------- | :--------------------------------------------------------------------------------------------------------------- |
| `200`         | `{ "status": "ok" }`         | The invitation is sent successfully.                                                                             |
| `400`         | `invalid_invitation_request` | The invitation request is not valid due to errors like invalid plan for inviting users or user limit is reached. |
| `403`         | `access_denied`              | Access is denied to invite users                                                                                 |

A JSON response is displayed below.

```json
{
  "status": "OK",
  "credit_notes": [
    "TEST-123"
  ],
  "invoice_id": "string"
}
```

## Update users permissions

This endpoint allows to update the permissions for the invited users. You can use the endpoint `https://api.brevo.com/v3/organization/user/update/permissions` with the calling method `POST` to send the payload for the request. A cURL request is shown below.

```curl
curl --request POST \
     --url https://api.brevo.com/v3/organization/user/update/permissions \
     --header 'accept: application/json' \
     --header 'api-key: ' \
     --header 'content-type: application/json' \
     --data '
{
  "all_features_access": true,
  "email": "inviteuser@example.com"
}
'
```

You can navigate to the [API reference](/reference/edit-user-permission) and you can find more details on the parameters for this endpoint. The parameters used are almost similar to sending an invitation to the user. They are mentioned below in a table

| Attribute             | Datatype | Description                                                      | Value                                         |
| :-------------------- | :------- | :--------------------------------------------------------------- | :-------------------------------------------- |
| `email`               | String   | Email of the invited user                                        | [example@brevo.com](mailto:example@brevo.com) |
| `all_features_access` | Boolean  | Describes if all the features can be accessed by the user or not | true or false                                 |
| `privileges`          | Object   | Object showing the features for the user and its permissions     | `feature`, `permissions`                      |

For the `privileges` object, we will define its attributes below:

| Attribute     | Datatype | Description                     | Value                                                                                                 |
| :------------ | :------- | :------------------------------ | :---------------------------------------------------------------------------------------------------- |
| `features`    | String   | The features offered from Brevo | Some of the features are `landing_pages`, `api-keys`, `sales_platform`, `user_management` and `phone` |
| `permissions` | String   | Permissions for the features    | `all` or `none`                                                                                       |

For the JSON response, there are some error codes which are defined below in a table.

| Response code | Message                      | Description                                                                                                      |
| :------------ | :--------------------------- | :--------------------------------------------------------------------------------------------------------------- |
| `200`         | `{ "status": "ok" }`         | The invitation is sent successfully.                                                                             |
| `400`         | `invalid_invitation_request` | The invitation request is not valid due to errors like invalid plan for inviting users or user limit is reached. |
| `403`         | `access_denied`              | Access is denied to invite users                                                                                 |

For the `200` success response code the response format would look something like depicted below.

```json
{
  "status": "OK",
  "credit_notes": [
    "TEST-123"
  ],
  "invoice_id": "string"
}
```


Link da documentacao completa: https://developers.brevo.com/docs/getting-started